!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("d3"),require("c3"));else if("function"==typeof define&&define.amd)define(["d3","c3"],e);else{var n="object"==typeof exports?e(require("d3"),require("c3")):e(t.d3,t.c3);for(var i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(window,function(t,e){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=21)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.each=function(t,e,n){var i;if(!t)return 0;if(n=n||t,t instanceof Array){for(i=0;i<t.length;i++)if(!1===e.call(n,t[i],i,t))return 0}else for(i in t)if(t.hasOwnProperty(i)&&!1===e.call(n,t[i],i,t))return 0;return 1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=document.createElement("input");if(n.value=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),e){var i=document.createElement("div");i.style.padding="5px 10px",i.style.backgroundColor="#ffffff",i.style.fontSize="12px",i.style.position="absolute",i.style.top=e.pageY+"px",i.style.left=e.pageX+10+"px",i.style.zIndex="999",i.style.opacity=1,i.style.transition="opacity 1s ease",i.innerText="copied!",document.body.appendChild(i),document.addEventListener("mousemove",function(t){return function(t,e){e.style.opacity=0,e.style.top=t.pageY+"px",e.style.left=t.pageX+10+"px"}(t,i)}),setTimeout(function(){i.style.opacity=1,document.body.removeChild(i)},1e3)}}},function(e,n){e.exports=t},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prettyNumber=function(t){var e=(t=Number(t)).toPrecision(3),n="",i=["","k","M","B","T"];if(Number(e)==t&&String(t).length<=4)return String(t);if(Math.abs(t)>=1e15)return e;return t>=1||t<=-1?(t<0&&(t=-t,n="-"),n+function t(e,n){var e=String(e);var r=e.split(".");if(r.length>1){e=r[0];var o=r[1];2==e.length&&o.length>0?o.length>0?e=e+"."+o.charAt(0):e+="0":1==e.length&&o.length>0&&(e=e+"."+o.charAt(0),o.length>1?e+=o.charAt(1):e+="0")}var a=e.length;e.split(".").length>1&&a--;return a<=3?String(e)+i[n]:t(Number(e)/1e3,n+1)}(t,0)):t.toPrecision(3)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.escapeHtml=function(t){var e,n=""+t,r=i.exec(n);if(!r)return n;var o="",a=0,s=0;for(a=r.index;a<n.length;a++){switch(n.charCodeAt(a)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#39;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}s!==a&&(o+=n.substring(s,a)),s=a+1,o+=e}return s!==a?o+n.substring(s,a):o};var i=/["'&<>]/},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extend=function(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])t[n]=arguments[e][n];return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.textWrap=function(t,e){t.each(function(){for(var t=i.select(this),n=t.text().split(/\s+/).reverse(),r=void 0,o=[],a=0,s=t.attr("x"),l=t.attr("y"),c=t.text(null).append("tspan").attr("x",s).attr("y",l).attr("dy","0em");r=n.pop();)o.push(r),c.text(o.join(" ")),c.node().getComputedTextLength()>e&&(o.pop(),c.text(o.join(" ")),o=[r],c=t.append("tspan").attr("x",s).attr("y",l).attr("dy",1.1*++a+0+"em").text(r))})};var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.appendColumn=s,e.appendRow=l;var i,r=n(9),o=(i=r)&&i.__esModule?i:{default:i},a=n(0);function s(t,e){var n=this,i=(Array.prototype.slice.call(arguments,2),void 0!==t?t:null);return"function"==typeof e?(n.matrix[0].push(i),(0,a.each)(n.matrix,function(t,i){var r=void 0;i>0&&(void 0===(r=e.call(n,t,i))&&(r=null),n.matrix[i].push(r))})):(!e||e instanceof Array)&&((e=e||[]).length<=n.matrix.length-1?e=e.concat((0,o.default)(n.matrix.length-1-e.length)):(0,a.each)(e,function(t,i){n.matrix.length-1<e.length&&l.call(n,String(n.matrix.length))}),n.matrix[0].push(i),(0,a.each)(e,function(t,e){n.matrix[e+1][n.matrix[0].length-1]=t})),n}function l(t,e){var n=this,i=(Array.prototype.slice.call(arguments,2),void 0!==t?t:null),r=[];return r.push(i),"function"==typeof e?((0,a.each)(n.matrix[0],function(t,i){var o=void 0,a=void 0;i>0&&(o=n.selectColumn(i),void 0===(a=e.call(n,o,i))&&(a=null),r.push(a))}),n.matrix.push(r)):(!e||e instanceof Array)&&((e=e||[]).length<=n.matrix[0].length-1?e=e.concat((0,o.default)(n.matrix[0].length-1-e.length)):(0,a.each)(e,function(t,i){n.matrix[0].length-1<e.length&&s.call(n,String(n.matrix[0].length))}),n.matrix.push(r.concat(e))),n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){for(var e=[],n=0;n<t;n++)e.push(null);return e}},function(t,n){t.exports=e},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function r(t){return null!==t&&"function"==typeof t.getTime&&!isNaN(t.getTime())}function o(t){return/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z)?$/i.test(t)}e.testObject=r,e.testString=o,e.default=function(t){return"object"===(void 0===t?"undefined":i(t))?r(t):"string"==typeof t&&o(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Dataset=void 0;var i=h(n(8)),r=h(n(23)),o=h(n(24)),a=h(n(25)),s=h(n(26)),l=h(n(27)),c=h(n(28)),u=p(n(13)),d=n(5),f=p(n(29));function p(t){return t&&t.__esModule?t:{default:t}}function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var v=e.Dataset=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this instanceof t==!1)return new t(e);this.matrix=[["Index"]],this.meta={type:void 0},this.config=e};v.prototype.data=function(t){return arguments.length?(this.matrix=t instanceof Array?t:null,this):this.matrix},v.prototype.set=function(t,e){if(arguments.length<2||t.length<2)throw Error("Incorrect arguments provided for #set method");var n="number"==typeof t[0]?t[0]:this.matrix[0].indexOf(t[0]),r="number"==typeof t[1]?t[1]:s.selectColumn.call(this,0).indexOf(t[1]),o=s.selectColumn.call(this,t[0]),a=s.selectRow.call(this,t[1]);return o.length<1&&(i.appendColumn.call(this,String(t[0])),n=this.matrix[0].length-1),a.length<1&&(i.appendRow.call(this,String(t[1])),r=this.matrix.length-1),this.matrix[r][n]=e,this},v.prototype.type=function(t){return arguments.length?(this.meta.type=t?String(t):void 0,this):this.meta.type},(0,d.extend)(v.prototype,i),(0,d.extend)(v.prototype,r),(0,d.extend)(v.prototype,o),(0,d.extend)(v.prototype,a),(0,d.extend)(v.prototype,s),(0,d.extend)(v.prototype,l),(0,d.extend)(v.prototype,c),(0,d.extend)(v.prototype,u.default),v.parser=(0,f.default)(v),e.default=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);n(5);function r(t,e,n){var r=t.slice(e||0,n?n+1:t.length),o=0;return(0,i.each)(r,function(t,e){"number"!=typeof t||isNaN(parseFloat(t))||(o+=parseFloat(t))}),o/r.length}function o(t,e,n){var r=t.slice(e||0,n?n+1:t.length),o=[];return(0,i.each)(r,function(t,e){"number"!=typeof t||isNaN(parseFloat(t))||o.push(parseFloat(t))}),Math.max.apply(Math,o)}function a(t,e,n){var r=t.slice(e||0,n?n+1:t.length),o=[];return(0,i.each)(r,function(t,e){"number"!=typeof t||isNaN(parseFloat(t))||o.push(parseFloat(t))}),Math.min.apply(Math,o)}function s(t,e,n){var r=t.slice(e||0,n?n+1:t.length),o=0;return(0,i.each)(r,function(t,e){"number"!=typeof t||isNaN(parseFloat(t))||(o+=parseFloat(t))}),o}var l=function(t){return r(t,1)},c=l,u=function(t){return s(t,1)},d=u,f=function(t){return o(t,1)},p=f,h=function(t){return a(t,1)},v=h,g=function(t){return t[0]},m=g;e.default={average:r,maximum:o,minimum:a,sum:s,getColumnAverage:l,getRowAverage:c,getColumnSum:u,getRowSum:d,getColumnMaximum:f,getRowMaximum:p,getColumnMinimum:h,getRowMinimum:v,getColumnLabel:g,getRowIndex:m}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.flatten=function t(e){var n={};for(var r in e)if(e.hasOwnProperty(r))if("object"==i(e[r])&&null!==e[r]){var o=t(e[r]);for(var a in o)o.hasOwnProperty(a)&&(n[r+"."+a]=o[a])}else n[r]=e[r];return n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.stripHtmlTags=function(t){if("string"!=typeof t)return t;return t.replace(/(<([^>]+)>)/gi,"")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.extendDeep=function t(e){for(var n=1;n<arguments.length;n++)(0,r.each)(arguments[n],function(n,r){void 0!==e[r]&&void 0!==n&&"object"===i(e[r])&&"object"===(void 0===n?"undefined":i(n))&&null!==e[r]&&null!==n?t(e[r],n):e[r]=n});return e};var r=n(0)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.element,n=t.label,i=void 0===n?"Download":n,r=t.type,a=void 0===r?"json":r,s=t.data;if([].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(e.parentNode.children)).find(function(t){return"keen-dataviz-button"===t.className}))return;var l=document.createElement("button");l.innerText=i,l.className="keen-dataviz-button",l.addEventListener("click",function(t){return(0,o.default)({event:t,type:a,data:s})}),e.parentNode.insertBefore(l,e.nextSibling)};var i,r=n(40),o=(i=r)&&i.__esModule?i:{default:i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.node,n=t.quality,i=t.bgcolor;if(n){if(n<0||n>1)throw Error("Please provide image quality between 0 and 1");o.default.toBlob(e,{quality:n,bgcolor:i}).then(function(t){(0,a.saveAs)(t,"chart.jpeg")})}n||o.default.toBlob(e).then(function(t){(0,a.saveAs)(t,"chart.png")})};var i,r=n(41),o=(i=r)&&i.__esModule?i:{default:i},a=n(42)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.type,n=t.data,i=["json","csv"],r=e.toLowerCase();if(!i.includes(e))throw new Error("This type is not supported");var o=i[0],a="";"json"===r&&(a="data:text/json;charset=utf-8, "+encodeURIComponent(JSON.stringify(n)));"csv"===r&&(a=function(t){var e="";return t.forEach(function(n,i){n.forEach(function(t,i){e+=String(t).replace(/,/g,""),n.length>i+1&&(e+=",")}),t.length>i+1&&(e+="\n")}),"data:text/csv;charset=utf-8,"+encodeURIComponent(e)}(n),o=r);var s=document.createElement("a");s.setAttribute("href",a),s.setAttribute("download","chart."+o),document.body.appendChild(s),s.click(),document.body.removeChild(s)}},function(t,e,n){(function(e){var n,i,r,o,a;void 0===e&&(this.window||this.global),t.exports=(n=function(t,e){var n=document.createElement(t);return e&&n.classList.add(e),n},i=function(t){return t&&"function"==typeof t},r=function(t,e,n){var i;return function(){if(n=n||this,!i)return t.apply(n,arguments),i=!0,setTimeout(function(){i=!1},e)}},(a=(o=function(t,e){this.plugins=["ruler"],"string"==typeof t&&(t=document.querySelector(t)),this.input=t,this.config=Object.assign({},{type:"single",tooltips:"always",updateThrottle:30,formatTooltip:function(t){return t},classes:{input:"rangeable-input",container:"rangeable-container",vertical:"rangeable-vertical",progress:"rangeable-progress",handle:"rangeable-handle",track:"rangeable-track",multiple:"rangeable-multiple",disabled:"rangeable-disabled",tooltips:"rangeable-tooltips",tooltip:"rangeable-tooltip",visible:"rangeable-tooltips--visible"}},e),this.mouseAxis={x:"clientX",y:"clientY"},this.trackSize={x:"width",y:"height"},this.trackPos={x:"left",y:"top"},this.lastPos=0,this.double="double"===this.config.type||Array.isArray(this.config.value),this.touch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,this.version="0.1.6",this.init(),this.onInit()}).prototype).init=function(){if(!this.input.rangeable){var t,e={min:0,max:100,step:1,value:this.input.value};for(t in e)this.input[t]||(this.input[t]=e[t]),void 0!==this.config[t]&&(this.input[t]=this.config[t]);this.axis=this.config.vertical?"y":"x",this.input.rangeable=this,this.double?(this.input.values=this.config.value?this.config.value:[this.input.min,this.input.max],this.input.defaultValues=this.input.values.slice()):this.input.defaultValue||(this.input.defaultValue=this.input.value),this.render(),this.initialised=!0}},a.render=function(){var t=this,e=this.config,i=e.classes,r=n("div",i.container),o=n("div",i.track),a=n("div",i.progress),s=n("div",i.handle),l=n("div",i.tooltip);if(this.input.tabIndex=-1,this.double){s=[n("div",i.handle),n("div",i.handle)],l=[];for(var c=0;3>c;c++)l[c]=n("div",i.tooltip);s.forEach(function(t,n){t.index=n,a.appendChild(t),t.appendChild(l[n]),t.tabIndex=1,e.controls&&e.controls[n]&&e.controls[n].locked&&!0===e.controls[n].locked&&(t.locked=!0)}),e.vertical&&a.appendChild(s[0]),a.appendChild(l[2]),r.classList.add(i.multiple)}else a.appendChild(s),s.appendChild(l),s.tabIndex=1,e.controls&&e.controls.locked&&!0===e.controls.locked&&(s.locked=!0);if(r.appendChild(o),e.vertical&&r.classList.add(i.vertical),e.size&&(r.style[this.trackSize[this.axis]]=isNaN(e.size)?e.size:e.size+"px"),e.tooltips&&(r.classList.add(i.tooltips),"string"==typeof e.tooltips&&"always"===e.tooltips&&r.classList.add(i.visible)),this.nodes={container:r,track:o,progress:a,handle:s,tooltip:l},this.double){this.nodes.buffer=[];var u=n("div","rangeable-buffers");this.input.values.forEach(function(i,r){var a=n("div","rangeable-buffer");u.appendChild(a),t.nodes.buffer.push(a),o.appendChild(u),e.controls&&(t.limits=[{},{}],void 0!==e.controls[r].min&&(t.limits[r].min=e.controls[r].min),void 0!==e.controls[r].max&&(t.limits[r].max=e.controls[r].max))})}else s=n("div","rangeable-buffer"),o.appendChild(s),this.nodes.buffer=s,o.appendChild(s),e.controls&&(this.limits={},void 0!==e.controls.min&&(this.limits.min=e.controls.min),void 0!==e.controls.max&&(this.limits.max=e.controls.max));this.setLimits(e.controls),o.appendChild(a),this.input.parentNode.insertBefore(r,this.input),r.insertBefore(this.input,o),this.input.classList.add(i.input),this.bind(),this.update()},a.reset=function(){this.double?this.input.defaultValues.forEach(this.setValue,this):this.setValue(this.input.defaultValue),this.onEnd()},a.setValueFromPosition=function(t){var e=this.getLimits(),n=parseFloat(this.input.step),i=this.touch?t.touches[0][this.mouseAxis[this.axis]]:t[this.mouseAxis[this.axis]],r=i-this.rects.container[this.trackPos[this.axis]],o=this.rects.container[this.trackSize[this.axis]];return("mousedown"!==t.type||!(!this.double&&this.nodes.handle.contains(t.target)||this.double&&(this.nodes.handle[0].contains(t.target)||this.nodes.handle[1].contains(t.target))))&&(t=(this.config.vertical?(o-r)/o*100:r/o*100)*(e.max-e.min)/100+e.min,t=Math.ceil(t/n)*n,i>=this.lastPos&&(t-=n),parseFloat(t)!==parseFloat(this.startValue)&&(n=!1,this.double&&(n=this.activeHandle.index),t=this.limit(t,n),void this.setValue(t,n)))},a.start=function(t){return t.preventDefault(),this.startValue=this.getValue(),this.onStart(),this.nodes.container.classList.add("dragging"),this.recalculate(),this.activeHandle=this.getHandle(t),!!this.activeHandle&&(this.activeHandle.classList.add("active"),this.setValueFromPosition(t),void(this.touch?(document.addEventListener("touchmove",this.events.move,!1),document.addEventListener("touchend",this.events.stop,!1),document.addEventListener("touchcancel",this.events.stop,!1)):(document.addEventListener("mousemove",this.events.move,!1),document.addEventListener("mouseup",this.events.stop,!1))))},a.move=function(t){this.setValueFromPosition(t),this.lastPos=this.touch?t.touches[0][this.mouseAxis[this.axis]]:t[this.mouseAxis[this.axis]]},a.stop=function(){this.stopValue=this.getValue(),this.nodes.container.classList.remove("dragging"),this.onEnd(),this.activeHandle.classList.remove("active"),this.activeHandle=!1,this.touch?(document.removeEventListener("touchmove",this.events.move),document.removeEventListener("touchend",this.events.stop),document.removeEventListener("touchcancel",this.events.stop)):(document.removeEventListener("mousemove",this.events.move),document.removeEventListener("mouseup",this.events.stop)),this.startValue!==this.stopValue&&this.input.dispatchEvent(new Event("change")),this.startValue=null},a.keydown=function(t){var e=this,n=function(n){switch(t.key){case"ArrowRight":case"ArrowUp":e.stepUp(n);break;case"ArrowLeft":case"ArrowDown":e.stepDown(n)}};this.double?this.nodes.handle.forEach(function(t){t===document.activeElement&&n(t.index)}):this.nodes.handle===document.activeElement&&n()},a.stepUp=function(t){var e=parseFloat(this.input.step),n=this.getValue();this.double&&void 0!==t&&(n=n[t]),e=this.limit(parseFloat(n)+e,t),this.setValue(e,t)},a.stepDown=function(t){var e=parseFloat(this.input.step),n=this.getValue();this.double&&void 0!==t&&(n=n[t]),e=this.limit(parseFloat(n)-e,t),this.setValue(e,t)},a.limit=function(t,e){var n=this.input,i=this.getLimits();return t=parseFloat(t),this.double&&void 0!==e?(!e&&t>n.values[1]?t=n.values[1]:0<e&&t<n.values[0]&&(t=n.values[0]),this.limits&&(e?t>this.limits[1].max?t=this.limits[1].max:t<this.limits[1].min&&(t=this.limits[1].min):t>this.limits[0].max?t=this.limits[0].max:t<this.limits[0].min&&(t=this.limits[0].min))):this.limits&&(t>this.limits.max?t=this.limits.max:t<this.limits.min&&(t=this.limits.min)),t>i.max?t=i.max:t<i.min&&(t=i.min),t=(t=parseFloat(t)).toFixed(this.accuracy)},a.recalculate=function(){var t=[];this.double?this.nodes.handle.forEach(function(e,n){t[n]=e.getBoundingClientRect()}):t=this.nodes.handle.getBoundingClientRect(),this.rects={handle:t,container:this.nodes.container.getBoundingClientRect()}},a.update=function(){var t=this;this.recalculate(),this.accuracy=0,this.input.step.includes(".")&&(this.accuracy=(this.input.step.split(".")[1]||[]).length);var e=this.getValue(),n=this.getLimits(),i=this.rects.container[this.trackSize[this.axis]],r=function(e,r,o){e.style[t.config.vertical?"bottom":"left"]=r+"px",e.style[t.trackSize[t.axis]]=o/n.max*i-r+"px"};this.double?(this.limits&&this.limits.forEach(function(e,o){r(t.nodes.buffer[o],e.min/n.max*i,e.max)}),this.input.values.forEach(function(e,n){t.setValue(t.limit(e,n),n)})):(this.limits&&r(this.nodes.buffer,this.limits.min/n.max*i,this.limits.max),this.setValue(this.limit(e)))},a.getValue=function(){return this.double?this.input.values:this.input.value},a.setValue=function(t,e){var n=this.nodes;if(this.double&&void 0===e)return!1;void 0===t&&(t=this.input.value),t=this.limit(t,e);var i=this.initialised&&(t!==this.input.value||this.nativeEvent),r=this.config.formatTooltip;if(this.double){var o=this.input.values;if(o[e]=t,this.config.tooltips){n.tooltip[e].textContent=r.call(this,t);var a=n.tooltip[0].getBoundingClientRect(),s=n.tooltip[1].getBoundingClientRect();a=!(a.right<s.left||a.left>s.right||a.bottom<s.top||a.top>s.bottom),n.container.classList.toggle("combined-tooltip",a),a&&(n.tooltip[2].textContent=o[0]===o[1]?r.call(this,o[0]):r.call(this,o[0])+" - "+r.call(this,o[1]))}}else this.input.value=t,n.tooltip.textContent=r.call(this,t);this.setPosition(t,e),i&&(this.onChange(),this.nativeEvent||this.input.dispatchEvent(new Event("input")),this.nativeEvent=!1)},a.native=function(){this.nativeEvent=!0,this.setValue()},a.getLimits=function(){return{min:parseFloat(this.input.min),max:parseFloat(this.input.max)}},a.setLimits=function(t){var e=this;if(void 0===t)return!1;this.limits||(this.limits=t);var n=function(t,e){void 0!==e.min&&(t.min=e.min),void 0!==e.max&&(t.max=e.max)};this.double?t.forEach(function(t,i){n(e.limits[i],t)}):n(this.limits,t),this.update()},a.setPosition=function(t){if(this.double){t=this.getPosition(this.input.values[0]);var e=this.getPosition(this.input.values[1]);this.nodes.progress.style[this.config.vertical?"bottom":"left"]=t+"px",t=e-t}else t=this.getPosition();this.nodes.progress.style[this.trackSize[this.axis]]=t+"px"},a.getPosition=function(t){void 0===t&&(t=this.input.value);var e=this.getLimits();return(t-e.min)/(e.max-e.min)*this.rects.container[this.trackSize[this.axis]]},a.getHandle=function(t){if(!this.double)return!this.nodes.handle.locked&&this.nodes.handle;var e=this.rects,n=Math.abs(t[this.mouseAxis[this.axis]]-e.handle[0][this.trackPos[this.axis]]);return e=Math.abs(t[this.mouseAxis[this.axis]]-e.handle[1][this.trackPos[this.axis]]),(t=t.target.closest("."+this.config.classes.handle))||(t=n>e?this.nodes.handle[1]:this.nodes.handle[0]),!t.locked&&t},a.enable=function(){this.input.disabled&&(this.nodes.container.addEventListener(this.touch?"touchstart":"mousedown",this.events.start,!1),this.double?this.nodes.handle.forEach(function(t){return t.tabIndex=1}):this.nodes.handle.tabIndex=1,this.nodes.container.classList.remove(this.config.classes.disabled),this.input.disabled=!1)},a.disable=function(){this.input.disabled||(this.nodes.container.removeEventListener(this.touch?"touchstart":"mousedown",this.events.start),this.double?this.nodes.handle.forEach(function(t){return t.removeAttribute("tabindex")}):this.nodes.handle.removeAttribute("tabindex"),this.nodes.container.classList.add(this.config.classes.disabled),this.input.disabled=!0)},a.bind=function(){var t=this;this.events={},"start move stop update reset native keydown".split(" ").forEach(function(e){t.events[e]=t[e].bind(t)}),this.events.scroll=r(this.events.update,this.config.updateThrottle),this.events.resize=r(this.events.update,this.config.updateThrottle),document.addEventListener("scroll",this.events.scroll,!1),window.addEventListener("resize",this.events.resize,!1),document.addEventListener("keydown",this.events.keydown,!1),this.nodes.container.addEventListener(this.touch?"touchstart":"mousedown",this.events.start,!1),this.input.addEventListener("input",this.events.native,!1),this.input.form&&this.input.form.addEventListener("reset",this.events.reset,!1)},a.unbind=function(){document.removeEventListener("scroll",this.events.scroll),window.removeEventListener("resize",this.events.resize),document.removeEventListener("keydown",this.events.keydown),this.nodes.container.removeEventListener(this.touch?"touchstart":"mousedown",this.events.start),this.input.removeEventListener("input",this.events.native),this.input.form&&this.input.form.removeEventListener("reset",this.events.reset),this.events=null},a.destroy=function(){this.input.rangeable&&(this.unbind(),this.input.classList.remove(this.config.classes.input),this.nodes.container.parentNode.replaceChild(this.input,this.nodes.container),delete this.input.rangeable,this.initialised=!1)},a.onInit=function(){i(this.config.onInit)&&this.config.onInit.call(this,this.getValue())},a.onStart=function(){i(this.config.onStart)&&this.config.onStart.call(this,this.getValue())},a.onChange=function(){i(this.config.onChange)&&this.config.onChange.call(this,this.getValue())},a.onEnd=function(){i(this.config.onEnd)&&this.config.onEnd.call(this,this.getValue())},o)}).call(this,n(7))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.Dataset=e.Dataviz=e.keenGlobals=e.extendKeenGlobalObject=void 0;var i=n(22);Object.defineProperty(e,"Dataviz",{enumerable:!0,get:function(){return i.Dataviz}}),Object.defineProperty(e,"Dataset",{enumerable:!0,get:function(){return i.Dataset}});void 0!==t||("undefined"!=typeof self?self:"undefined"!=typeof window&&window),e.extendKeenGlobalObject=function(t){t.KeenDataviz=i.Dataviz,t.KeenDataset=i.Dataset,t.Keen=t.Keen||{},t.Keen.Dataset=i.Dataset,t.Keen.Dataviz=i.Dataviz};e.keenGlobals=void 0;"undefined"!=typeof webpackKeenGlobals&&(e.keenGlobals=webpackKeenGlobals),e.default=i.Dataviz}).call(this,n(7))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Dataset=e.Dataviz=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},o=n(12);Object.defineProperty(e,"Dataset",{enumerable:!0,get:function(){return o.Dataset}});var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2)),s=_(n(10)),l=_(n(32)),c=_(n(33)),u=n(0),d=_(n(11)),f=n(15),p=(n(4),_(n(34))),h=n(16),v=_(n(18)),g=_(n(19)),m=_(n(17)),y=_(n(53)),b=_(n(1)),x=_(n(54)),w=_(n(58));function _(t){return t&&t.__esModule?t:{default:t}}var k=e.Dataviz=function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this instanceof t==!1)return new t(n);this.c3=s.default,this.d3=a;var i={showDeprecationWarnings:!0,showLoadingSpinner:!1,container:void 0,containerElement:void 0,title:void 0,showTitle:!0,subtitle:void 0,notes:void 0,theme:"keen-dataviz",colors:["#00bbde","#fe6672","#eeb058","#8a8ad6","#ff855c","#00cfbb","#5a9eed","#73d483","#c879bb","#0099b6","#d74d58","#cb9141","#6b6bb6","#d86945","#00aa99","#4281c9","#57b566","#ac5c9e","#27cceb","#ff818b","#f6bf71","#9b9be1","#ff9b79","#26dfcd","#73aff4","#87e096","#d88bcb"],colorMapping:{},ui:{executionMetadata:!0},utils:{clickToCopyToClipboard:!0},indexBy:"timeframe.start",labels:[],labelMapping:{},labelMappingRegExp:void 0,errorMapping:{},showErrorMessages:!0,library:"default",sortGroups:void 0,sortIntervals:void 0,results:void 0,type:void 0,stacked:!1,dateFormat:void 0,legend:{show:!0,position:"right",alignment:"top",label:{textMaxLength:12},pagination:{offset:0,limit:5},tooltip:{show:!0,pointer:!0},sort:void 0},axis:{},color:{},size:{},padding:{top:15},point:{focus:{expand:{enabled:!1}},r:2,show:!0,sensitivity:300},tooltip:{horizontal:!0,contents:w.default,format:{}},transition:{},data:{order:null,selection:{enabled:!0,draggable:!0,multiple:!0},onselected:function(t,n){var i=e.view._artifacts.c3.selected().reduce(function(t,e){return t+e.value},0);(0,b.default)(i)}},grid:{y:{show:!0}},partialIntervalIndicator:{show:void 0,className:"partial-interval-indicator"},timezone:"UTC",table:{schema:"static"},renderOnVisible:!1,funnel:{lines:!0,resultValues:!0,percents:{show:!1,countingMethod:"absolute",decimals:0},marginBetweenElements:!1,hover:!0,effect3d:"both-sides",minimalSize:!1},react:!1,range:!1,sparkline:!1,choropleth:{map:"world",borders:{show:!0,size:.5,color:"#000"},showSlider:!1},heatmap:{}};this.config=r({},(0,h.extendDeep)(i,n)),n.palette&&(x.default[n.palette]||console.log("Colors pallete not found",n.palette),this.config.colors=x.default[n.palette].colors),this.config.type&&(this.config.type=j(this.config.type)),this.config.type&&this.config.type.includes("-range")&&(this.config.range=!0,this.config.type=this.config.type.replace("-range",""),this.config.legend.show=!1,this.config.stacking="normal",this.config.labels=["Max","Min"],this.config.colors=[this.config.colors[0],this.config.colors[0]]),this.config.stacking&&(this.config.stacked=!0),this.config.sparkline&&(this.config.legend.show=!1,this.config.axis={x:{show:!1},y:{show:!1}},this.config.grid={x:{show:!1},y:{show:!1}}),this.config.container&&this.el(this.config.container),void 0===n.legend||n.legend||(this.config.legend=r({},n,{show:!1})),n.color&&n.color.pattern&&(this.config.colors=n.color.pattern),this.config.legend&&this.config.legend.tooltip&&!1===this.config.legend.tooltip.show&&void 0===this.config.tooltip.show&&(this.config.tooltip={show:!1}),this.dataset=new o.Dataset(this.config),this.view={_prepared:!1,_rendered:!1,_artifacts:{}},t.visuals.push(this),this.config.showLoadingSpinner&&this.prepare(),this.config.results&&this.render(this.config.results),this.config.firstVisibilityState=document.visibilityState,this.config.utils.clickToCopyToClipboard||(this.config.data.onselected=function(){}),n.data&&n.data.onselected&&(this.config.data.onselected=function(t,i){if(n.data.onselected.bind(null,t,i)(),e.config.utils.clickToCopyToClipboard){var r=e.view._artifacts.c3.selected().reduce(function(t,e){return t+e.value},0);(0,b.default)(r)}})};function E(t){2!==t.data()[0].length||(0,d.default)(t.data()[1][0])?t.dataset.updateRow(0,function(e,n){return n>0&&t.config.labels[n-1]?(0,f.stripHtmlTags)(String(t.config.labels[n-1])):(0,f.stripHtmlTags)(e)}.bind(t)):t.dataset.updateColumn(0,function(e,n){return t.config.labels[n-1]?(0,f.stripHtmlTags)(String(t.config.labels[n-1])):(0,f.stripHtmlTags)(e)}.bind(t))}function M(t){var e=t.datavizInstance,n=t.value;if(e.config.labelMappingRegExp){var i=n;return e.config.labelMappingRegExp.forEach(function(t){t.length>1&&(t[0].test(n)&&(i=t[1]))}),(0,f.stripHtmlTags)(i)}return e.config.labelMapping[n]?(0,f.stripHtmlTags)(String(e.config.labelMapping[n])):(0,f.stripHtmlTags)(n)}function A(t){t.config.labelMappingDimension||(2!==t.data()[0].length||(0,d.default)(t.data()[1][0])?t.config.labelMappingDimension="column":t.config.labelMappingDimension="row"),"row"!==t.config.labelMappingDimension&&"both"!==t.config.labelMappingDimension||t.dataset.updateColumn(0,function(e){return M({datavizInstance:t,value:e})}.bind(t)),"column"!==t.config.labelMappingDimension&&"both"!==t.config.labelMappingDimension||t.dataset.updateRow(0,function(e){return M({datavizInstance:t,value:e})}.bind(t))}function S(t){t.config.sortGroups&&t.data().length>1&&((0,d.default)(t.data()[1][0])?t.dataset.sortColumns(t.config.sortGroups,t.dataset.getColumnSum):t.dataset.sortRows(t.config.sortGroups,t.dataset.getRowSum))}function P(t){t.config.sortIntervals&&t.dataset.sortRows(t.config.sortIntervals)}function j(t){return{areachart:"area",barchart:"horizontal-bar",columnchart:"bar",linechart:"line",piechart:"pie"}[t]||t}function C(t){"undefined"==typeof document&&"undefined"!=typeof window?(null==document.readyState&&document.addEventListener&&(document.addEventListener("DOMContentLoaded",function t(){document.removeEventListener("DOMContentLoaded",t,!1),document.readyState="complete"},!1),document.readyState="loading"),function t(e){/in/.test(document.readyState)?setTimeout(function(){t(e)},9):e()}(t)):t()}k.libraries={default:{}},"undefined"!=typeof window&&(k.libraries.default=(0,p.default)(k)),k.visuals=[],k.register=function(t,e){k.libraries[t]=k.libraries[t]||{},(0,u.each)(e,function(e,n){k.libraries[t][n]=e})},k.find=function(t){if(!arguments.length)return k.visuals;var e=t.nodeName?t:document.querySelector(t),n=null;return(0,u.each)(k.visuals,function(t){if(e==t.config.container)return n=t,!1}),n},k.prototype.attributes=function(t){if(this.config.showDeprecationWarnings&&console.log(".attributes() is deprecated. Use: new KeenDataviz({ _your_value_here_ })"),!arguments.length)return this.config;var e=this.config;return(0,u.each)(t,function(t,n){"chartType"===n&&(n="type"),e[n]=t}),this},k.prototype.call=function(t){return t.call(this),this},k.prototype.chartOptions=function(t){return this.config.showDeprecationWarnings&&console.log(".chartOptions() is deprecated. Use: new KeenDataviz({ _your_value_here_ })"),arguments.length?(this.config=(0,h.extendDeep)(this.config,t),this):this.config},k.prototype.colors=function(t){return this.config.showDeprecationWarnings&&console.log(".colors() is deprecated. Use: new KeenDataviz({ colors: _your_value_here_ })"),arguments.length?(this.config.colors=t instanceof Array?t:[],this):this.config.colors},k.prototype.colorMapping=function(t){this.config.showDeprecationWarnings&&console.log(".colorMapping() is deprecated. Use: new KeenDataviz({ colorMapping: _your_value_here_ })");var e=this;return arguments.length?(null===t?this.config.colorMapping={}:"object"===(void 0===t?"undefined":i(t))&&(0,u.each)(t,function(t,n){e.config.colorMapping[n]=t||null}),this):this.config.colorMapping},k.prototype.data=c.default,k.prototype.dateFormat=function(t){return this.config.showDeprecationWarnings&&console.log(".dateFormat() is deprecated. Use: new KeenDataviz({ dateFormat: _your_value_here_ })"),arguments.length?(this.config.dateFormat="string"==typeof t||"function"==typeof t?t:void 0,this):this.config.dateFormat},k.prototype.destroy=function(){var t=this.library(),e=this.config.type,n=this.el();return k.libraries[t]&&k.libraries[t][e]&&k.libraries[t][e].destroy.call(this),n&&(n.innerHTML=""),this.view._prepared=!1,this.view._rendered=!1,this.view._artifacts={},this},k.prototype.el=function(t){var e=this;return arguments.length?(C(function(){t&&null!==t?t.nodeName?e.config.containerElement=t:document.querySelector&&(e.config.containerElement=document.querySelector(t)):e.config.containerElement=void 0}),this):this.config.containerElement},k.prototype.height=function(t){return this.config.showDeprecationWarnings&&console.log(".height() is deprecated - use CSS classes"),this},k.prototype.indexBy=function(t){return this.config.showDeprecationWarnings&&console.log(".indexBy() is deprecated. Use: new KeenDataviz({ indexBy: _your_value_here_ })"),arguments.length?(this.config.indexBy=t?String(t):"timeframe.start",this):this.config.indexBy},k.prototype.labels=function(t){return this.config.showDeprecationWarnings&&console.log(".labels() is deprecated. Use: new KeenDataviz({ labels: _your_value_here_ })"),arguments.length?(this.config.labels=t instanceof Array?t:[],E(this),this):this.config.labels},k.prototype.labelMapping=function(t){return this.config.showDeprecationWarnings&&console.log(".labelMapping() is deprecated. Use: new KeenDataviz({ labelMapping: _your_value_here_ })"),arguments.length?(null===t?this.config.labelMapping={}:"object"===(void 0===t?"undefined":i(t))&&(0,u.each)(t,function(t,e){this.config.labelMapping[e]=t||null}.bind(this)),A(this),this):this.config.labelMapping},k.prototype.library=function(t){return arguments.length?(this.config.library=t?String(t):null,this):this.config.library},k.prototype.message=function(){if(this.view._rendered&&this.destroy(),this.el()){this.el().innerHTML="";var t=k.libraries.default.message;t.render&&t.render.apply(this,arguments)}return this},k.prototype.notes=function(t){return this.config.showDeprecationWarnings&&console.log(".notes() is deprecated. Use: new KeenDataviz({ notes: _your_value_here_ })"),arguments.length?(this.config.notes=t?String(t):null,this):this.config.notes},k.prototype.prepare=function(){var t=this;if(!this.el())throw this.config.container+" not found. A DOM parent element is required to mount the chart.";return C(function(){if(t.view._rendered&&t.destroy(),t.el()){t.el().innerHTML="";var e=k.libraries.default.spinner;e.render&&e.render.call(t),t.view._prepared=!0}}),this},k.prototype.render=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=this;if(e){var i=e[0]||e;if(i.query&&i.query.interval&&i.query.timeframe&&"string"==typeof i.query.timeframe&&i.query.timeframe.includes("this_")&&this.config.partialIntervalIndicator&&void 0===this.config.partialIntervalIndicator.show&&(this.config.partialIntervalIndicator.show=!0),Array.isArray(e)){var r=e.map(function(t){return t.query.timeframe});return r.forEach(function(t){if(r.find(function(e){return JSON.stringify(e)!==JSON.stringify(t)})){var e="Timeframes of the queries should be the same";throw console.error(e),e}}),n.data(e[0]).call(function(){t.dataset.deleteColumn(1);var i=!0,r=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value,u=c.query.event_collection+" "+c.query.analysis_type,d=o.Dataset.parser("interval")(c);n.dataset.appendColumn(u,d.selectColumn(1).slice(1))}}catch(t){r=!0,a=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw a}}}).render()}return n.data(e).render()}(this.config.labelMapping&&Object.keys(this.config.labelMapping).length>0||this.config.labelMappingRegExp&&this.config.labelMappingRegExp.length>0)&&A(n),this.config.labels&&Object.keys(this.config.labels).length>0&&E(n),this.config.sortGroups&&S(n),this.config.sortIntervals&&P(n);var a=k.libraries.default.spinner,s=this.config.library,l=this.config.type,c=this.el();if(!c||void 0===c){var u=this.config.container+" not found. A DOM parent element is required to mount the chart.";throw console.error(u),u}var d=n;return n.config.renderAsPromise&&(d=new Promise(function(e,i){var r=t.config.onrendered;n.config.onrendered=function(){r&&r(),e(n)}})),C(function(){var t=n.execution_metadata&&n.config.ui&&n.config.ui.executionMetadata,e=n.config.ui&&n.config.ui.buttons&&n.config.ui.buttons.download&&n.config.ui.buttons.download.type;if(n.view._prepared&&a.destroy&&a.destroy.apply(n,arguments),c.innerHTML="","undefined"===k.libraries[s]){var i="Incorrect library";throw n.message(i),i}if(void 0===k.libraries[s][l]){var r="Incorrect chart type",o=this.config.errorMapping[r]||r;throw n.message(o),r}if(function(t,e){var n="",i="",r="";"top"!==e.legend.position&&"bottom"!==e.legend.position||(i="c3-chart-100-percent");e.range&&(r="keen-dataviz-range");var o='<div class="c3-chart '+i+" "+r+'"></div>',a="horizontal",s="center";["left","center","right"].includes(e.legend.alignment)&&(s=e.legend.alignment);"left"!==e.legend.position&&"right"!==e.legend.position||(a="vertical",["top","middle","bottom"].includes(e.legend.alignment)&&(s=e.legend.alignment));e.legend&&e.legend.show&&(o="top"===e.legend.position||"left"===e.legend.position?'<div class="keen-c3-legend keen-c3-legend-'+a+" keen-c3-legend-"+e.legend.position+" keen-c3-legend-align-"+s+'"></div>'+o:o+'<div class="keen-c3-legend keen-c3-legend-'+a+" keen-c3-legend-"+e.legend.position+" keen-c3-legend-align-"+s+'"></div>');e.react||(n+='<div class="'+e.theme+'">');e.title&&e.showTitle&&(n+='<div class="keen-dataviz-title '+e.theme+'-title">'+e.title+"</div>");e.subtitle&&(n+='<div class="keen-dataviz-subtitle '+e.theme+'-subtitle">'+e.subtitle+"</div>");n+='<div class="keen-dataviz-rendering keen-dataviz-rendering-'+a+" "+e.theme+"-rendering "+e.theme+"-rendering-"+a+'">'+o+"</div>",e.notes&&(n+='<div class="keen-dataviz-notes '+e.theme+'-notes">'+e.notes+"</div>");e.react||(n+="</div>");t.innerHTML=n}(c,n.config),e&&(0,m.default)({element:c,data:n.dataset.matrix,type:n.config.ui.buttons.download.type,label:n.config.ui.buttons.download.label}),t&&(0,y.default)({element:c,data:n.execution_metadata}),n.config.renderOnVisible&&"undefined"!=typeof IntersectionObserver){new IntersectionObserver(function(t,e){t.forEach(function(t){t.isIntersecting&&(n.view._rendered||(k.libraries[s][l].render.call(n),n.view._rendered=!0))})}).observe(c)}else{if("hidden"===n.config.firstVisibilityState&&"undefined"!=typeof document){var u=void 0,d=void 0;void 0!==document.hidden?(u="hidden",d="visibilitychange"):void 0!==document.msHidden?(u="msHidden",d="msvisibilitychange"):void 0!==document.webkitHidden&&(u="webkitHidden",d="webkitvisibilitychange");void 0===document.addEventListener&&void 0===u||document.addEventListener(d,function(){!document[u]&&n.view._artifacts.c3&&n.view._artifacts.c3.load(n.dataset.matrix)},{once:!0})}k.libraries[s][l].render.call(n),n.view._rendered=!0}}),d},k.prototype.sortGroups=function(t){return this.config.showDeprecationWarnings&&console.log(".sortGroups() is deprecated. Use: new KeenDataviz({ sortGroups: _your_value_here_ })"),arguments.length?(this.config.sortGroups=t?String(t):null,S(this),this):this.config.sortGroups},k.prototype.sortIntervals=function(t){return this.config.showDeprecationWarnings&&console.log(".sortIntervals() is deprecated. Use: new KeenDataviz({ sortIntervals: _your_value_here_ })"),arguments.length?(this.config.sortIntervals=t?String(t):null,P(this),this):this.config.sortIntervals},k.prototype.stacked=function(t){return this.config.showDeprecationWarnings&&console.log(".stacked() is deprecated. Use: new KeenDataviz({ stacked: _your_value_here_ })"),arguments.length?(this.config.stacked=!!t,this):this.config.stacked},k.prototype.theme=function(t){return this.config.showDeprecationWarnings&&console.log(".theme() is deprecated. Use: new KeenDataviz({ theme: _your_value_here_ })"),arguments.length?(this.config.theme=t?String(t):null,this):this.config.theme},k.prototype.title=function(t){return this.config.showDeprecationWarnings&&console.log(".title() is deprecated. Use: new KeenDataviz({ title: _your_value_here_ })"),arguments.length?(this.config.title=t?String(t):null,this):this.config.title},k.prototype.type=function(t){return this.config.showDeprecationWarnings&&console.log(".type() is deprecated. Use: new KeenDataviz({ type: _your_value_here_ })"),arguments.length?(this.config.type=t?j(t):null,this):this.config.type},k.prototype.update=function(){var t=this.config.library,e=this.config.type,n=this.el();return t&&e&&n&&k.libraries[t][e].update&&k.libraries[t][e].update.apply(this,arguments),this},k.prototype.width=function(t){return this.config.showDeprecationWarnings&&console.log(".width() is deprecated - use CSS classes"),this},k.prototype.exportImage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.quality,n=void 0===e?0:e,i=t.bgcolor,r=void 0===i?"#fff":i;(0,v.default)({node:this.config.containerElement,quality:n,bgcolor:r})},k.prototype.exportData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json";(0,g.default)({data:this.dataset.matrix,type:t})},k.prototype.chartType=k.prototype.type,k.prototype.error=k.prototype.message,k.prototype.parseRawData=k.prototype.data,k.prototype.parseRequest=function(){return this},k.prototype.initialize=function(){return this},k.version=l.default.version,e.default=k},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deleteColumn=function(t){var e=this,n="number"==typeof t?t:this.matrix[0].indexOf(t);n>-1&&(0,i.each)(e.matrix,function(t,i){e.matrix[i].splice(n,1)});return e},e.deleteRow=function(t){var e="number"==typeof t?t:this.selectColumn(0).indexOf(t);e>-1&&this.matrix.splice(e,1);return this};var i=n(0)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.filterColumns=function(t){var e=this,n=[];return(0,i.each)(e.matrix,function(t,e){n.push([])}),(0,i.each)(e.matrix[0],function(r,o){var a=e.selectColumn(o);(0==o||t.call(e,a,o))&&(0,i.each)(a,function(t,e){n[e].push(t)})}),e.data(n),e},e.filterRows=function(t){var e=this,n=[];return(0,i.each)(e.matrix,function(i,r){(0==r||t.call(e,i,r))&&n.push(i)}),e.data(n),e};var i=n(0)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.insertColumn=function(t,e,n){var i=this,o=void 0!==e?e:null;"function"==typeof n?(i.matrix[0].splice(t,0,o),(0,r.each)(i.matrix,function(e,r){var o;r>0&&(void 0===(o=n.call(i,e,r))&&(o=null),i.matrix[r].splice(t,0,o))})):(!n||n instanceof Array)&&((n=n||[]).length<=i.matrix.length-1?n=n.concat((0,a.default)(i.matrix.length-1-n.length)):(0,r.each)(n,function(t,e){i.matrix.length-1<n.length&&s.appendRow.call(i,String(i.matrix.length))}),i.matrix[0].splice(t,0,o),(0,r.each)(n,function(e,n){i.matrix[n+1].splice(t,0,e)}));return i},e.insertRow=function(t,e,n){var i=this,o=[],l=void 0!==e?e:null;o.push(l),"function"==typeof n?((0,r.each)(i.matrix[0],function(t,e){var r=void 0,a=void 0;e>0&&(r=i.selectColumn(e),void 0===(a=n.call(i,r,e))&&(a=null),o.push(a))}),i.matrix.splice(t,0,o)):(!n||n instanceof Array)&&((n=n||[]).length<=i.matrix[0].length-1?n=n.concat((0,a.default)(i.matrix[0].length-1-n.length)):(0,r.each)(n,function(t,e){i.matrix[0].length-1<n.length&&s.appendColumn.call(i,String(i.matrix[0].length))}),i.matrix.splice(t,0,o.concat(n)));return i};var i,r=n(0),o=n(9),a=(i=o)&&i.__esModule?i:{default:i},s=n(8)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.selectColumn=function(t){var e=[],n="number"==typeof t?t:this.matrix[0].indexOf(t);n>-1&&void 0!==this.matrix[0][n]&&(0,i.each)(this.matrix,function(t,i){e.push(t[n])});return e},e.selectRow=function(t){var e=[],n="number"==typeof t?t:this.selectColumn(0).indexOf(t);n>-1&&void 0!==this.matrix[n]&&(e=this.matrix[n]);return e};var i=n(0)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sortColumns=function(t,e){var n=this,i=this.matrix[0].slice(1),o=[],s=e||a.default.getColumnLabel;return(0,r.each)(i,function(t,e){o.push(n.selectColumn(e+1).slice(0))}),o.sort(function(e,i){var r=s.call(n,e)>s.call(n,i);return r?"asc"===t?1:-1:r?0:"asc"===t?-1:1}),(0,r.each)(o,function(t,e){n.deleteColumn(e+1).insertColumn(e+1,t[0],t.slice(1))}),n},e.sortRows=function(t,e){var n=this,i=this.matrix.slice(0,1),r=this.matrix.slice(1),o=e||a.default.getRowIndex;return r.sort(function(e,i){var r=o.call(n,e)>o.call(n,i);return r?"asc"===t?1:-1:r?0:"asc"===t?-1:1}),n.data(i.concat(r)),n};var i,r=n(0),o=n(13),a=(i=o)&&i.__esModule?i:{default:i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.updateColumn=function(t,e){var n=this,i="number"==typeof t?t:this.matrix[0].indexOf(t);i>-1&&("function"==typeof e?(0,r.each)(n.data(),function(t,r){var o;r>0&&void 0!==(o=e.call(n,t[i],r,t))&&(n.matrix[r][i]=o)}):(!e||e instanceof Array)&&((e=e||[]).length<=n.data().length-1?e=e.concat((0,a.default)(n.data().length-1-e.length)):(0,r.each)(e,function(t,i){n.matrix.length-1<e.length&&s.appendRow.call(n,String(n.matrix.length))}),(0,r.each)(e,function(t,e){n.matrix[e+1][i]=t})));return n},e.updateRow=function(t,e){var n=this,i="number"==typeof t?t:this.selectColumn(0).indexOf(t);i>-1&&("function"==typeof e?(0,r.each)(n.data()[i],function(t,r){var o=n.selectColumn(r),a=e.call(n,t,r,o);void 0!==a&&(n.matrix[i][r]=a)}):(!e||e instanceof Array)&&((e=e||[]).length<=n.matrix[0].length-1?e=e.concat((0,a.default)(n.matrix[0].length-1-e.length)):(0,r.each)(e,function(t,i){n.matrix[0].length-1<e.length&&s.appendColumn.call(n,String(n.matrix[0].length))}),(0,r.each)(e,function(t,e){n.matrix[i][e+1]=t})));return n};var i,r=n(0),o=n(9),a=(i=o)&&i.__esModule?i:{default:i},s=n(8)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return s=t,function(t){var e=Array.prototype.slice.call(arguments,1);if(l[t])return l[t].apply(this,e);throw"Requested parser does not exist"}};var i=n(0),r=n(14),o=n(30),a=n(31),s=void 0;var l={metric:function(){return function(t){return(new s).set(["Value","Result"],t.result).type("metric")}},interval:function(){var t=Array.prototype.slice.call(arguments);return function(e){var n=(new s).type("interval");return(0,i.each)(e.result,function(e,i){var r=t[0]&&"timeframe.end"===t[0]?e.timeframe.end:e.timeframe.start;n.set(["Result",r],e.value)}),n}},"grouped-metric":function(){return function(t){var e=(new s).type("grouped-metric");return(0,i.each)(t.result,function(t,n){var r;(0,i.each)(t,function(t,e){"result"!==e&&(r=e)}),e.set(["Result",String(t[r])],t.result)}),e}},"grouped-interval":function(){var t=Array.prototype.slice.call(arguments);return function(e){var n=(new s).type("grouped-interval");return(0,i.each)(e.result,function(e,r){var o=t[0]&&"timeframe.end"===t[0]?e.timeframe.end:e.timeframe.start;e.value.length?(0,i.each)(e.value,function(t,e){var r;(0,i.each)(t,function(t,e){"result"!==e&&(r=e)}),n.set([String(t[r]),o],t.result)}):n.appendRow(o)}),n}},"double-grouped-metric":function(){var t=Array.prototype.slice.call(arguments);if(!t[0])throw"Requested parser requires a sequential list (array) of properties to target as a second argument";return function(e){var n=(new s).type("double-grouped-metric");return(0,i.each)(e.result,function(e,i){var r=e[t[0][0]]+" "+e[t[0][1]];n.set(["Result",r],e.result)}),n}},"double-grouped-interval":function(){var t=Array.prototype.slice.call(arguments);if(!t[0])throw"Requested parser requires a sequential list (array) of properties to target as a second argument";return function(e){var n=(new s).type("double-grouped-interval");return(0,i.each)(e.result,function(e,r){var o=t[1]&&"timeframe.end"===t[1]?e.timeframe.end:e.timeframe.start;(0,i.each)(e.value,function(e,i){var r=e[t[0][0]]+" "+e[t[0][1]];n.set([r,o],e.result)})}),n}},funnel:function(){return function(t){var e,n,r;return void 0!==t.steps&&void 0!==t.result&&t.result instanceof Array?(e=t.result,n=t.steps):void 0!==t.result.steps&&void 0!==t.result.result&&t.result.result instanceof Array&&(e=t.result.result,n=t.result.steps),(r=(new s).type("funnel")).appendColumn("Step Value"),(0,i.each)(e,function(t,e){void 0!==n&&n[e]&&r.appendRow(String(n[e].event_collection),[t])}),r}},list:function(){return function(t){var e=(new s).type("list");return(0,i.each)(t.result,function(t,n){e.set(["Result",String(n+1)],t)}),e}},extraction:function(){var t=this.config;return function(e){var n=(new s).type("extraction"),i=(0,a.createExtractionKeys)(e.result),l=Array.from(i),c=t&&t.table;if(c&&"dynamic"===c.schema){var u=e.result,d={};u.forEach(function(t){var e=Object.keys((0,r.flatten)(t));e&&e.length&&e.forEach(function(t){d[t]||(d[t]=!0)})}),l=Object.keys(d)}l.forEach(function(t){n.set([t,"0"],t)}),s&&t&&t.table&&t.table.columns&&(l=t.table.columns);for(var f=0;f<e.result.length;f++){for(var p=[f+1],h=0;h<l.length;h++)p.push((0,o.valueAtDeepKey)(e.result[f],l[h]));n.matrix[String(f+1)]=p}return n.deleteColumn(0),n}},"heatmap-axis":function(){return function(t){var e=(new s).type("heatmap");return(0,i.each)(t.result,function(t,n){var i=Object.keys(t),r=t[i[0]],o=t[i[1]];e.appendRow([String(r),String(o),t.result])}),e}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.valueAtDeepKey=function t(e,n,i){return"string"==typeof n?t(e,n.split("."),i):1==n.length&&void 0!==i&&null!==e&&void 0!==e[n[0]]?e[n[0]]=i:0==n.length?e:void 0===n||void 0===e||null===n||null===e||void 0===e[n[0]]?null:t(e[n[0]],n.slice(1),i)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createExtractionKeys=function(t){var e=new Set;return t.forEach(function(t){Object.keys((0,i.flatten)(t)).map(function(t){e.add(t)})}),e};var i=n(14)},function(t){t.exports={name:"keen-dataviz",description:"Data Visualization SDK for Keen IO",license:"MIT",version:"3.15.1",main:"dist/external_d3_c3/node/keen-dataviz.js",browser:"dist/external_d3_c3/keen-dataviz.js",style:"dist/keen-dataviz.css",scripts:{start:'concurrently --kill-others "NODE_ENV=development webpack-dev-server" "npm run postcss-watch"',"postcss-watch":"node_modules/postcss-cli/bin/postcss lib/style/keen-dataviz-c3.css -o test/demo/keen-dataviz.css --watch --config postcss.config.js",build:"NODE_ENV=production webpack -p && npm run build:css && NODE_ENV=production OPTIMIZE_MINIMIZE=1 webpack -p && npm run build:css && npm run build:css:min && npm run build:external_d3_c3 && npm run build:external_d3_c3:css && npm run build:external_d3_c3:css:min && npm run build:node","build:css":"node_modules/postcss-cli/bin/postcss lib/style/keen-dataviz-c3.css -o dist/keen-dataviz.css --config postcss.config.js","build:css:min":"OPTIMIZE_MINIMIZE=1 node_modules/postcss-cli/bin/postcss lib/style/keen-dataviz-c3.css -o dist/keen-dataviz.min.css --config postcss.config.js","build:external_d3_c3:css":"node_modules/postcss-cli/bin/postcss lib/style/keen-dataviz.css -o dist/external_d3_c3/keen-dataviz.css --config postcss.config.js","build:external_d3_c3:css:min":"OPTIMIZE_MINIMIZE=1 node_modules/postcss-cli/bin/postcss lib/style/keen-dataviz.css -o dist/external_d3_c3/keen-dataviz.min.css --config postcss.config.js","build:external_d3_c3":"NODE_ENV=production EXTERNAL_D3_C3=1 webpack -p && NODE_ENV=production EXTERNAL_D3_C3=1 OPTIMIZE_MINIMIZE=1 webpack -p","build:node":"TARGET=node NODE_ENV=production EXTERNAL_D3_C3=1 webpack -p",profile:"webpack --profile --json > stats.json",analyze:"webpack-bundle-analyzer stats.json /dist",version:"npm run build && git add .",postversion:"git push && git push --tags && npm publish",test:"NODE_ENV=test jest","test:watch":"NODE_ENV=test jest --watch"},repository:{type:"git",url:"https://github.com/keen/keen-dataviz.js.git"},bugs:"https://github.com/keen/keen-dataviz.js/issues",author:"Keen.IO <team@keen.io> (https://keen.io/)",contributors:["Dustin Larimer <dustin@keen.io> (https://github.com/dustinlarimer)","Joanne Cheng <joanne@keen.io> (https://github.com/joannecheng)","Eric Anderson <eric@keen.io> (https://github.com/aroc)","Joe Wegner <joe@keen.io> (https://github.com/josephwegner)","Sara Falkoff <sara@keen.io (https://github.com/sfalkoff)","Adam Kasprowicz <adam.kasprowicz@keen.io> (https://github.com/adamkasprowicz)","Dariusz Łacheta <dariusz.lacheta@keen.io> (https://github.com/dariuszlacheta)"],homepage:"https://keen.io",keywords:["d3","c3","Analytics","Stats","Statistics","Visualization","Visualizations","Data Visualization","Chart","Charts","Charting","Svg","Dataviz","Plots","Graphs","Funnels"],dependencies:{c3:"^0.7.2",d3:"^5.11.0","dom-to-image":"^2.6.0","file-saver":"^2.0.1","promise-polyfill":"^8.0.0",rangeable:"^0.1.6"},devDependencies:{autoprefixer:"^8.2.0","babel-loader":"^7.1.4","babel-plugin-transform-es2015-modules-commonjs":"^6.26.2","babel-plugin-transform-object-rest-spread":"^6.26.0","babel-preset-env":"^1.7.0",concurrently:"^3.5.1",cssnano:"^3.10.0",eslint:"^4.19.1","eslint-config-airbnb":"^16.1.0","eslint-loader":"^2.0.0","eslint-plugin-import":"^2.11.0","eslint-plugin-jsx-a11y":"^6.0.3","eslint-plugin-react":"^7.7.0","html-loader":"^0.5.5","html-webpack-plugin":"^3.2.0",jest:"^22.4.3","jest-environment-jsdom-c3":"^2.0.0",nock:"^9.2.6",postcss:"^6.0.21","postcss-cli":"^5.0.0","postcss-color-function":"^4.0.1","postcss-css-variables":"^0.8.1","postcss-cssnext":"^2.4.0","postcss-import":"^8.0.2","postcss-loader":"^2.1.3",precss:"^3.1.2","regenerator-runtime":"^0.11.1","replace-in-file":"^3.4.0","style-loader":"^0.20.3",webpack:"^4.29.0","webpack-bundle-analyzer":"^3.3.2","webpack-cli":"^3.2.1","webpack-dev-server":"^3.3.1","xhr-mock":"^2.3.2"}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return arguments.length?t instanceof o.default?(this.dataset=t,this):function(t){var e,n,i,r,l,c,u,d,f=[];n=this.config.indexBy,i=t.metadata||{},l=void 0!==t.query?t.query:{},"funnel"===(l=(0,a.extend)({analysis_type:null,event_collection:null,filters:[],group_by:null,interval:null,timeframe:null,timezone:null},l)).analysis_type?r="funnel":"extraction"===l.analysis_type?r="extraction":"select_unique"===l.analysis_type?l.group_by||l.interval||(r="list"):l.analysis_type&&(l.group_by||l.interval?l.group_by&&!l.interval?l.group_by instanceof Array&&l.group_by.length>1?(r="double-grouped-metric",f.push(l.group_by)):r="grouped-metric":l.interval&&!l.group_by?(r="interval",f.push(n)):l.group_by&&l.interval&&(l.group_by instanceof Array&&l.group_by.length>1?(r="double-grouped-interval",f.push(l.group_by),f.push(n)):(r="grouped-interval",f.push(n))):r="metric");r||("number"==typeof t.result&&(r="metric"),t.result instanceof Array&&t.result.length>0&&(!t.result[0].timeframe||"number"!=typeof t.result[0].value&&null!=t.result[0].value||(r="interval",f.push(n)),"number"==typeof t.result[0].result&&(r="grouped-metric"),"heatmap"===this.config.type&&Object.keys(3===t.result[0]&&"number"==typeof t.result[0].result)&&(r="heatmap-axis"),t.result[0].value instanceof Array&&(r="grouped-interval",f.push(n)),"number"==typeof t.result[0]&&void 0!==t.steps&&(r="funnel",l.steps=t.steps),"string"!=typeof t.result[0]&&"number"!=typeof t.result[0]||void 0!==t.steps||(r="list"),r||(r="extraction")),r||(r="extraction"));void 0===this.config.title&&(u=i.display_name?i.display_name:function(t){var e,n=t.analysis_type?t.analysis_type.replace("_"," "):"";e=n.replace(/\b./g,function(t){return t.toUpperCase()}),t.event_collection&&(e+=" - "+t.event_collection);return e}(l),this.config.title=u);this.config.type||(d=i.visualization&&i.visualization.chart_type?i.visualization.chart_type:function(t){var e=void 0;switch(t){case"metric":e="metric";break;case"interval":e="area";break;case"grouped-metric":case"double-grouped-metric":e="bar";break;case"grouped-interval":case"double-grouped-interval":e="line";break;case"funnel":e="horizontal-bar";break;case"list":case"extraction":default:e="table"}return e}(r),this.config.type=d);c=o.default.parser.apply(this,[r].concat(f)),e=c((0,a.extend)(t,{query:l})),r.indexOf("interval")>-1&&e.updateColumn(0,function(t,e){return new Date(t)});e.updateRow(0,function(t,e){return(0,s.stripHtmlTags)(t)}),this.dataset=e,t.execution_metadata&&(this.execution_metadata=t.execution_metadata);return this}.call(this,t):this.dataset.data()};var i,r=n(12),o=(i=r)&&i.__esModule?i:{default:i},a=n(5),s=n(15)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};e.default=function(t){var e=void 0;return function(t){if("undefined"==typeof window)return;window.onresize=window.resize=function(){},window.addEventListener?window.addEventListener("resize",t,!0):window.attachEvent&&window.attachEvent("onresize",t)}(function(){e&&clearTimeout(e);var n=t.visuals.length>12?1e3:250;e=setTimeout(function(){(0,o.each)(t.visuals,function(t){var e=t.view._artifacts.c3;if(e){var n=e.element.parentNode.parentNode.offsetWidth,i=n;if(t.config.legend&&t.config.legend.show&&("left"===t.config.legend.position||"right"===t.config.legend.position)){var r=e.element.nextSibling?e.element.nextSibling.offsetWidth:0;i=n-(e.element.previousSibling?e.element.previousSibling.offsetWidth:0)-r}e.resize({width:i})}})},n)}),function(){var t={message:f.default,metric:p.default,table:h.default,spinner:v.default,funnel:new g.default,"funnel-3d":new m.default,"horizontal-funnel":new y.default,"horizontal-funnel-3d":new b.default,"metric-combo":new x.default,heatmap:new w.default,choropleth:new _.default},e=function(t,e){return parseInt(window.getComputedStyle(t)["padding"+e].replace("px",""))};return(0,o.each)(["area","area-spline","area-step","bar","donut","gauge","line","pie","step","spline","horizontal-area","horizontal-area-spline","horizontal-area-step","horizontal-bar","horizontal-line","horizontal-step","horizontal-spline"],function(n,f){t[n]={render:function(){var t=this,f=function(){var t={bindto:this.el().querySelector("."+this.config.theme+"-rendering .c3-chart"),color:{pattern:this.config.colors},data:{colors:i({},this.config.colorMapping),columns:[],type:this.config.type.replace("horizontal-","")}},n=this.el(),r=n.offsetHeight;if(r-=e(n,"Top")+e(n,"Bottom"),this.config.showTitle){var o=this.el().querySelector(".keen-dataviz-title");r-=o?o.offsetHeight:parseInt(window.getComputedStyle(this.el(),null)["font-size"].replace("px",""))}if(this.config.subtitle){var s=this.el().querySelector(".keen-dataviz-subtitle");r-=s?s.offsetHeight:parseInt(window.getComputedStyle(this.el(),null)["font-size"].replace("px",""))}if(this.config.notes){var l=this.el().querySelector(".keen-dataviz-notes");r-=l?l.offsetHeight:parseInt(window.getComputedStyle(this.el(),null)["font-size"].replace("px",""))}var c=this.el().querySelector(".c3-chart").offsetWidth-(e(n,"Left")+e(n,"Right"));c<0&&(c=0);var u={size:{width:c,height:r>0?r:void 0}};return(0,a.extendDeep)({},u,this.config,t)}.call(this),p=(0,d.calculateSumForPercents)(this.dataset.matrix);if("percent"!==f.stacking||"bar"!==n&&"horizontal-bar"!==n&&"area"!==n&&"area-step"!==n&&"area-spline"!==n||(this.dataset.matrix,this.dataset.matrix=[this.dataset.matrix[0]].concat(E((0,d.calculatePercents)(this.dataset.matrix,p))),f.sparkline||(f.axis={y:{padding:{top:0},tick:{format:function(t){return t+"%"}}}})),f.range&&(this.dataset.matrix=[this.dataset.matrix[0]].concat(E((0,u.default)(this.dataset.matrix)))),this.config.clearOnRender&&f.data.columns.length&&this.dataset&&this.dataset.meta){var h=(this.dataset.meta||{}).type,v=0;["interval"].includes(void 0===h?"":h)&&(v=1),f.data.columns.splice(v)}if(1!==this.data()[0].length&&1!==this.data().length){var g=!1;if("gauge"===n?(f.legend.show=!1,f.data.columns=[[this.config.title||this.data()[1][0],this.data()[1][1]]],g=!0):"pie"===n||"donut"===n?f.data.columns=this.data().slice(1):(n.indexOf("horizontal-")>-1&&(f.axis.rotated=n.indexOf("horizontal-")>-1),(0,s.default)(this.data()[1][0])?(f.axis.x=f.axis.x||{},f.axis.x.type="timeseries",f.axis.x.tick=f.axis.x.tick||{format:this.config.dateFormat||(0,l.default)(this.data()[1][0],this.data()[2]?this.data()[2][0]:this.data()[1][0]),culling:{max:5}},f.data.columns[0]=[],(0,o.each)(this.dataset.selectColumn(0),function(t,e){e>0&&(t=new Date(t)),f.data.columns[0][e]=t}),f.data.columns[0][0]="x",f.data.x="x",this.config.stacked&&this.data()[0].length>2&&(f.data.groups=[this.dataset.selectRow(0).slice(1)])):(f.axis.x=f.axis.x||{},f.axis.x.type="category",f.axis.x.categories=this.dataset.selectColumn(0).slice(1),this.config.stacked&&this.data()[0].length>2&&(f.data.groups=[this.dataset.selectRow(0).slice(1)])),2===this.data()[0].length&&(f.legend.show=!1,g=!0),(0,o.each)(this.data()[0],function(t,e){e>0&&f.data.columns.push(this.dataset.selectColumn(e))}.bind(this))),g){var m=this.el().querySelector(".keen-c3-legend");m&&(m.remove(),f.size.width=this.el().querySelector(".c3-chart").offsetWidth),f.legend.show=!1}if(f.partialIntervalIndicator&&f.partialIntervalIndicator.show&&["area","area-spline","area-step","line","spline","step"].indexOf(f.type)>-1){var y=f.data.columns&&f.data.columns[0];if(y&&y.length>1){var b={axis:"x",start:new Date(y[y.length-2]),class:f.partialIntervalIndicator.className};f.regions=[].concat(E(f.regions||[]),[b])}}if(f.tooltip&&!1===f.tooltip.show||!(!0===f.legend.show||f.legend&&f.legend.tooltip&&f.legend.tooltip.show)||(f.tooltip={contents:f.tooltip.contents,format:{title:this.config.tooltip.format.title,value:function(e,i,r,o){var a=function(t,e,n,i){var r=this.config.type;if(!this.view._artifacts.pagination||"gauge"===r)return t;var o=this.view._artifacts.pagination.labels;return o.indexOf(n)>-1?t:void 0}.call(t,e,i,r,o);return t.config.tooltip&&t.config.tooltip.format&&t.config.tooltip.format.value?(a=t.config.tooltip.format.value.call(t,a,i,r,o),"percent"!==f.stacking||"bar"!==n&&"horizontal-bar"!==n&&"area"!==n&&"area-step"!==n&&"area-spline"!==n||(a=parseFloat((a/100*p[o]).toFixed(2))),f.range&&"Max"===r&&(a+=t.dataset.matrix[o+1][2]),a):"percent"!==f.stacking||"bar"!==n&&"horizontal-bar"!==n&&"area"!==n&&"area-step"!==n&&"area-spline"!==n?(f.range&&"Max"===r&&(a+=t.dataset.matrix[o+1][2]),a):(a=(a/100*p[o]).toFixed(2),parseFloat(a))}}}),!0===f.legend.show){var x=i({},f);x.data.color=function(t,e){var n=this.config.type;if(this.view._artifacts.pagination&&"gauge"!==n){var i=this.view._artifacts.pagination.labels;return e.id&&i.indexOf(e.id)>-1||e&&!e.id&&i.indexOf(e)>-1?t:"donut"===n||"pie"===n?"rgba(0,0,0,.1)":"rgba(0,0,0,.07)"}return t}.bind(this),x.legend.hide=!0,this.view._artifacts.c3=r.default.generate(x),c.default.call(this,i({},f,{onLegendRendered:function(){var n=t.el().querySelector(".keen-c3-legend");n&&("top"===f.legend.position||"bottom"===f.legend.position?(x.size.height-=n.offsetHeight,t.view._artifacts.c3.resize({height:x.size.height})):(0===x.size.width&&(x.size.width=t.el().offsetWidth-e(t.el(),"Left")-e(t.el(),"Right")),x.size.width-=n.offsetWidth,t.view._artifacts.c3.resize({width:x.size.width})))},onPaginated:function(){t.view._artifacts.c3.flush()}}))}else this.view._artifacts.c3=r.default.generate(f)}else{var w="No data to display",_=this.config.errorMapping[w]||w;this.config.showErrorMessages&&this.message(_)}},update:function(){this.render()},destroy:function(){this.view._artifacts.c3&&(this.view._artifacts.c3.destroy(),this.view._artifacts.c3=null)}}}),t}()};var r=k(n(10)),o=n(0),a=(n(5),n(16)),s=k(n(11)),l=k(n(35)),c=k(n(36)),u=k(n(37)),d=n(38),f=k(n(39)),p=k(n(43)),h=k(n(44)),v=k(n(45)),g=k(n(46)),m=k(n(47)),y=k(n(48)),b=k(n(49)),x=k(n(50)),w=k(n(51)),_=k(n(52));function k(t){return t&&t.__esModule?t:{default:t}}function E(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=Math.abs(new Date(t).getTime()-new Date(e).getTime()),i=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"];return n>=24192e5?function(t){var e=new Date(t);return i[e.getMonth()]+" "+e.getFullYear()}:n>=864e5?function(t){var e=new Date(t);return i[e.getMonth()]+" "+e.getDate()}:n>=36e5?"%I:%M %p":"%I:%M:%S %p"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};e.default=function(t){var e=t.data.columns,n=this,r=this.view._artifacts.c3,o=[],s=this.el().querySelector("."+n.config.theme+"-rendering"),l=n.config.legend,c=this.view._artifacts.pagination=i({hidden:[],labels:[],offset:0,limit:Math.round((s.offsetHeight-78)/20),total:0},l.pagination);if(t.legend.sort){o=t.legend.sort(e);var u=[];"x"===e[0][0]&&u.push(e[0]),o.forEach(function(e){var n=t.data.columns.find(function(t){return t[0]===e});u.push(n)}),t.data.columns=u}else for(var d=0;d<e.length;d++)"x"===e[d][0]||(0,a.default)(e[d][1])||o.push(e[d][0]);var f=this.el().querySelector(".keen-c3-legend"),p="vertical";"top"!==l.position&&"bottom"!==l.position||(p="horizontal");var h=document.createElement("div");h.setAttribute("class","keen-c3-legend-pagination-icons keen-c3-legend-horizontal-pagination-left"),"horizontal"===p&&f.append(h);var v=document.createElement("div");v.setAttribute("class","keen-c3-legend-items keen-c3-legend-"+p+"-items"),f.append(v);var g=document.createElement("div");g.setAttribute("class","keen-c3-legend-pagination keen-c3-legend-pagination-icons"),"vertical"===p&&f.append(g);var m=document.createElement("div");function y(){c.labels=o.slice(c.offset,c.offset+c.limit),c.total=o.length,function(){v.innerHTML="",c.labels.forEach(function(e){var n=l.label.textMaxLength?e.slice(0,l.label.textMaxLength-1):e,i=document.createElement("div");i.innerHTML="<span class='legend-item-text'>"+n+"</span>",i.chartPartId=e,i.setAttribute("class","legend-item"),v.append(i);var o=document.createElement("span");o.setAttribute("class","legend-item-color-sample"),o.style.backgroundColor=r.color(i.chartPartId),i.prepend(o);var a=document.createElement("div");i.addEventListener("mouseover",function(e){r.focus(i.chartPartId),l.tooltip.show&&i.chartPartId.length>l.label.textMaxLength&&(a.setAttribute("class","keen-c3-legend-label-overlay keen-c3-legend-position-"+l.position),a.innerHTML=(t.legend.tooltip.pointer?"<div class='overlay-pointer'></div>":"")+i.chartPartId,i.append(a))}),i.addEventListener("mouseout",function(t){r.revert(),a.remove()}),i.addEventListener("click",function(t){var e=1,n=c.hidden.indexOf(i.chartPartId);n<0?(c.hidden.push(i.chartPartId),e=.35):(c.hidden.splice(n,1),e=1),i.style.opacity=e,r.toggle(i.chartPartId)})}),t.onLegendRendered&&(t.onLegendRendered(),t.onLegendRendered=null)}.call(n,c.labels),c.total>c.limit&&function(){g.innerHTML="",h.innerHTML="",m.innerHTML="";var t=document.createElement("i"),e=document.createElement("i"),n=function(t){if("forward"===t){var e=c.offset+c.limit;return e<c.total?void(c.offset=e):void(c.offset=0)}var n=c.offset-c.limit;c.offset=n>=0?n:Math.floor(c.total/c.limit)*c.limit};e.addEventListener("click",function(){n("forward"),y(),b()}),t.addEventListener("click",function(){n("backward"),y(),b()}),"left"===l.position||"right"===l.position?(t.setAttribute("class","up"),e.setAttribute("class","down"),g.append(e),g.append(t)):(t.setAttribute("class","left"),e.setAttribute("class","right"),h.append(t),m.append(e))}.call(n),t.onPaginated&&t.onPaginated()}function b(){document.selection&&document.selection.empty?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()}m.setAttribute("class","keen-c3-legend-pagination-icons keen-c3-legend-horizontal-pagination-right"),"horizontal"===p&&f.append(m),y()};!function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(n(2));var r,o=n(11),a=(r=o)&&r.__esModule?r:{default:r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.slice(1).map(function(t){return t.map(function(e,n){return"number"==typeof e&&1===n?e-t[n+1]:e})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.calculateSumForPercents=function(t){var e=[];return t.slice(1).forEach(function(t,n){t.forEach(function(t){if("number"==typeof t){if(!e[n])return e[n]=t,e[n];e[n]+=t}return e[n]})}),e},e.calculatePercents=function(t,e){return t.slice(1).map(function(t,n){return t.map(function(t){return"number"==typeof t?t/e[n]*100:t})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),r=a(n(17)),o=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}e.default={render:function(t){var e=document.createElement("div"),n=document.createElement("div"),a=document.createElement("span"),s=document.createElement("div"),l=document.createElement("div"),c=document.createElement("div");e.className=this.config.theme+" keen-dataviz-box",n.className=this.config.theme+"-message",s.className=this.config.theme+"-title",s.innerHTML=(0,i.escapeHtml)(this.config.title||""),l.className=this.config.theme+"-subtitle",l.innerHTML=(0,i.escapeHtml)(this.config.subtitle||""),c.className=this.config.theme+"-notes",c.innerHTML=(0,i.escapeHtml)(this.config.notes||""),a.innerHTML=(0,i.escapeHtml)(t)||"",n.appendChild(a),this.config.title&&this.config.showTitle&&e.appendChild(s),this.config.subtitle&&e.appendChild(l),e.appendChild(n),this.config.notes&&e.appendChild(c),this.config.ui&&this.config.ui.buttons&&this.config.ui.buttons.download&&this.config.ui.buttons.download.type&&(0,r.default)({element:this.el(),data:(0,i.escapeHtml)(t)||"",type:this.config.ui.buttons.download.type,label:this.config.ui.buttons.download.label}),this.config.utils&&this.config.utils.clickToCopyToClipboard&&(s.addEventListener("click",function(t){return(0,o.default)(t.target.innerText,t)}),c.addEventListener("click",function(t){return(0,o.default)(t.target.innerText,t)}),a.addEventListener("click",function(t){return(0,o.default)(t.target.innerText,t)})),this.el().innerHTML="",this.el().appendChild(e)},update:function(){this.render()},destroy:function(){}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.event,n=t.type,o=t.data;e.preventDefault();var a=n.toLowerCase();if(!["json","csv","jpg","jpeg","png"].includes(n))throw new Error("This type is not supported");if("png"===a)return void(0,i.default)({node:e.currentTarget.previousElementSibling});if("jpg"===a||"jpeg"===a)return void(0,i.default)({node:e.currentTarget.previousElementSibling,quality:1,bgcolor:"#fff"});"json"===a&&(0,r.default)({type:a,data:o});"csv"===a&&(0,r.default)({type:a,data:o})};var i=o(n(18)),r=o(n(19));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){!function(e){"use strict";var n=function(){return{escape:function(t){return t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:e,mimeType:function(t){var n=e(t).toLowerCase();return(i="application/font-woff",{woff:i,woff2:i,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"})[n]||"";var i},dataAsUrl:function(t,e){return"data:"+e+";base64,"+t},isDataUrl:function(t){return-1!==t.search(/^(data:)/)},canvasToBlob:function(t){return t.toBlob?new Promise(function(e){t.toBlob(e)}):function(t){return new Promise(function(e){for(var n=window.atob(t.toDataURL().split(",")[1]),i=n.length,r=new Uint8Array(i),o=0;o<i;o++)r[o]=n.charCodeAt(o);e(new Blob([r],{type:"image/png"}))})}(t)},resolveUrl:function(t,e){var n=document.implementation.createHTMLDocument(),i=n.createElement("base");n.head.appendChild(i);var r=n.createElement("a");return n.body.appendChild(r),i.href=e,r.href=t,r.href},getAndEncode:function(t){var e=3e4;s.impl.options.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime());return new Promise(function(n){var i,r=new XMLHttpRequest;if(r.onreadystatechange=function(){if(4!==r.readyState)return;if(200!==r.status)return void(i?n(i):a("cannot fetch resource: "+t+", status: "+r.status));var e=new FileReader;e.onloadend=function(){var t=e.result.split(/,/)[1];n(t)},e.readAsDataURL(r.response)},r.ontimeout=function(){i?n(i):a("timeout of "+e+"ms occured while fetching resource: "+t)},r.responseType="blob",r.timeout=e,r.open("GET",t,!0),r.send(),s.impl.options.imagePlaceholder){var o=s.impl.options.imagePlaceholder.split(/,/);o&&o[1]&&(i=o[1])}function a(t){console.error(t),n("")}})},uid:(t=0,function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+t++}),delay:function(t){return function(e){return new Promise(function(n){setTimeout(function(){n(e)},t)})}},asArray:function(t){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e},escapeXhtml:function(t){return t.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(t){return new Promise(function(e,n){var i=new Image;i.onload=function(){e(i)},i.onerror=n,i.src=t})},width:function(t){var e=n(t,"border-left-width"),i=n(t,"border-right-width");return t.scrollWidth+e+i},height:function(t){var e=n(t,"border-top-width"),i=n(t,"border-bottom-width");return t.scrollHeight+e+i}};var t;function e(t){var e=/\.([^\.\/]*?)$/g.exec(t);return e?e[1]:""}function n(t,e){var n=window.getComputedStyle(t).getPropertyValue(e);return parseFloat(n.replace("px",""))}}(),i=function(){var t=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(t,n,o){return e(t)?Promise.resolve(t).then(i).then(function(e){var i=Promise.resolve(t);return e.forEach(function(t){i=i.then(function(e){return r(e,t,n,o)})}),i}):Promise.resolve(t)},shouldProcess:e,impl:{readUrls:i,inline:r}};function e(e){return-1!==e.search(t)}function i(e){for(var i,r=[];null!==(i=t.exec(e));)r.push(i[1]);return r.filter(function(t){return!n.isDataUrl(t)})}function r(t,e,i,r){return Promise.resolve(e).then(function(t){return i?n.resolveUrl(t,i):t}).then(r||n.getAndEncode).then(function(t){return n.dataAsUrl(t,n.mimeType(e))}).then(function(i){return t.replace(function(t){return new RegExp("(url\\(['\"]?)("+n.escape(t)+")(['\"]?\\))","g")}(e),"$1"+i+"$3")})}}(),r=function(){return{resolveAll:function(){return t(document).then(function(t){return Promise.all(t.map(function(t){return t.resolve()}))}).then(function(t){return t.join("\n")})},impl:{readAll:t}};function t(){return Promise.resolve(n.asArray(document.styleSheets)).then(function(t){var e=[];return t.forEach(function(t){try{n.asArray(t.cssRules||[]).forEach(e.push.bind(e))}catch(e){console.log("Error while reading CSS rules from "+t.href,e.toString())}}),e}).then(function(t){return t.filter(function(t){return t.type===CSSRule.FONT_FACE_RULE}).filter(function(t){return i.shouldProcess(t.style.getPropertyValue("src"))})}).then(function(e){return e.map(t)});function t(t){return{resolve:function(){var e=(t.parentStyleSheet||{}).href;return i.inlineAll(t.cssText,e)},src:function(){return t.style.getPropertyValue("src")}}}}}(),o=function(){return{inlineAll:function e(r){if(!(r instanceof Element))return Promise.resolve(r);return function(t){var e=t.style.getPropertyValue("background");return e?i.inlineAll(e).then(function(e){t.style.setProperty("background",e,t.style.getPropertyPriority("background"))}).then(function(){return t}):Promise.resolve(t)}(r).then(function(){return r instanceof HTMLImageElement?t(r).inline():Promise.all(n.asArray(r.childNodes).map(function(t){return e(t)}))})},impl:{newImage:t}};function t(t){return{inline:function(e){return n.isDataUrl(t.src)?Promise.resolve():Promise.resolve(t.src).then(e||n.getAndEncode).then(function(e){return n.dataAsUrl(e,n.mimeType(t.src))}).then(function(e){return new Promise(function(n,i){t.onload=n,t.onerror=i,t.src=e})})}}}}(),a={imagePlaceholder:void 0,cacheBust:!1},s={toSvg:l,toPng:function(t,e){return c(t,e||{}).then(function(t){return t.toDataURL()})},toJpeg:function(t,e){return c(t,e=e||{}).then(function(t){return t.toDataURL("image/jpeg",e.quality||1)})},toBlob:function(t,e){return c(t,e||{}).then(n.canvasToBlob)},toPixelData:function(t,e){return c(t,e||{}).then(function(e){return e.getContext("2d").getImageData(0,0,n.width(t),n.height(t)).data})},impl:{fontFaces:r,images:o,util:n,inliner:i,options:{}}};function l(t,e){return function(t){void 0===t.imagePlaceholder?s.impl.options.imagePlaceholder=a.imagePlaceholder:s.impl.options.imagePlaceholder=t.imagePlaceholder;void 0===t.cacheBust?s.impl.options.cacheBust=a.cacheBust:s.impl.options.cacheBust=t.cacheBust}(e=e||{}),Promise.resolve(t).then(function(t){return function(t,e,i){if(!i&&e&&!e(t))return Promise.resolve();return Promise.resolve(t).then(function(t){return t instanceof HTMLCanvasElement?n.makeImage(t.toDataURL()):t.cloneNode(!1)}).then(function(i){return function(t,e,i){var r=t.childNodes;return 0===r.length?Promise.resolve(e):function(t,e,n){var i=Promise.resolve();return e.forEach(function(e){i=i.then(function(){return u(e,n)}).then(function(e){e&&t.appendChild(e)})}),i}(e,n.asArray(r),i).then(function(){return e})}(t,i,e)}).then(function(e){return function(t,e){return e instanceof Element?Promise.resolve().then(function(){var i,r;i=window.getComputedStyle(t),r=e.style,i.cssText?r.cssText=i.cssText:function(t,e){n.asArray(t).forEach(function(n){e.setProperty(n,t.getPropertyValue(n),t.getPropertyPriority(n))})}(i,r)}).then(function(){[":before",":after"].forEach(function(i){!function(i){var r=window.getComputedStyle(t,i),o=r.getPropertyValue("content");if(""!==o&&"none"!==o){var a=n.uid();e.className=e.className+" "+a;var s=document.createElement("style");s.appendChild(function(t,e,i){var r="."+t+":"+e,o=i.cssText?function(t){var e=t.getPropertyValue("content");return t.cssText+" content: "+e+";"}(i):function(t){return n.asArray(t).map(function(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")}).join("; ")+";"}(i);return document.createTextNode(r+"{"+o+"}")}(a,i,r)),e.appendChild(s)}}(i)})}).then(function(){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value),t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}).then(function(){e instanceof SVGElement&&(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e instanceof SVGRectElement&&["width","height"].forEach(function(t){var n=e.getAttribute(t);n&&e.style.setProperty(t,n)}))}).then(function(){return e}):e}(t,e)})}(t,e.filter,!0)}).then(d).then(f).then(function(t){e.bgcolor&&(t.style.backgroundColor=e.bgcolor);e.width&&(t.style.width=e.width+"px");e.height&&(t.style.height=e.height+"px");e.style&&Object.keys(e.style).forEach(function(n){t.style[n]=e.style[n]});return t}).then(function(i){return function(t,e,i){return Promise.resolve(t).then(function(t){return t.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(t)}).then(n.escapeXhtml).then(function(t){return'<foreignObject x="0" y="0" width="100%" height="100%">'+t+"</foreignObject>"}).then(function(t){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+i+'">'+t+"</svg>"}).then(function(t){return"data:image/svg+xml;charset=utf-8,"+t})}(i,e.width||n.width(t),e.height||n.height(t))})}function c(t,e){return l(t,e).then(n.makeImage).then(n.delay(100)).then(function(i){var r=function(t){var i=document.createElement("canvas");if(i.width=e.width||n.width(t),i.height=e.height||n.height(t),e.bgcolor){var r=i.getContext("2d");r.fillStyle=e.bgcolor,r.fillRect(0,0,i.width,i.height)}return i}(t);return r.getContext("2d").drawImage(i,0,0),r})}function u(t,e,i){if(!i&&e&&!e(t))return Promise.resolve();return Promise.resolve(t).then(r).then(function(n){return o(t,n,e)}).then(function(e){return a(t,e)});function r(t){return t instanceof HTMLCanvasElement?n.makeImage(t.toDataURL()):t.cloneNode(!1)}function o(t,e,i){var r=t.childNodes;return 0===r.length?Promise.resolve(e):function(t,e,n){var i=Promise.resolve();return e.forEach(function(e){i=i.then(function(){return u(e,n)}).then(function(e){e&&t.appendChild(e)})}),i}(e,n.asArray(r),i).then(function(){return e});function o(t,e,n){var i=Promise.resolve();return e.forEach(function(e){i=i.then(function(){return u(e,n)}).then(function(e){e&&t.appendChild(e)})}),i}}function a(t,e){return e instanceof Element?Promise.resolve().then(function(){!function(t,e){t.cssText?e.cssText=t.cssText:function(t,e){n.asArray(t).forEach(function(n){e.setProperty(n,t.getPropertyValue(n),t.getPropertyPriority(n))})}(t,e)}(window.getComputedStyle(t),e.style)}).then(function(){[":before",":after"].forEach(function(i){!function(i){var r=window.getComputedStyle(t,i),o=r.getPropertyValue("content");if(""===o||"none"===o)return;var a=n.uid();e.className=e.className+" "+a;var s=document.createElement("style");s.appendChild(function(t,e,i){var r="."+t+":"+e,o=i.cssText?function(t){var e=t.getPropertyValue("content");return t.cssText+" content: "+e+";"}(i):function(t){return n.asArray(t).map(function(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")}).join("; ")+";"}(i);return document.createTextNode(r+"{"+o+"}")}(a,i,r)),e.appendChild(s)}(i)})}).then(function(){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value);t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}).then(function(){if(!(e instanceof SVGElement))return;if(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),!(e instanceof SVGRectElement))return;["width","height"].forEach(function(t){var n=e.getAttribute(t);n&&e.style.setProperty(t,n)})}).then(function(){return e}):e;function i(){function i(t,e){if(t.cssText)e.cssText=t.cssText;else i(t,e);function i(t,e){n.asArray(t).forEach(function(n){e.setProperty(n,t.getPropertyValue(n),t.getPropertyPriority(n))})}}i(window.getComputedStyle(t),e.style)}function r(){function i(i){var r=window.getComputedStyle(t,i),o=r.getPropertyValue("content");if(o===""||o==="none")return;var a=n.uid();e.className=e.className+" "+a;var s=document.createElement("style");function l(t,e,i){var r="."+t+":"+e,o=i.cssText?a(i):s(i);return document.createTextNode(r+"{"+o+"}");function a(t){var e=t.getPropertyValue("content");return t.cssText+" content: "+e+";"}function s(t){return n.asArray(t).map(e).join("; ")+";";function e(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")}}}s.appendChild(l(a,i,r)),e.appendChild(s)}[":before",":after"].forEach(function(t){i(t)})}function o(){if(t instanceof HTMLTextAreaElement)e.innerHTML=t.value;if(t instanceof HTMLInputElement)e.setAttribute("value",t.value)}function a(){if(!(e instanceof SVGElement))return;if(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),!(e instanceof SVGRectElement))return;["width","height"].forEach(function(t){var n=e.getAttribute(t);if(!n)return;e.style.setProperty(t,n)})}}}function d(t){return r.resolveAll().then(function(e){var n=document.createElement("style");return t.appendChild(n),n.appendChild(document.createTextNode(e)),t})}function f(t){return o.inlineAll(t).then(function(){return t})}t.exports=s}()},function(t,e,n){(function(n){var i,r,o;r=[],void 0===(o="function"==typeof(i=function(){"use strict";function e(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){a(i.response,e,n)},i.onerror=function(){console.error("could not download file")},i.send()}function i(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function r(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,a=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(t,n,a){var s=o.URL||o.webkitURL,l=document.createElement("a");n=n||t.name||"download",l.download=n,l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?r(l):i(l.href)?e(t,n,a):r(l,l.target="_blank")):(l.href=s.createObjectURL(t),setTimeout(function(){s.revokeObjectURL(l.href)},4e4),setTimeout(function(){r(l)},0))}:"msSaveOrOpenBlob"in navigator?function(t,n,o){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,o),n);else if(i(t))e(t,n,o);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout(function(){r(a)})}}:function(t,n,i,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,i);var a="application/octet-stream"===t.type,s=/constructor/i.test(o.HTMLElement)||o.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&s)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var t=c.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},c.readAsDataURL(t)}else{var u=o.URL||o.webkitURL,d=u.createObjectURL(t);r?r.location=d:location.href=d,r=null,setTimeout(function(){u.revokeObjectURL(d)},4e4)}});o.saveAs=a.saveAs=a,t.exports=a})?i.apply(e,r):i)||(t.exports=o)}).call(this,n(7))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(3),o=n(4),a=n(1),s=(i=a)&&i.__esModule?i:{default:i};e.default={render:function(){var t=this.config.colors[0],e=this.config.theme,n=this.config.title,i=this.config.subtitle,a=this.config,l="-",c="",u="",d="",f="",p=void 0,h="",v="",g="",m="",y=this.config,b=y.results,x=y.previousResults,w=y.isExtraction,_=y.comparedProp;if(b&&x&&(h=x?" metric-comparison":"",m=x&&n?"-smaller":"",g=(v=b.result-x.result)>0?"-green":"-red",v=Math.abs(v),t=""),this.data()&&this.data()[1]&&this.data()[1][1]&&"number"==typeof this.data()[1][1]&&(l=this.data()[1][1]),w&&_){var k=function(t,e){var n=t.query,i=t.result,r=[];if("extraction"!==n.analysis_type)throw new Error("Analysis type is not an extraction!");return Array.isArray(i)&&i.forEach(function(t){var i=e.split(".").reduce(function(t,e){return t&&t[e]||null},t),o={query:n,result:i};r.push(o)}),r}(b,_);l=k[0].result,h=(c=k[1].result)?" metric-comparison":"",m=c&&n?"-smaller":"",g=(v=l-c)>0?"-green":"-red",v=Math.abs(v),t=""}if(p=l,void 0!==a.prettyNumber&&!0!==a.prettyNumber||isNaN(parseInt(l))||(p=(0,r.prettyNumber)(l),b&&x&&(v=(0,r.prettyNumber)(v))),a.prefix&&(d='<span class="'+e+'-metric-prefix">'+a.prefix+"</span>"),a.suffix&&(f='<span class="'+e+'-metric-suffix">'+a.suffix+"</span>"),u+='<div class="'+e+'">',u+='<div class="'+e+"-metric keen-dataviz-box"+h+'" title="'+(0,o.escapeHtml)(l)+'" style="background-color:'+t+'">',b&&x&&(u+='<div class="'+e+"-metric"+g+'"><div class="arrow'+g+'"> </div>'+(0,o.escapeHtml)(v)+"</div>"),w&&_&&(l&&c?(u+='<div class="'+e+"-metric"+g+'"><div class="arrow'+g+'"> </div>'+(0,o.escapeHtml)(v)+"</div>",u+="<small>"+c+"</small>"):u+="<p>No data to display</p>"),u+='<div class="'+e+"-metric-value"+m+'">'+d+(0,o.escapeHtml)(p)+f+"</div>",n&&(u+='<div class="'+e+'-metric-title">'+(0,o.escapeHtml)(n)+"</div>"),i&&(u+='<div class="'+e+'-metric-subtitle">'+(0,o.escapeHtml)(i)+"</div>"),u+="</div>",u+="</div>",this.el().innerHTML=u,this.config.onrendered&&this.config.onrendered(),this.config.utils&&this.config.utils.clickToCopyToClipboard){var E="."+e+"-metric-value"+m;if(document.querySelector(E).addEventListener("click",function(t){return(0,s.default)(t.target.innerText,t)}),b&&x){var M="."+e+"-metric"+g;document.querySelector(M).addEventListener("click",function(t){return(0,s.default)(t.target.innerText,t)})}}},update:function(){this.render()},destroy:function(){}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=n(4),s=n(1),l=(i=s)&&i.__esModule?i:{default:i};var c=void 0;function u(t,e){var n="",i={};t.config.table&&t.config.table.pagination&&(i=t.config.table.pagination);var s=o({},{page:1,limit:0,arrows:!0},i);c||(c=s.page);var l=void 0,u=0;if(0===s.limit)l=e.slice(1);else{var d=s.limit*(c-1)+1,f=d+s.limit;l=e.slice(d,f),u=Math.ceil((e.length-1)/s.limit)}var p=t.config.table.columns?t.config.table.columns:t.dataset.matrix[0],h={},v=t.config.table,g=v.mapValues,m=v.mapDates;for(var y in g)h[p.indexOf(y)]=y;var b=!0,x=!1,w=void 0;try{for(var _,k=l[Symbol.iterator]();!(b=(_=k.next()).done);b=!0){var E=_.value;n+='<tr class="table-data-row">';var M=!0,A=!1,S=void 0;try{for(var P,j=E.entries()[Symbol.iterator]();!(M=(P=j.next()).done);M=!0){var C=P.value,O=r(C,2),T=O[0],z=O[1];m&&z instanceof Date&&(z=m(z));var L=(0,a.escapeHtml)(z);h[T]?n+="<td>"+g[h[T]](L)+"</td>":n+="<td>"+L+"</td>"}}catch(t){A=!0,S=t}finally{try{!M&&j.return&&j.return()}finally{if(A)throw S}}n+="</tr>"}}catch(t){x=!0,w=t}finally{try{!b&&k.return&&k.return()}finally{if(x)throw w}}if(u>1){n+='<tr class="table-pagination"><td colspan="999">';var D=1,N=1===c?1:c-1,I=c===u?u:c+1;for(s.arrows&&(n+='<a class="arrow btn" data-page="'+N+'">&laquo;</a>');D<=u;)n+='<a class="btn '+(D===c?"active":"")+'" data-page="'+D+'">'+D+"</a>",D++;s.arrows&&(n+='<a class="arrow btn" data-page="'+I+'">&raquo;</a>'),n+="</td></tr>"}return n}e.default={render:function(){var t=this,e=this.dataset.matrix,n=this.el(),i=this.config.theme,r=this,o="";if(1===e.length&&0===e[0].length){var s="No data to display",d=this.config.errorMapping[s]||s;this.config.showErrorMessages&&this.message(d)}else{o+='<div class="'+i+'-table">',o+='<table class="'+i+'-table-dataset">',o+="<thead>",o+="<tr>",o+=function(t,e){var n="",i=-1,r=t.config.table,o=r&&r.columns||e[0],s=!0,l=!1,c=void 0;try{for(var u,d=o[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var f=u.value,p=(0,a.escapeHtml)(f);n+='<th fieldNumber="'+(i+=1)+'">'+p+"</th>"}}catch(t){l=!0,c=t}finally{try{!s&&d.return&&d.return()}finally{if(l)throw c}}return n}(r,e),o+="</tr>",o+="</thead>",o+="<tbody>",o+=u(r,e),o+="</tbody>",o+="</table>",o+="</div>",n.querySelector("."+i+"-rendering").innerHTML=o,n.querySelectorAll("."+i+"-rendering th").forEach(function(o){o.addEventListener("click",function(o){var a=o.target.getAttribute("order")||"asc",s=o.target.getAttribute("fieldNumber");a="asc"===a?"desc":"asc",o.target.setAttribute("order",a);var l=t.dataset.matrix.shift();t.dataset.matrix.sort(function(t,e){var n="asc"===a?1:-1;if("string"==typeof t[s]){var i=t[s].toUpperCase(),r=e[s].toUpperCase();return i<r?-1*n:i>r?1*n:0}return(t[s]-e[s])*n}),t.dataset.matrix.unshift(l),n.querySelector("."+i+"-rendering tbody").innerHTML=u(r,e),f()})});var f=function t(){n.querySelectorAll(".btn").forEach(function(o){o.addEventListener("click",function(o){c=parseInt(o.target.getAttribute("data-page")),n.querySelector("."+i+"-rendering tbody").innerHTML=u(r,e),t()},!0)})};if(f(r,n,i),this.config.onrendered&&this.config.onrendered(),this.config.utils&&this.config.utils.clickToCopyToClipboard){var p="."+i+"-table-dataset";document.querySelector(p).addEventListener("click",function(t){var e=t.target,n=e.nodeName,i=e.innerText;"TD"===n&&(0,l.default)(i,t)})}}},update:function(){this.render()},destroy:function(){}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={render:function(){var t="";this.view._artifacts.spinner={};t+='<div class="'+this.config.theme+'">',t+='<div class="keen-spinner-container keen-dataviz-box">',t+='<div class="keen-spinner-indicator"></div>',t+="</div>",t+="</div>",this.el().innerHTML=t},update:function(){this.render()},destroy:function(){if(this.view._artifacts.spinner){this.view._artifacts.spinner.interval&&clearInterval(this.view._artifacts.spinner.interval),this.view._artifacts.spinner.radius=0;try{delete this.view._artifacts.spinner}catch(t){this.view._artifacts.spinner=void 0}}this.el().innerHTML=""}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2)),a=n(6),s=n(3),l=n(1),c=(i=l)&&i.__esModule?i:{default:i};var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,[{key:"render",value:function(){var t=this.dataset.matrix,e=this.config,n=e.colors,i=e.container,r=e.labelMapping,l=e.colorMapping,u=e.utils,d=this.config,f=this.config.funnel,p=f.percents,h=p.show,v=p.countingMethod,g=p.decimals,m=f.lines,y=f.marginBetweenSteps,b=f.resultValues,x=f.hover,w=f.minimalSize,_=20,k=30,E=30,M=200,A=0;y&&(A=5);var S=o.select(i),P=o.select(this.el().querySelector("."+this.config.theme+"-rendering .c3-chart")).append("svg"),j=S.style("width").slice(0,-2)-k-M,C=S.style("height").slice(0,-2)-_-E-30,O=C/(t.length-1),T=j,z=100..toFixed(g),L=0;w&&(L=(j-w)/(t.length-2));var D=t.slice(1).map(function(e,n){var i=[{x:(j-T)/2,y:O*n+A},{x:(j-T)/2+T,y:O*n+A}];0!==n&&("relative"===v&&(w?T-=L:T=T*e[1]/t[n][1],z=(e[1]/t[n][1]*100).toFixed(g)),"absolute"===v&&(w?T-=L:T=j*e[1]/t[1][1],z=(e[1]/t[1][1]*100).toFixed(g)));var o=e[0];if(Object.keys(r).length)for(var a in r)r[a]===e[0]&&(o=a);var l=e[1];return void 0!==d.prettyNumber&&!0!==d.prettyNumber||isNaN(parseInt(e[1]))||(l=(0,s.prettyNumber)(e[1])),{name:e[0],label:o,percent:z+"%",result:l,points:[].concat(i,[{x:(j-T)/2+T,y:O*(n+1)},{x:(j-T)/2,y:O*(n+1)}])}});if(P.attr("preserveAspectRatio","xMidYMid slice").attr("viewBox","0 0 "+(j+M+k)+" "+(C+_+E-30)).attr("height","100%").attr("width","100%").append("g").attr("transform","translate("+M+","+_+")").selectAll("polygon").data(D).enter().append("polygon").attr("points",function(t){return t.points.map(function(t){return[t.x,t.y].join(",")}).join(" ")}).style("fill",function(t,e){return l[t.label]?l[t.label]:n[e]}).attr("class",function(t){return t.label}).attr("cursor","pointer"),m&&(P.selectAll("line").data(D).enter().append("line").attr("x1",10).attr("y1",function(t){return t.points[0].y+_-A/2}).attr("x2",function(t){return t.points[1].x+M}).attr("y2",function(t){return t.points[0].y+_-A/2}).attr("class","chart-lines"),P.append("line").attr("x1",10).attr("y1",D[D.length-1].points[2].y+_+A/2).attr("x2",D[D.length-1].points[2].x+M).attr("y2",D[D.length-1].points[2].y+_+A/2).attr("class","chart-lines")),m&&P.selectAll("text.label").data(D).enter().append("text").style("text-anchor","start").attr("x",20).attr("y",function(t){return(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+A+5}).attr("class",function(t){return"text-label "+t.label}).text(function(t){return t.name}).call(a.textWrap,M).attr("cursor","pointer"),m||P.selectAll("text.label").data(D).enter().append("text").style("text-anchor","end").attr("x",function(t){return t.points[0].x+(t.points[3].x-t.points[0].x)/2+.9*M}).attr("y",function(t){return(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+A+5}).attr("class",function(t){return"text-label "+t.label}).text(function(t){return t.name}).call(a.textWrap,M).attr("cursor","pointer"),h&&!b&&P.selectAll("text.label").data(D).enter().append("text").style("text-anchor","middle").attr("x",j/2+M).attr("y",function(t){return(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+A+8}).attr("class",function(t){return"text-main "+t.label}).text(function(t){return t.percent}).attr("cursor","pointer"),b&&!h&&P.selectAll("text.label").data(D).enter().append("text").style("text-anchor","middle").attr("x",j/2+M).attr("y",function(t){return(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+A+8}).attr("class",function(t){return"text-main "+t.label}).text(function(t){return t.result}).attr("cursor","pointer"),h&&b&&(P.selectAll("text.label").data(D).enter().append("text").style("text-anchor","middle").attr("x",j/2+M).attr("y",function(t){return 0===A?(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+16:(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+A+12}).attr("class",function(t){return"text-second "+t.label}).text(function(t){return t.percent}).attr("cursor","pointer"),P.selectAll("text.label").data(D).enter().append("text").style("text-anchor","middle").attr("x",j/2+M).attr("y",function(t){return 0===A?(t.points[2].y-t.points[1].y)/2+t.points[1].y+_:(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+A-5}).attr("class",function(t){return"text-main "+t.label}).text(function(t){return t.result}).attr("cursor","pointer")),x){var N=function(t){R.style("opacity",.5),H.style("opacity",.5);var e=/[^ ]*$/.exec(o.select(this).attr("class"))[0];P.selectAll("."+e).style("opacity",1)},I=function(t){R.style("opacity",1),H.style("opacity",1)},R=P.selectAll("polygon");R.on("mouseover",N).on("mouseout",I);var H=P.selectAll("text");H.on("mouseover",N).on("mouseout",I)}if(u&&u.clickToCopyToClipboard){P.selectAll("text").on("click",function(t){var e=t.percent,n=t.result;b?(0,c.default)(n,o.event):h&&(0,c.default)(e,o.event)})}}},{key:"update",value:function(){this.destroy(),this.render()}},{key:"destroy",value:function(){o.select(this.el().querySelector("."+this.config.theme+"-rendering .c3-chart")).remove()}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2)),a=n(6),s=n(3),l=n(1),c=(i=l)&&i.__esModule?i:{default:i};var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,[{key:"render",value:function(){var t=this.dataset.matrix,e=this.config,n=e.colors,i=e.container,r=e.labelMapping,l=e.colorMapping,u=e.utils,d=this.config,f=this.config.funnel,p=f.percents,h=p.show,v=p.countingMethod,g=p.decimals,m=f.lines,y=f.resultValues,b=f.effect3d,x=f.hover,w=f.minimalSize,_=20,k=30,E=60,M=200,A=o.select(i),S=o.select(this.el().querySelector("."+this.config.theme+"-rendering .c3-chart")).append("svg"),P=A.style("width").slice(0,-2)-k-M,j=A.style("height").slice(0,-2)-_-E-30,C=j/(t.length-1),O=.3*C,T=2.5*O,z=P,L=100..toFixed(g),D=0;w&&(D=(P-w)/(t.length-2));var N=t.slice(1).map(function(e,n){var i=[{x:(P-z)/2,y:C*n+O},{x:(P-z)/2+z,y:C*n+O}];0!==n&&("relative"===v&&(w?z-=D:z=z*e[1]/t[n][1],L=(e[1]/t[n][1]*100).toFixed(g)),"absolute"===v&&(w?z-=D:z=P*e[1]/t[1][1],L=(e[1]/t[1][1]*100).toFixed(g)));var o=e[0];if(Object.keys(r).length)for(var a in r)r[a]===e[0]&&(o=a);var l=e[1];return void 0!==d.prettyNumber&&!0!==d.prettyNumber||isNaN(parseInt(e[1]))||(l=(0,s.prettyNumber)(e[1])),{name:e[0],label:o,percent:L+"%",result:l,points:[].concat(i,[{x:(P-z)/2+z,y:C*(n+1)},{x:(P-z)/2,y:C*(n+1)}])}}),I=N.map(function(t,e){return{label:t.label,points:[{x:t.points[3].x,y:t.points[3].y},{x:t.points[2].x,y:t.points[2].y},{x:"left"===b?t.points[2].x:t.points[2].x-T<P/2?P/2+5:t.points[2].x-T,y:"left"===b?t.points[2].y:t.points[2].y+O/1.5},{x:"right"===b?t.points[3].x:t.points[3].x+T>P/2?P/2-5:t.points[3].x+T,y:"right"===b?t.points[3].y:t.points[3].y+O/1.5}]}}),R=N.concat(I);if(S.attr("preserveAspectRatio","xMidYMid meet").attr("viewBox","0 0 "+(P+M+k)+" "+(j+_+E-30)).attr("height","100%").attr("width","100%").append("g").attr("transform","translate("+M+","+_+")").selectAll("polygon").data(R).enter().append("polygon").attr("points",function(t){return t.points.map(function(t){return[t.x,t.y].join(",")}).join(" ")}).style("fill",function(t,e){return e>N.length-1?l[t.label]?o.rgb(l[t.label]).darker(1.5):o.rgb(n[e-N.length]).darker(1.5):l[t.label]?l[t.label]:n[e]}).attr("class",function(t){return t.label}).attr("cursor","pointer"),m&&(S.selectAll("line").data(N).enter().append("line").attr("x1",10).attr("y1",function(t){return t.points[0].y+_-O/5}).attr("x2",function(t,e){return 0===e?t.points[1].x+M:t.points[1].x+M-T}).attr("y2",function(t){return t.points[0].y+_-O/5}).attr("class","chart-lines"),S.append("line").attr("x1",10).attr("y1",N[N.length-1].points[2].y+_+O-O/5).attr("x2",N[N.length-1].points[2].x+M-T).attr("y2",N[N.length-1].points[2].y+_+O-O/5).attr("class","chart-lines")),m&&S.selectAll("text.label").data(N).enter().append("text").style("text-anchor","start").attr("x",20).attr("y",function(t){return(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+5+O/4}).attr("class",function(t){return"text-label "+t.label}).text(function(t){return t.name}).call(a.textWrap,M).attr("cursor","pointer"),m||S.selectAll("text.label").data(N).enter().append("text").style("text-anchor","end").attr("x",function(t){return t.points[0].x+(t.points[3].x-t.points[0].x)/2+130}).attr("y",function(t){return(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+5}).attr("class",function(t){return"text-label "+t.label}).text(function(t){return t.name}).call(a.textWrap,M).attr("cursor","pointer"),h&&!y&&S.selectAll("text.label").data(N).enter().append("text").style("text-anchor","middle").attr("x",P/2+M).attr("y",function(t){return(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+8}).attr("class",function(t){return"text-main "+t.label}).text(function(t){return t.percent}).attr("cursor","pointer"),y&&!h&&S.selectAll("text.label").data(N).enter().append("text").style("text-anchor","middle").attr("x",P/2+M).attr("y",function(t){return(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+8}).attr("class",function(t){return"text-main "+t.label}).text(function(t){return t.result}).attr("cursor","pointer"),h&&y&&(S.selectAll("text.label").data(N).enter().append("text").style("text-anchor","middle").attr("x",P/2+M).attr("y",function(t){return(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+18}).attr("class",function(t){return"text-second "+t.label}).text(function(t){return t.percent}).attr("cursor","pointer"),S.selectAll("text.label").data(N).enter().append("text").style("text-anchor","middle").attr("x",P/2+M).attr("y",function(t){return(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+3}).attr("class",function(t){return"text-main "+t.label}).text(function(t){return t.result}).attr("cursor","pointer")),x){var H=function(t){F.style("opacity",.5),V.style("opacity",.5);var e=/[^ ]*$/.exec(o.select(this).attr("class"))[0];S.selectAll("."+e).style("opacity",1)},q=function(t){F.style("opacity",1),V.style("opacity",1)},F=S.selectAll("polygon");F.on("mouseover",H).on("mouseout",q);var V=S.selectAll("text");V.on("mouseover",H).on("mouseout",q)}if(u&&u.clickToCopyToClipboard){S.selectAll("text").on("click",function(t){var e=t.percent,n=t.result;y?(0,c.default)(n,o.event):h&&(0,c.default)(e,o.event)})}}},{key:"update",value:function(){this.destroy(),this.render()}},{key:"destroy",value:function(){o.select(this.el().querySelector("."+this.config.theme+"-rendering .c3-chart")).remove()}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2)),a=n(6),s=n(3),l=n(1),c=(i=l)&&i.__esModule?i:{default:i};var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,[{key:"render",value:function(){var t=this.dataset.matrix,e=this.config,n=e.colors,i=e.container,r=e.labelMapping,l=e.colorMapping,u=e.utils,d=this.config,f=this.config.funnel,p=f.percents,h=p.show,v=p.countingMethod,g=p.decimals,m=f.lines,y=f.marginBetweenSteps,b=f.resultValues,x=f.hover,w=f.minimalSize,_=20,k=30,E=100,M=10,A=0;y&&(A=5);var S=o.select(i),P=o.select(this.el().querySelector("."+this.config.theme+"-rendering .c3-chart")).append("svg"),j=S.style("width").slice(0,-2)-k-M,C=S.style("height").slice(0,-2)-_-E-30,O=j/(t.length-1),T=C,z=100..toFixed(g),L=0;w&&(L=(C-w)/(t.length-2));var D=t.slice(1).map(function(e,n){var i=[{x:O*n+A,y:(C-T)/2},{x:O*n+A,y:(C-T)/2+T}];0!==n&&("relative"===v&&(w?T-=L:T=T*e[1]/t[n][1],z=(e[1]/t[n][1]*100).toFixed(g)),"absolute"===v&&(w?T-=L:T=C*e[1]/t[1][1],z=(e[1]/t[1][1]*100).toFixed(g)));var o=e[0];if(Object.keys(r).length)for(var a in r)r[a]===e[0]&&(o=a);var l=e[1];return void 0!==d.prettyNumber&&!0!==d.prettyNumber||isNaN(parseInt(e[1]))||(l=(0,s.prettyNumber)(e[1])),{name:e[0],label:o,percent:z+"%",result:l,points:[].concat(i,[{x:O*(n+1),y:(C-T)/2+T},{x:O*(n+1),y:(C-T)/2}])}});if(P.attr("preserveAspectRatio","xMidYMid meet").attr("viewBox","0 0 "+(j+M+k)+" "+(C+_+E-30)).attr("height","100%").attr("width","100%").append("g").attr("transform","translate("+M+","+_+")").selectAll("polygon").data(D).enter().append("polygon").attr("points",function(t){return t.points.map(function(t){return[t.x,t.y].join(",")}).join(" ")}).style("fill",function(t,e){return l[t.label]?l[t.label]:n[e]}).attr("class",function(t){return t.label}).attr("cursor","pointer"),m&&(P.selectAll("line").data(D).enter().append("line").attr("x1",function(t){return t.points[0].x+M-A/2}).attr("y1",C+E).attr("x2",function(t){return t.points[0].x+M-A/2}).attr("y2",function(t){return t.points[0].y+_}).attr("class","chart-lines"),P.append("line").attr("x1",j+M-A/2).attr("y1",C+E).attr("x2",D[D.length-1].points[3].x+M+A/2).attr("y2",D[D.length-1].points[3].y+_).attr("class","chart-lines")),m&&P.selectAll("text.label").data(D).enter().append("text").style("text-anchor","middle").attr("x",function(t){return t.points[1].x+O/2+M}).attr("y",C+.5*E+_).attr("class",function(t){return"text-label "+t.label}).text(function(t){return t.name}).call(a.textWrap,O).attr("cursor","pointer"),m||P.selectAll("text.label").data(D).enter().append("text").style("text-anchor","middle").attr("x",function(t){return t.points[1].x+O/2+M}).attr("y",function(t){return t.points[2].y+(t.points[3].y-t.points[0].y)/2+O/4>C+E-40+_?C+E-40+_:t.points[2].y+(t.points[3].y-t.points[0].y)/2+O/4+_}).attr("class",function(t){return"text-label "+t.label}).text(function(t){return t.name}).call(a.textWrap,O).attr("cursor","pointer"),h&&!b&&P.selectAll("text.label").data(D).enter().append("text").style("text-anchor","middle").attr("x",function(t){return t.points[1].x+O/2+M}).attr("y",C/2+_+10).attr("class",function(t){return"text-main "+t.label}).text(function(t){return t.percent}).attr("cursor","pointer"),b&&!h&&P.selectAll("text.label").data(D).enter().append("text").style("text-anchor","middle").attr("x",function(t){return t.points[1].x+O/2+M}).attr("y",C/2+_+10).attr("class",function(t){return"text-main "+t.label}).text(function(t){return t.result}).attr("cursor","pointer"),h&&b&&(P.selectAll("text.label").data(D).enter().append("text").style("text-anchor","middle").attr("x",function(t){return t.points[1].x+O/2+M}).attr("y",C/2+_+16).attr("class",function(t){return"text-second "+t.label}).text(function(t){return t.percent}).attr("cursor","pointer"),P.selectAll("text.label").data(D).enter().append("text").style("text-anchor","middle").attr("x",function(t){return t.points[1].x+O/2+M}).attr("y",C/2+_-3).attr("class",function(t){return"text-main "+t.label}).text(function(t){return t.result}).attr("cursor","pointer")),x){var N=function(t){R.style("opacity",.5),H.style("opacity",.5);var e=/[^ ]*$/.exec(o.select(this).attr("class"))[0];P.selectAll("."+e).style("opacity",1)},I=function(t){R.style("opacity",1),H.style("opacity",1)},R=P.selectAll("polygon");R.on("mouseover",N).on("mouseout",I);var H=P.selectAll("text");H.on("mouseover",N).on("mouseout",I)}if(u&&u.clickToCopyToClipboard){P.selectAll("text").on("click",function(t){var e=t.percent,n=t.result;b?(0,c.default)(n,o.event):h&&(0,c.default)(e,o.event)})}}},{key:"update",value:function(){this.destroy(),this.render()}},{key:"destroy",value:function(){o.select(this.el().querySelector("."+this.config.theme+"-rendering .c3-chart")).remove()}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2)),a=n(6),s=n(3),l=n(1),c=(i=l)&&i.__esModule?i:{default:i};var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,[{key:"render",value:function(){var t=this.dataset.matrix,e=this.config,n=e.colors,i=e.container,r=e.labelMapping,l=e.colorMapping,u=e.utils,d=this.config,f=this.config.funnel,p=f.percents,h=p.show,v=p.countingMethod,g=p.decimals,m=f.lines,y=f.resultValues,b=f.effect3d,x=f.hover,w=f.minimalSize,_=20,k=30,E=100,M=10,A=o.select(i),S=o.select(this.el().querySelector("."+this.config.theme+"-rendering .c3-chart")).append("svg"),P=A.style("width").slice(0,-2)-k-M,j=A.style("height").slice(0,-2)-_-E-30,C=P/(t.length-1),O=.3*C,T=O/1.5,z=j,L=100..toFixed(g),D=0;w&&(D=(j-w)/(t.length-2));var N=t.slice(1).map(function(e,n){var i=[{x:C*n+O,y:(j-z)/2},{x:C*n+O,y:(j-z)/2+z}];0!==n&&("relative"===v&&(w?z-=D:z=z*e[1]/t[n][1],L=(e[1]/t[n][1]*100).toFixed(g)),"absolute"===v&&(w?z-=D:z=j*e[1]/t[1][1],L=(e[1]/t[1][1]*100).toFixed(g)));var o=e[0];if(Object.keys(r).length)for(var a in r)r[a]===e[0]&&(o=a);var l=e[1];return void 0!==d.prettyNumber&&!0!==d.prettyNumber||isNaN(parseInt(e[1]))||(l=(0,s.prettyNumber)(e[1])),{name:e[0],label:o,percent:L+"%",result:l,points:[].concat(i,[{x:C*(n+1),y:(j-z)/2+z},{x:C*(n+1),y:(j-z)/2}])}}),I=N.map(function(t,e){return{label:t.label,points:[{x:t.points[0].x,y:t.points[0].y},{x:t.points[1].x,y:t.points[1].y},{x:"top"===b?t.points[1].x:t.points[1].x-T,y:"top"===b?t.points[1].y:t.points[1].y-O<j/2?j/2+5:t.points[1].y-O},{x:"bottom"===b?t.points[0].x:t.points[0].x-T,y:"bottom"===b?t.points[0].y:t.points[0].y+O>j/2?j/2-5:t.points[0].y+O}]}}),R=N.concat(I);if(S.attr("preserveAspectRatio","xMidYMid meet").attr("viewBox","0 0 "+(P+M+k)+" "+(j+_+E-30)).attr("height","100%").attr("width","100%").append("g").attr("transform","translate("+M+","+_+")").selectAll("polygon").data(R).enter().append("polygon").attr("points",function(t){return t.points.map(function(t){return[t.x,t.y].join(",")}).join(" ")}).style("fill",function(t,e){return e>N.length-1?l[t.label]?o.rgb(l[t.label]).darker(1.5):o.rgb(n[e-N.length]).darker(1.5):l[t.label]?l[t.label]:n[e]}).attr("class",function(t){return t.label}).attr("cursor","pointer"),m&&(S.selectAll("line").data(N).enter().append("line").attr("x1",function(t){return t.points[0].x+M-.8*O}).attr("y1",j+E).attr("x2",function(t){return t.points[0].x+M-.8*O}).attr("y2",function(t){return t.points[0].y+_}).attr("class","chart-lines"),S.append("line").attr("x1",P+M+O/4).attr("y1",j+E).attr("x2",N[N.length-1].points[3].x+M+O/4).attr("y2",N[N.length-1].points[3].y+_).attr("class","chart-lines")),m&&S.selectAll("text.label").data(N).enter().append("text").style("text-anchor","middle").attr("x",function(t){return t.points[0].x+M+.25*C}).attr("y",j+.4*E+_).attr("class",function(t){return"text-label "+t.label}).text(function(t){return t.name}).call(a.textWrap,C).attr("cursor","pointer"),m||S.selectAll("text.label").data(N).enter().append("text").style("text-anchor","middle").attr("x",function(t){return t.points[0].x+M+.25*C}).attr("y",function(t){return t.points[2].y+C/4>j+E-40?j+E-40+_:t.points[2].y+C/4<t.points[1].y?t.points[1].y+20+_:t.points[2].y+C/4+10+_}).attr("class",function(t){return"text-label "+t.label}).text(function(t){return t.name}).call(a.textWrap,C).attr("cursor","pointer"),h&&!y&&S.selectAll("text.label").data(N).enter().append("text").style("text-anchor","middle").attr("x",function(t){return t.points[1].x+C/2.8+M}).attr("y",j/2+_+10).attr("class",function(t){return"text-main "+t.label}).text(function(t){return t.percent}).attr("cursor","pointer"),y&&!h&&S.selectAll("text.label").data(N).enter().append("text").style("text-anchor","middle").attr("x",function(t){return t.points[1].x+C/2.8+M}).attr("y",j/2+_+10).attr("class",function(t){return"text-main "+t.label}).text(function(t){return t.result}).attr("cursor","pointer"),h&&y&&(S.selectAll("text.label").data(N).enter().append("text").style("text-anchor","middle").attr("x",function(t){return t.points[1].x+C/2.8+M}).attr("y",j/2+_+16).attr("class",function(t){return"text-second "+t.label}).text(function(t){return t.percent}).attr("cursor","pointer"),S.selectAll("text.label").data(N).enter().append("text").style("text-anchor","middle").attr("x",function(t){return t.points[1].x+C/2.8+M}).attr("y",j/2+_-3).attr("class",function(t){return"text-main "+t.label}).text(function(t){return t.result}).attr("cursor","pointer")),x){var H=function(t){F.style("opacity",.5),V.style("opacity",.5);var e=/[^ ]*$/.exec(o.select(this).attr("class"))[0];S.selectAll("."+e).style("opacity",1)},q=function(t){F.style("opacity",1),V.style("opacity",1)},F=S.selectAll("polygon");F.on("mouseover",H).on("mouseout",q);var V=S.selectAll("text");V.on("mouseover",H).on("mouseout",q)}if(u&&u.clickToCopyToClipboard){S.selectAll("text").on("click",function(t){var e=t.percent,n=t.result;y?(0,c.default)(n,o.event):h&&(0,c.default)(e,o.event)})}}},{key:"update",value:function(){this.destroy(),this.render()}},{key:"destroy",value:function(){o.select(this.el().querySelector("."+this.config.theme+"-rendering .c3-chart")).remove()}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=l(n(10)),o=n(0),a=n(3),s=l(n(1));function l(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"render",value:function(){var t=this,e=this.config,n=e.container,i=e.metricResults,l=e.title,c=e.showTitle,u=e.subtitle,d=e.tooltip,f=e.utils,p=[];p[0]=[],(0,o.each)(this.dataset.selectColumn(0),function(t,e){var n=void 0;e>0&&(n=new Date(t)),p[0][e]=n}),p[0][0]="x",(0,o.each)(this.data()[0],function(e,n){n>0&&p.push(t.dataset.selectColumn(n))});var h=i&&i.previous&&i.previous.result||0,v=(i&&i.current&&i.current.result||0)-h,g=0===h?"-":(0,a.prettyNumber)(Math.round(v/h*100)),m="keen-dataviz-metric-green",y="arrow-green";g<0&&(m="keen-dataviz-metric-red",y="arrow-red");var b=c&&l?'<div class="keen-dataviz-title">'+l+"</div>":"",x=u?'<div class="keen-dataviz-subtitle">'+u+"</div>":"",w=document.querySelector(n);w.innerHTML='\n      <div class="keen-dataviz">\n        <div class="keen-dataviz-metric-combo">\n          <div class="metric-combo-data">\n            '+b+"\n            "+x+'\n            <div class="percent-difference '+m+'"><div class="'+y+'"></div> '+g+' %</div>\n            <div class="current-count '+m+'"> '+(0,a.prettyNumber)(v)+' </div>\n          </div>\n          <div class="keen-dataviz-rendering">\n            <div class="c3-chart"></div>\n          </div>\n        </div>\n      </div>';var _=w.querySelector(".c3-chart");r.default.generate({bindto:_,color:{pattern:["#c3c4cc"]},title:l,legend:{show:!1},data:{x:"x",columns:p,type:"area-spline",selection:{draggable:!1,enabled:!0,multiple:!0}},point:{r:0,focus:{expand:{r:5,enabled:!0}},select:{r:5,enabled:!0}},axis:{y:{show:!1},x:{show:!1}},grid:{x:{show:!1},y:{show:!1}},padding:{left:0,right:0,top:0,bottom:-4},tooltip:d});if(f&&f.clickToCopyToClipboard){var k=document.querySelector(".current-count").innerText;document.querySelector(".keen-dataviz-metric-combo").addEventListener("click",function(t){return(0,s.default)(k,t)})}}},{key:"update",value:function(){this.destroy(),this.render()}},{key:"destroy",value:function(){var t=this.config.container;document.querySelector(t).querySelector(".c3-chart").remove()}}]),t}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2)),a=l(n(20)),s=l(n(1));function l(t){return t&&t.__esModule?t:{default:t}}function c(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,[{key:"render",value:function(){var t,e,n,r=this.config,l=r.colors,u=r.container,d=r.heatmap,f=d.showSlider,p=d.simpleTooltip,h=this.dataset,v=h.matrix,g=h.meta,m=10,y=10,b=50,x=50,w=o.select(u),_=parseInt(w.style("width"),10)||600,k=parseInt(w.style("height"),10)||600,E=this.el().querySelector(".c3-chart"),M=_-y-x,A=k-m-b,S=new Set,P=new Set,j=(t=o.timeFormat("%B %d"),e=o.timeFormat("%H:%M"),n=[],v.forEach(function(i){if("heatmap"===g.type){if("number"==typeof i[0][2]){var r={x:i[0][0],y:i[0][1],value:i[0][2]};n.push(r)}}else{var o=Date.parse(i[0]);if(!isNaN(o)){var a={x:t(new Date(i[0])),y:e(new Date(i[0])),value:i[1]};n.push(a)}}}),n);j.forEach(function(t){S.add(t.x),P.add(t.y)});var C=j[0].value,O=j.reduce(function(t,e){return e.value<t?e.value:t},C),T=j.reduce(function(t,e){return e.value>t?e.value:t},C),z=function(){var t=l[0],e=o.rgb("#00BBDE");return o.color(t)&&(e=o.rgb(t)),e},L=o.scaleLinear().domain([0,o.max(j,function(t){return t.value})]).range([0,1]),D=function(t){var e=L(t),n=z(),i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[255,255,255],n=t[3];return[Math.floor((1-n)*e[0]+n*t[0]+.5),Math.floor((1-n)*e[1]+n*t[1]+.5),Math.floor((1-n)*e[2]+n*t[2]+.5)]}([n.r,n.g,n.b,e]);return"rgb("+i[0]+", "+i[1]+", "+i[2]+")"},N=o.select(E).append("svg").attr("preserveAspectRatio","xMidYMid slice").attr("viewBox","0 0 "+_+" "+k).attr("height","100%").attr("width","100%").append("g").attr("transform","translate("+x+","+m+")");if(f){o.select(u).append("input").attr("type","range").attr("class","keen-dataviz-slider"),new a.default(".keen-dataviz-slider",{multiple:!0,min:O,max:T,value:[O,T],onChange:function(t){return function(t){var e=N.selectAll("rect"),n=i(t,2),r=n[0],a=n[1];e.each(function(t,e,n){o.select(n[e]).style("visibility",function(){return t.value>a||t.value<r?"hidden":"visible"})})}(t)}});var I=u.className?"."+u.className.replace(/\s/g,"."):u,R="\n        "+I+" .rangeable-progress,\n        "+I+" .rangeable-tooltip,\n        "+I+" .active {\n          background-color: "+z()+";\n        }\n        "+I+" .rangeable-tooltip::before {\n          border-color: "+z()+" transparent transparent;\n        }\n        "+I+" .rangeable-handle {\n          border-color: "+z()+";\n        }\n      ",H=document.createElement("style");H.innerHTML=R;var q=document.querySelector("script");q.parentNode.insertBefore(H,q)}var F=function(t,e){return Math.floor(e/t)+1},V=o.scaleBand().range([0,M]).domain([].concat(c(S))).padding(.02);N.append("g").style("font-size",12).attr("transform","translate(0, "+A+")").call(o.axisBottom(V).tickSize(0)).selectAll("text").attr("dy","1em").filter(function(t,e){return e%F(5,S.size)}).style("display","none");var B=o.scaleBand().range([A,0]).domain([].concat(c(P)).sort()).padding(.02);N.append("g").style("font-size",12).call(o.axisLeft(B).tickSize(0)).selectAll("text").filter(function(t,e){return e%F(10,P.size)}).style("display","none");var U=o.select(u).append("div").attr("class","keen-dataviz-tooltip").style("opacity",0).style("background-color","white").style("border","2px solid "+z().toString()).style("font-size","14px").style("padding","2px 8px").style("box-shadow","2px 2px 4px rgba(0,0,0,0.25").style("display","none").style("position","fixed");N.selectAll().data(j,function(t){return t.x+":"+t.y}).enter().append("rect").attr("x",function(t){return V(t.x)}).attr("y",function(t){return B(t.y)}).attr("width",V.bandwidth()).attr("height",B.bandwidth()).style("fill",function(t){return D(t.value)}).style("cursor","pointer").on("mouseover",function(){o.select(o.event.target).raise().style("transition","transform 150ms ease-out").style("outline","1px solid "+z()).style("transform","translate(0px, -4px)"),U.style("opacity",1).style("display","block")}).on("mousemove",function(t){var e='\n      <tr>\n        <th style="text-align: right">value:</th>\n        <td><b style="font-size:14px;">'+t.value+"</b></td>\n      </tr>";p||(e='\n        <tr>\n            <th style="text-align: right">xAxis:</th>\n            <td>'+t.x+'</td>\n        </tr>\n        <tr>\n            <th style="text-align: right">yAxis:</th>\n            <td>'+t.y+"</td>\n        </tr>\n        "+e+"\n        "),U.html('\n          <table style="font-size:12px;">\n            '+e+"\n          </table>\n        ").style("left",o.event.clientX+10+"px").style("top",o.event.clientY+10+"px")}).on("mouseleave",function(){o.select(o.event.target).style("outline","none").style("transform","none"),U.style("opacity",0).style("display","none")}).on("click",function(t){return(0,s.default)(t.value)})}},{key:"update",value:function(){this.destroy(),this.render()}},{key:"destroy",value:function(){this.el().querySelector(".c3-chart").remove()}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2)),s=u(n(20)),l=n(3),c=u(n(1));function u(t){return t&&t.__esModule?t:{default:t}}var d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return o(t,[{key:"render",value:function(){var t=this.dataset.matrix,e=this.config,n=e.colors,o=e.container,u=e.utils,d=e.title,f=e.choropleth,p=f.map,h=f.borders,v=h.show,g=h.size,m=h.color,y=f.showSlider,b=this.config,x=a.select(o),w=a.select(this.el().querySelector("."+this.config.theme+"-rendering .c3-chart")),_=Number(x.style("width").slice(0,-2)),k=Number(x.style("height").slice(0,-2)),E=0;d&&(E+=31),y&&(E+=20);var M=w.append("svg").attr("width",_).attr("height",k-E),A=t.slice(1).map(function(t){return t[1]}),S=a.min(A),P=a.max(A);S===P&&(S=0);var j=a.hsl(n[0]).brighter(1);j.l=.95;var C=n[0],O=a.scaleLinear().domain([void 0===S?0:S,void 0===P?0:P]).range([j,C]);a.json("https://cdn.jsdelivr.net/npm/keen-dataviz-maps@1.0.0/maps/"+p+".json").then(function(e){var d=a.zoom().scaleExtent([1,5]).translateExtent([[0,0],[_,k-50]]).on("zoom",function(){M.selectAll("."+C).attr("transform",a.event.transform)}),f=void 0;switch(p){case"world":f=a.geoMercator().fitSize([_,k-50],e);break;case"us":f=a.geoAlbersUsa().scale(_).fitSize([_,k-50],e);break;default:f=a.geoMercator().scale(_).fitSize([_,k-50],e)}var h=a.geoPath().projection(f),x=e.features.map(function(e){var n=t.filter(function(t){return t[0]===e.properties.name});return n[0]?r({},e,{properties:r({},e.properties,{result:n[0][1]})}):r({},e,{properties:r({},e.properties,{result:0})})});if(y){w.style("display","flex").style("flex-direction","column").style("justify-content","center"),w.append("div").style("width","95%").style("margin","auto").append("input").attr("id","rangeSlider");new s.default("#rangeSlider",{type:"double",tooltips:!0,min:0,max:P,onChange:function(t){return function(t){var e=M.selectAll("."+C),n=i(t,2),r=n[0],o=n[1];e.each(function(t,e,n){a.select(n[e]).style("visibility",function(){return t.properties.result>o||t.properties.result<r?"hidden":"visible"})})}(t)}});var E=o.className?"."+o.className.replace(/\s/g,"."):o,A="\n        "+E+" .rangeable-progress,\n        "+E+" .rangeable-tooltip,\n        "+E+" .active {\n          background-color: "+n[0]+";\n        }\n        "+E+" .rangeable-tooltip::before {\n          border-color: "+n[0]+" transparent transparent;\n        }\n        "+E+" .rangeable-handle {\n          border-color: "+n[0]+";\n        }\n      ",S=document.createElement("style");S.innerHTML=A;var j=document.querySelector("script");j.parentNode.insertBefore(S,j)}var C="world"===p?"country":"state";M.selectAll("path").data(x).enter().append("path").attr("d",h).attr("class",C).attr("id",function(t){return""+t.properties.name.split(" ").join("-").split(".").join("")}).style("fill",function(t){return O(t.properties.result)}).attr("cursor","pointer").on("mouseover",function(t){M.select("#"+t.properties.name.split(" ").join("-").split(".").join("")).style("fill",function(t){return O(1.2*P)}).style("stroke-width",1.5*g),T.style("opacity",1).style("display","block")}).on("mousemove",function(t){var e=t.properties.result;void 0!==b.prettyNumber&&!0!==b.prettyNumber||isNaN(parseInt(t.properties.result))||(e=(0,l.prettyNumber)(t.properties.result));T.html('\n          <table class="c3-tooltip">\n            <tr>\n              <th colspan="2">'+t.properties.name+'</th>\n            </tr>\n            <tr class="c3-tooltip-name-1">\n              <td class="value">'+e+"</td>\n            </tr>\n          </table>\n        ").style("left",a.event.clientX+10+"px").style("top",a.event.clientY+10+"px")}).on("mouseout",function(t){M.select("#"+t.properties.name.split(" ").join("-").split(".").join("")).style("fill",function(t){return O(t.properties.result)}).style("stroke-width",g),T.style("opacity",0).style("display","none")}),v&&M.selectAll("."+C).style("stroke",m).style("stroke-width",g);var T=a.select(".c3-chart").append("div").style("opacity",0).attr("class","c3-tooltip-container").style("display","none").style("position","fixed");if(u&&u.clickToCopyToClipboard){M.selectAll("."+C).on("click",function(t){var e=t.properties.result;(0,c.default)(e,a.event)})}M.call(d),M.call(d).on("mousedown.zoom",null)})}},{key:"update",value:function(){this.destroy(),this.render()}},{key:"destroy",value:function(){a.select(this.el().querySelector("."+this.config.theme+"-rendering .c3-chart")).remove()}}]),t}();e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.element,n=t.data,i=document.createElement("dl");i.classList="keen-dataviz-execution-meta",Object.keys(n).length?Object.keys(n).forEach(function(t){var e=document.createElement("dt");e.innerText=t.replace(/_/g," "),e.addEventListener("click",function(t){return s(t)});var r=document.createElement("dd");r.innerText=n[t],r.addEventListener("click",function(t){return s(t)}),i.append(e),i.append(r)}):i.innerText="No execution metadata available";e.append(i)};var i,r=n(1),o=(i=r)&&i.__esModule?i:{default:i};function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"copied",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;setTimeout(function(){t.classList.remove(e)},n)}function s(t){var e=t.target,n=t.target.nodeName,i=void 0;"DD"===n&&(i=e.innerText,e.classList.contains("copied")||(e.classList.add("copied"),a(e))),"DT"===n&&(i=e.nextSibling.innerText,e.nextSibling.classList.contains("copied")||(e.nextSibling.classList.add("copied"),a(e.nextSibling))),(0,o.default)(i)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(55)),r=a(n(56)),o=a(n(57));function a(t){return t&&t.__esModule?t:{default:t}}e.default={autocollector:i.default,modern:r.default,dracula:o.default}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={colors:["#5E77FF","#9C60FE","#F162FE","#FD65B7","#FD6768","#FDB86A","#F2FC6C","#A5FC6E","#71FB85","#73FBD0","#76DDFA","#76f4fa","#bb76fa","#fa76bf"]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={colors:["#45B2E8","#D9540D","#2CAB72","#2C4BAB","#EDDD02","#E84545","#E845CE","#5FCEC9","#E89F45","#28E43F","#B765C0","#458AE8","#AB2C2C","#AB2C75","#27E5FF","#7168F2","#FF932B","#855D00","#ACE845","#1C91B4"]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={colors:["#8be9fd","#50fa7b","#ffb86c","#ff79c6","#bd93f9","#ff5555","#f1fa8c"]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,r){for(var o=void 0,a=void 0,s=this.config.tooltip_format_name||function(t){return t},l=this.config.tooltip_format_title||e,c=this.config.tooltip_format_value||n,u=0;u<t.length;u++)if(t[u]&&(t[u].value||0===t[u].value)){o||(a=l?l(t[u].x):t[u].x,o="<table class='"+this.CLASS.tooltip+"'>"+(a||0===a?"<tr><th colspan='2'>"+(0,i.escapeHtml)(a)+"</th></tr>":""));var d=s(t[u].name),f=c(t[u].value,t[u].ratio,t[u].id,t[u].index),p=this.levelColor?this.levelColor(t[u].value):r(t[u].id);f&&!isNaN(f)&&(o+="<tr class='"+this.CLASS.tooltipName+"-"+t[u].id+"'>",-1===d.indexOf("__tooltip_ignore_name_field__")&&(o+="<td class='name'><span style='background-color:"+p+"'></span>"+(0,i.escapeHtml)(d)+"</td>"),o+="<td class='value'>"+(0,i.escapeHtml)(f)+"</td>",o+="</tr>")}return o+"</table>"};var i=n(4)}])});
//# sourceMappingURL=keen-dataviz.min.js.map