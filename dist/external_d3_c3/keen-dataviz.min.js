!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("d3"),require("c3"));else if("function"==typeof define&&define.amd)define(["d3","c3"],e);else{var n="object"==typeof exports?e(require("d3"),require("c3")):e(t.d3,t.c3);for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(window,function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=18)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.each=function(t,e,n){var r;if(!t)return 0;if(n=n||t,t instanceof Array){for(r=0;r<t.length;r++)if(!1===e.call(n,t[r],r,t))return 0}else for(r in t)if(t.hasOwnProperty(r)&&!1===e.call(n,t[r],r,t))return 0;return 1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=document.createElement("input");if(n.value=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),e){var r=document.createElement("div");r.style.padding="5px 10px",r.style.backgroundColor="#ffffff",r.style.fontSize="12px",r.style.position="absolute",r.style.top=e.pageY+"px",r.style.left=e.pageX+10+"px",r.style.zIndex="999",r.style.opacity=1,r.style.transition="opacity 1s ease",r.innerText="copied!",document.body.appendChild(r),document.addEventListener("mousemove",function(t){return function(t,e){e.style.opacity=0,e.style.top=t.pageY+"px",e.style.left=t.pageX+10+"px"}(t,r)}),setTimeout(function(){r.style.opacity=1,document.body.removeChild(r)},1e3)}}},function(e,n){e.exports=t},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prettyNumber=function(t){var e=(t=Number(t)).toPrecision(3),n="",r=["","k","M","B","T"];if(Number(e)==t&&String(t).length<=4)return String(t);if(Math.abs(t)>=1e15)return e;return t>=1||t<=-1?(t<0&&(t=-t,n="-"),n+function t(e,n){var e=String(e);var i=e.split(".");if(i.length>1){e=i[0];var o=i[1];2==e.length&&o.length>0?o.length>0?e=e+"."+o.charAt(0):e+="0":1==e.length&&o.length>0&&(e=e+"."+o.charAt(0),o.length>1?e+=o.charAt(1):e+="0")}var a=e.length;e.split(".").length>1&&a--;return a<=3?String(e)+r[n]:t(Number(e)/1e3,n+1)}(t,0)):t.toPrecision(3)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.escapeHtml=function(t){var e,n=""+t,i=r.exec(n);if(!i)return n;var o="",a=0,s=0;for(a=i.index;a<n.length;a++){switch(n.charCodeAt(a)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#39;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}s!==a&&(o+=n.substring(s,a)),s=a+1,o+=e}return s!==a?o+n.substring(s,a):o};var r=/["'&<>]/},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extend=function(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])t[n]=arguments[e][n];return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.textWrap=function(t,e){t.each(function(){for(var t=r.select(this),n=t.text().split(/\s+/).reverse(),i=void 0,o=[],a=0,s=t.attr("x"),l=t.attr("y"),c=t.text(null).append("tspan").attr("x",s).attr("y",l).attr("dy","0em");i=n.pop();)o.push(i),c.text(o.join(" ")),c.node().getComputedTextLength()>e&&(o.pop(),c.text(o.join(" ")),o=[i],c=t.append("tspan").attr("x",s).attr("y",l).attr("dy",1.1*++a+0+"em").text(i))})};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.appendColumn=s,e.appendRow=l;var r,i=n(8),o=(r=i)&&r.__esModule?r:{default:r},a=n(0);function s(t,e){var n=this,r=(Array.prototype.slice.call(arguments,2),void 0!==t?t:null);return"function"==typeof e?(n.matrix[0].push(r),(0,a.each)(n.matrix,function(t,r){var i=void 0;r>0&&(void 0===(i=e.call(n,t,r))&&(i=null),n.matrix[r].push(i))})):(!e||e instanceof Array)&&((e=e||[]).length<=n.matrix.length-1?e=e.concat((0,o.default)(n.matrix.length-1-e.length)):(0,a.each)(e,function(t,r){n.matrix.length-1<e.length&&l.call(n,String(n.matrix.length))}),n.matrix[0].push(r),(0,a.each)(e,function(t,e){n.matrix[e+1][n.matrix[0].length-1]=t})),n}function l(t,e){var n=this,r=(Array.prototype.slice.call(arguments,2),void 0!==t?t:null),i=[];return i.push(r),"function"==typeof e?((0,a.each)(n.matrix[0],function(t,r){var o=void 0,a=void 0;r>0&&(o=n.selectColumn(r),void 0===(a=e.call(n,o,r))&&(a=null),i.push(a))}),n.matrix.push(i)):(!e||e instanceof Array)&&((e=e||[]).length<=n.matrix[0].length-1?e=e.concat((0,o.default)(n.matrix[0].length-1-e.length)):(0,a.each)(e,function(t,r){n.matrix[0].length-1<e.length&&s.call(n,String(n.matrix[0].length))}),n.matrix.push(i.concat(e))),n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){for(var e=[],n=0;n<t;n++)e.push(null);return e}},function(t,n){t.exports=e},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t){return null!==t&&"function"==typeof t.getTime&&!isNaN(t.getTime())}function o(t){return/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z)?$/i.test(t)}e.testObject=i,e.testString=o,e.default=function(t){return"object"===(void 0===t?"undefined":r(t))?i(t):"string"==typeof t&&o(t)}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Dataset=void 0;var r=h(n(7)),i=h(n(20)),o=h(n(21)),a=h(n(22)),s=h(n(23)),l=h(n(24)),c=h(n(25)),u=p(n(13)),f=n(5),d=p(n(26));function p(t){return t&&t.__esModule?t:{default:t}}function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var g=e.Dataset=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this instanceof t==!1)return new t(e);this.matrix=[["Index"]],this.meta={type:void 0},this.config=e};g.prototype.data=function(t){return arguments.length?(this.matrix=t instanceof Array?t:null,this):this.matrix},g.prototype.set=function(t,e){if(arguments.length<2||t.length<2)throw Error("Incorrect arguments provided for #set method");var n="number"==typeof t[0]?t[0]:this.matrix[0].indexOf(t[0]),i="number"==typeof t[1]?t[1]:s.selectColumn.call(this,0).indexOf(t[1]),o=s.selectColumn.call(this,t[0]),a=s.selectRow.call(this,t[1]);return o.length<1&&(r.appendColumn.call(this,String(t[0])),n=this.matrix[0].length-1),a.length<1&&(r.appendRow.call(this,String(t[1])),i=this.matrix.length-1),this.matrix[i][n]=e,this},g.prototype.type=function(t){return arguments.length?(this.meta.type=t?String(t):void 0,this):this.meta.type},(0,f.extend)(g.prototype,r),(0,f.extend)(g.prototype,i),(0,f.extend)(g.prototype,o),(0,f.extend)(g.prototype,a),(0,f.extend)(g.prototype,s),(0,f.extend)(g.prototype,l),(0,f.extend)(g.prototype,c),(0,f.extend)(g.prototype,u.default),g.parser=(0,d.default)(g),e.default=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);n(5);function i(t,e,n){var i=t.slice(e||0,n?n+1:t.length),o=0;return(0,r.each)(i,function(t,e){"number"!=typeof t||isNaN(parseFloat(t))||(o+=parseFloat(t))}),o/i.length}function o(t,e,n){var i=t.slice(e||0,n?n+1:t.length),o=[];return(0,r.each)(i,function(t,e){"number"!=typeof t||isNaN(parseFloat(t))||o.push(parseFloat(t))}),Math.max.apply(Math,o)}function a(t,e,n){var i=t.slice(e||0,n?n+1:t.length),o=[];return(0,r.each)(i,function(t,e){"number"!=typeof t||isNaN(parseFloat(t))||o.push(parseFloat(t))}),Math.min.apply(Math,o)}function s(t,e,n){var i=t.slice(e||0,n?n+1:t.length),o=0;return(0,r.each)(i,function(t,e){"number"!=typeof t||isNaN(parseFloat(t))||(o+=parseFloat(t))}),o}var l=function(t){return i(t,1)},c=l,u=function(t){return s(t,1)},f=u,d=function(t){return o(t,1)},p=d,h=function(t){return a(t,1)},g=h,v=function(t){return t[0]},y=v;e.default={average:i,maximum:o,minimum:a,sum:s,getColumnAverage:l,getRowAverage:c,getColumnSum:u,getRowSum:f,getColumnMaximum:d,getRowMaximum:p,getColumnMinimum:h,getRowMinimum:g,getColumnLabel:v,getRowIndex:y}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.stripHtmlTags=function(t){if("string"!=typeof t)return t;return t.replace(/(<([^>]+)>)/gi,"")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.extendDeep=function t(e){for(var n=1;n<arguments.length;n++)(0,i.each)(arguments[n],function(n,i){void 0!==e[i]&&void 0!==n&&"object"===r(e[i])&&"object"===(void 0===n?"undefined":r(n))&&null!==e[i]&&null!==n?t(e[i],n):e[i]=n});return e};var i=n(0)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.element,n=t.label,r=void 0===n?"Download":n,i=t.type,a=void 0===i?"json":i,s=t.data;if([].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(e.parentNode.children)).find(function(t){return"keen-dataviz-button"===t.className}))return;var l=document.createElement("button");l.innerText=r,l.className="keen-dataviz-button",l.addEventListener("click",function(t){return(0,o.default)({event:t,type:a,data:s})}),e.parentNode.insertBefore(l,e.nextSibling)};var r,i=n(38),o=(r=i)&&r.__esModule?r:{default:r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.node,n=t.quality,r=t.bgcolor;if(n){if(n<0||n>1)throw Error("Please provide image quality between 0 and 1");o.default.toBlob(e,{quality:n,bgcolor:r}).then(function(t){(0,a.saveAs)(t,"chart.jpeg")})}n||o.default.toBlob(e).then(function(t){(0,a.saveAs)(t,"chart.png")})};var r,i=n(39),o=(r=i)&&r.__esModule?r:{default:r},a=n(40)},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.Dataset=e.Dataviz=e.keenGlobals=e.extendKeenGlobalObject=void 0;var r=n(19);Object.defineProperty(e,"Dataviz",{enumerable:!0,get:function(){return r.Dataviz}}),Object.defineProperty(e,"Dataset",{enumerable:!0,get:function(){return r.Dataset}});void 0!==t||("undefined"!=typeof self?self:"undefined"!=typeof window&&window),e.extendKeenGlobalObject=function(t){t.KeenDataviz=r.Dataviz,t.KeenDataset=r.Dataset,t.Keen=t.Keen||{},t.Keen.Dataset=r.Dataset,t.Keen.Dataviz=r.Dataviz};e.keenGlobals=void 0;"undefined"!=typeof webpackKeenGlobals&&(e.keenGlobals=webpackKeenGlobals),e.default=r.Dataviz}).call(this,n(11))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Dataset=e.Dataviz=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=n(12);Object.defineProperty(e,"Dataset",{enumerable:!0,get:function(){return o.Dataset}});var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2)),s=x(n(9)),l=x(n(29)),c=x(n(30)),u=n(0),f=x(n(10)),d=n(14),p=(n(4),x(n(31))),h=n(15),g=x(n(17)),v=x(n(16)),y=x(n(49)),m=x(n(1)),b=x(n(50));function x(t){return t&&t.__esModule?t:{default:t}}var w=e.Dataviz=function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this instanceof t==!1)return new t(n);this.c3=s.default,this.d3=a;var r={showDeprecationWarnings:!0,showLoadingSpinner:!1,container:void 0,containerElement:void 0,title:void 0,showTitle:!0,notes:void 0,theme:"keen-dataviz",colors:["#00bbde","#fe6672","#eeb058","#8a8ad6","#ff855c","#00cfbb","#5a9eed","#73d483","#c879bb","#0099b6","#d74d58","#cb9141","#6b6bb6","#d86945","#00aa99","#4281c9","#57b566","#ac5c9e","#27cceb","#ff818b","#f6bf71","#9b9be1","#ff9b79","#26dfcd","#73aff4","#87e096","#d88bcb"],colorMapping:{},ui:{executionMetadata:!0},utils:{clickToCopyToClipboard:!0},indexBy:"timeframe.start",labels:[],labelMapping:{},labelMappingRegExp:void 0,errorMapping:{},showErrorMessages:!0,library:"default",sortGroups:void 0,sortIntervals:void 0,results:void 0,type:void 0,stacked:!1,dateFormat:void 0,legend:{show:!0,position:"right",label:{textMaxLength:12},pagination:{offset:0,limit:5},tooltip:{show:!0,pointer:!0},sort:void 0},axis:{},color:{},size:{},padding:{top:15},point:{focus:{expand:{enabled:!1}},r:2,show:!0},tooltip:{format:{}},transition:{},data:{order:null,selection:{enabled:!0,draggable:!0,multiple:!0},onselected:function(t,n){var r=e.view._artifacts.c3.selected().reduce(function(t,e){return t+e.value},0);(0,m.default)(r)}},grid:{y:{show:!0}},partialIntervalIndicator:{show:void 0,className:"partial-interval-indicator"},timezone:"UTC",table:{schema:"static"},renderOnVisible:!1,funnel:{lines:!0,resultValues:!0,percents:{show:!1,countingMethod:"absolute",decimals:0},marginBetweenElements:!1,hover:!0,effect3d:"both-sides",minimalSize:!1},react:!1,range:!1,sparkline:!1};this.config=i({},(0,h.extendDeep)(r,n)),n.palette&&(b.default[n.palette]||console.log("Colors pallete not found",n.palette),this.config.colors=b.default[n.palette].colors),this.config.type&&(this.config.type=S(this.config.type)),this.config.type&&this.config.type.includes("-range")&&(this.config.range=!0,this.config.type=this.config.type.replace("-range",""),this.config.legend.show=!1,this.config.stacking="normal",this.config.labels=["Max","Min"],this.config.colors=[this.config.colors[0],this.config.colors[0]]),this.config.stacking&&(this.config.stacked=!0),this.config.sparkline&&(this.config.legend.show=!1,this.config.axis={x:{show:!1},y:{show:!1}},this.config.grid={x:{show:!1},y:{show:!1}}),this.config.container&&this.el(this.config.container),void 0===n.legend||n.legend||(this.config.legend=i({},n,{show:!1})),n.color&&n.color.pattern&&(this.config.colors=n.color.pattern),this.config.legend&&this.config.legend.tooltip&&!1===this.config.legend.tooltip.show&&void 0===this.config.tooltip.show&&(this.config.tooltip={show:!1}),this.dataset=new o.Dataset(this.config),this.view={_prepared:!1,_rendered:!1,_artifacts:{}},t.visuals.push(this),this.config.showLoadingSpinner&&this.prepare(),this.config.results&&this.render(this.config.results),this.config.firstVisibilityState=document.visibilityState,this.config.utils.clickToCopyToClipboard||(this.config.data.onselected=function(){}),n.data&&n.data.onselected&&(this.config.data.onselected=function(t,r){if(n.data.onselected.bind(null,t,r)(),e.config.utils.clickToCopyToClipboard){var i=e.view._artifacts.c3.selected().reduce(function(t,e){return t+e.value},0);(0,m.default)(i)}})};function _(t){2!==t.data()[0].length||(0,f.default)(t.data()[1][0])?t.dataset.updateRow(0,function(e,n){return n>0&&t.config.labels[n-1]?(0,d.stripHtmlTags)(String(t.config.labels[n-1])):(0,d.stripHtmlTags)(e)}.bind(t)):t.dataset.updateColumn(0,function(e,n){return t.config.labels[n-1]?(0,d.stripHtmlTags)(String(t.config.labels[n-1])):(0,d.stripHtmlTags)(e)}.bind(t))}function M(t){var e=t.datavizInstance,n=t.value;if(e.config.labelMappingRegExp){var r=n;return e.config.labelMappingRegExp.forEach(function(t){t.length>1&&(t[0].test(n)&&(r=t[1]))}),(0,d.stripHtmlTags)(r)}return e.config.labelMapping[n]?(0,d.stripHtmlTags)(String(e.config.labelMapping[n])):(0,d.stripHtmlTags)(n)}function k(t){t.config.labelMappingDimension||(2!==t.data()[0].length||(0,f.default)(t.data()[1][0])?t.config.labelMappingDimension="column":t.config.labelMappingDimension="row"),"row"!==t.config.labelMappingDimension&&"both"!==t.config.labelMappingDimension||t.dataset.updateColumn(0,function(e){return M({datavizInstance:t,value:e})}.bind(t)),"column"!==t.config.labelMappingDimension&&"both"!==t.config.labelMappingDimension||t.dataset.updateRow(0,function(e){return M({datavizInstance:t,value:e})}.bind(t))}function E(t){t.config.sortGroups&&t.data().length>1&&((0,f.default)(t.data()[1][0])?t.dataset.sortColumns(t.config.sortGroups,t.dataset.getColumnSum):t.dataset.sortRows(t.config.sortGroups,t.dataset.getRowSum))}function A(t){t.config.sortIntervals&&t.dataset.sortRows(t.config.sortIntervals)}function S(t){return{areachart:"area",barchart:"horizontal-bar",columnchart:"bar",linechart:"line",piechart:"pie"}[t]||t}function P(t){"undefined"==typeof document&&"undefined"!=typeof window?(null==document.readyState&&document.addEventListener&&(document.addEventListener("DOMContentLoaded",function t(){document.removeEventListener("DOMContentLoaded",t,!1),document.readyState="complete"},!1),document.readyState="loading"),function t(e){/in/.test(document.readyState)?setTimeout(function(){t(e)},9):e()}(t)):t()}w.libraries={default:{}},"undefined"!=typeof window&&(w.libraries.default=(0,p.default)(w)),w.visuals=[],w.register=function(t,e){w.libraries[t]=w.libraries[t]||{},(0,u.each)(e,function(e,n){w.libraries[t][n]=e})},w.find=function(t){if(!arguments.length)return w.visuals;var e=t.nodeName?t:document.querySelector(t),n=null;return(0,u.each)(w.visuals,function(t){if(e==t.config.container)return n=t,!1}),n},w.prototype.attributes=function(t){if(this.config.showDeprecationWarnings&&console.log(".attributes() is deprecated. Use: new KeenDataviz({ _your_value_here_ })"),!arguments.length)return this.config;var e=this.config;return(0,u.each)(t,function(t,n){"chartType"===n&&(n="type"),e[n]=t}),this},w.prototype.call=function(t){return t.call(this),this},w.prototype.chartOptions=function(t){return this.config.showDeprecationWarnings&&console.log(".chartOptions() is deprecated. Use: new KeenDataviz({ _your_value_here_ })"),arguments.length?(this.config=(0,h.extendDeep)(this.config,t),this):this.config},w.prototype.colors=function(t){return this.config.showDeprecationWarnings&&console.log(".colors() is deprecated. Use: new KeenDataviz({ colors: _your_value_here_ })"),arguments.length?(this.config.colors=t instanceof Array?t:[],this):this.config.colors},w.prototype.colorMapping=function(t){this.config.showDeprecationWarnings&&console.log(".colorMapping() is deprecated. Use: new KeenDataviz({ colorMapping: _your_value_here_ })");var e=this;return arguments.length?(null===t?this.config.colorMapping={}:"object"===(void 0===t?"undefined":r(t))&&(0,u.each)(t,function(t,n){e.config.colorMapping[n]=t||null}),this):this.config.colorMapping},w.prototype.data=c.default,w.prototype.dateFormat=function(t){return this.config.showDeprecationWarnings&&console.log(".dateFormat() is deprecated. Use: new KeenDataviz({ dateFormat: _your_value_here_ })"),arguments.length?(this.config.dateFormat="string"==typeof t||"function"==typeof t?t:void 0,this):this.config.dateFormat},w.prototype.destroy=function(){var t=this.library(),e=this.config.type,n=this.el();return w.libraries[t]&&w.libraries[t][e]&&w.libraries[t][e].destroy.call(this),n&&(n.innerHTML=""),this.view._prepared=!1,this.view._rendered=!1,this.view._artifacts={},this},w.prototype.el=function(t){var e=this;return arguments.length?(P(function(){t&&null!==t?t.nodeName?e.config.containerElement=t:document.querySelector&&(e.config.containerElement=document.querySelector(t)):e.config.containerElement=void 0}),this):this.config.containerElement},w.prototype.height=function(t){return this.config.showDeprecationWarnings&&console.log(".height() is deprecated - use CSS classes"),this},w.prototype.indexBy=function(t){return this.config.showDeprecationWarnings&&console.log(".indexBy() is deprecated. Use: new KeenDataviz({ indexBy: _your_value_here_ })"),arguments.length?(this.config.indexBy=t?String(t):"timeframe.start",this):this.config.indexBy},w.prototype.labels=function(t){return this.config.showDeprecationWarnings&&console.log(".labels() is deprecated. Use: new KeenDataviz({ labels: _your_value_here_ })"),arguments.length?(this.config.labels=t instanceof Array?t:[],_(this),this):this.config.labels},w.prototype.labelMapping=function(t){return this.config.showDeprecationWarnings&&console.log(".labelMapping() is deprecated. Use: new KeenDataviz({ labelMapping: _your_value_here_ })"),arguments.length?(null===t?this.config.labelMapping={}:"object"===(void 0===t?"undefined":r(t))&&(0,u.each)(t,function(t,e){this.config.labelMapping[e]=t||null}.bind(this)),k(this),this):this.config.labelMapping},w.prototype.library=function(t){return arguments.length?(this.config.library=t?String(t):null,this):this.config.library},w.prototype.message=function(){if(this.view._rendered&&this.destroy(),this.el()){this.el().innerHTML="";var t=w.libraries.default.message;t.render&&t.render.apply(this,arguments)}return this},w.prototype.notes=function(t){return this.config.showDeprecationWarnings&&console.log(".notes() is deprecated. Use: new KeenDataviz({ notes: _your_value_here_ })"),arguments.length?(this.config.notes=t?String(t):null,this):this.config.notes},w.prototype.prepare=function(){var t=this;if(!this.el())throw this.config.container+" not found. A DOM parent element is required to mount the chart.";return P(function(){if(t.view._rendered&&t.destroy(),t.el()){t.el().innerHTML="";var e=w.libraries.default.spinner;e.render&&e.render.call(t),t.view._prepared=!0}}),this},w.prototype.render=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=this;if(e){var r=e[0]||e;if(r.query&&r.query.interval&&r.query.timeframe&&"string"==typeof r.query.timeframe&&r.query.timeframe.includes("this_")&&this.config.partialIntervalIndicator&&void 0===this.config.partialIntervalIndicator.show&&(this.config.partialIntervalIndicator.show=!0),Array.isArray(e)){var i=e.map(function(t){return t.query.timeframe});return i.forEach(function(t){if(i.find(function(e){return JSON.stringify(e)!==JSON.stringify(t)})){var e="Timeframes of the queries should be the same";throw console.error(e),e}}),n.data(e[0]).call(function(){var r=function(t){return t.query.event_collection+" "+t.query.analysis_type},i=r(e[0]);n.config.labelMapping[i]&&(i=n.config.labelMapping[i]),t.dataset.deleteColumn(1);var a=!0,s=!1,l=void 0;try{for(var c,u=e[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var f=c.value;i=r(f);var d=o.Dataset.parser("interval")(f);n.dataset.appendColumn(i,d.selectColumn(1).slice(1))}}catch(t){s=!0,l=t}finally{try{!a&&u.return&&u.return()}finally{if(s)throw l}}}).render()}return n.data(e).render()}(this.config.labelMapping&&Object.keys(this.config.labelMapping).length>0||this.config.labelMappingRegExp&&this.config.labelMappingRegExp.length>0)&&k(n),this.config.labels&&Object.keys(this.config.labels).length>0&&_(n),this.config.sortGroups&&E(n),this.config.sortIntervals&&A(n);var a=w.libraries.default.spinner,s=this.config.library,l=this.config.type,c=this.el();if(!c||void 0===c){var u=this.config.container+" not found. A DOM parent element is required to mount the chart.";throw console.error(u),u}var f=n;return n.config.renderAsPromise&&(f=new Promise(function(e,r){var i=t.config.onrendered;n.config.onrendered=function(){i&&i(),e(n)}})),P(function(){var t=n.execution_metadata&&n.config.ui&&n.config.ui.executionMetadata,e=n.config.ui&&n.config.ui.buttons&&n.config.ui.buttons.download&&n.config.ui.buttons.download.type;if(n.view._prepared&&a.destroy&&a.destroy.apply(n,arguments),c.innerHTML="","undefined"===w.libraries[s]){var r="Incorrect library";throw n.message(r),r}if(void 0===w.libraries[s][l]){var i="Incorrect chart type",o=this.config.errorMapping[i]||i;throw n.message(o),i}if(function(t,e){var n="",r="",i="";"top"!==e.legend.position&&"bottom"!==e.legend.position||(r="c3-chart-100-percent");e.range&&(i="keen-dataviz-range");var o='<div class="c3-chart '+r+" "+i+'"></div>',a="horizontal";"left"!==e.legend.position&&"right"!==e.legend.position||(a="vertical");e.legend&&e.legend.show&&(o="top"===e.legend.position||"left"===e.legend.position?'<div class="keen-c3-legend keen-c3-legend-'+a+" keen-c3-legend-"+e.legend.position+'"></div>'+o:o+'<div class="keen-c3-legend keen-c3-legend-'+a+" keen-c3-legend-"+e.legend.position+'"></div>');e.react||(n+='<div class="'+e.theme+'">');e.title&&e.showTitle&&(n+='<div class="keen-dataviz-title '+e.theme+'-title">'+e.title+"</div>");n+='<div class="keen-dataviz-rendering keen-dataviz-rendering-'+a+" "+e.theme+"-rendering "+e.theme+"-rendering-"+a+'">'+o+"</div>",e.notes&&(n+='<div class="keen-dataviz-notes '+e.theme+'-notes">'+e.notes+"</div>");e.react||(n+="</div>");t.innerHTML=n}(c,n.config),e&&(0,v.default)({element:c,data:n.dataset.matrix,type:n.config.ui.buttons.download.type,label:n.config.ui.buttons.download.label}),t&&(0,y.default)({element:c,data:n.execution_metadata}),n.config.renderOnVisible&&"undefined"!=typeof IntersectionObserver){new IntersectionObserver(function(t,e){t.forEach(function(t){t.isIntersecting&&(n.view._rendered||(w.libraries[s][l].render.call(n),n.view._rendered=!0))})}).observe(c)}else{if("hidden"===n.config.firstVisibilityState&&"undefined"!=typeof document){var u=void 0,f=void 0;void 0!==document.hidden?(u="hidden",f="visibilitychange"):void 0!==document.msHidden?(u="msHidden",f="msvisibilitychange"):void 0!==document.webkitHidden&&(u="webkitHidden",f="webkitvisibilitychange");void 0===document.addEventListener&&void 0===u||document.addEventListener(f,function(){document[u]||n.view._artifacts.c3.load(n.dataset.matrix)},{once:!0})}w.libraries[s][l].render.call(n),n.view._rendered=!0}}),f},w.prototype.sortGroups=function(t){return this.config.showDeprecationWarnings&&console.log(".sortGroups() is deprecated. Use: new KeenDataviz({ sortGroups: _your_value_here_ })"),arguments.length?(this.config.sortGroups=t?String(t):null,E(this),this):this.config.sortGroups},w.prototype.sortIntervals=function(t){return this.config.showDeprecationWarnings&&console.log(".sortIntervals() is deprecated. Use: new KeenDataviz({ sortIntervals: _your_value_here_ })"),arguments.length?(this.config.sortIntervals=t?String(t):null,A(this),this):this.config.sortIntervals},w.prototype.stacked=function(t){return this.config.showDeprecationWarnings&&console.log(".stacked() is deprecated. Use: new KeenDataviz({ stacked: _your_value_here_ })"),arguments.length?(this.config.stacked=!!t,this):this.config.stacked},w.prototype.theme=function(t){return this.config.showDeprecationWarnings&&console.log(".theme() is deprecated. Use: new KeenDataviz({ theme: _your_value_here_ })"),arguments.length?(this.config.theme=t?String(t):null,this):this.config.theme},w.prototype.title=function(t){return this.config.showDeprecationWarnings&&console.log(".title() is deprecated. Use: new KeenDataviz({ title: _your_value_here_ })"),arguments.length?(this.config.title=t?String(t):null,this):this.config.title},w.prototype.type=function(t){return this.config.showDeprecationWarnings&&console.log(".type() is deprecated. Use: new KeenDataviz({ type: _your_value_here_ })"),arguments.length?(this.config.type=t?S(t):null,this):this.config.type},w.prototype.update=function(){var t=this.config.library,e=this.config.type,n=this.el();return t&&e&&n&&w.libraries[t][e].update&&w.libraries[t][e].update.apply(this,arguments),this},w.prototype.width=function(t){return this.config.showDeprecationWarnings&&console.log(".width() is deprecated - use CSS classes"),this},w.prototype.exportImage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.quality,n=void 0===e?0:e,r=t.bgcolor,i=void 0===r?"#fff":r;(0,g.default)({node:this.config.containerElement,quality:n,bgcolor:i})},w.prototype.chartType=w.prototype.type,w.prototype.error=w.prototype.message,w.prototype.parseRawData=w.prototype.data,w.prototype.parseRequest=function(){return this},w.prototype.initialize=function(){return this},w.version=l.default.version,e.default=w},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deleteColumn=function(t){var e=this,n="number"==typeof t?t:this.matrix[0].indexOf(t);n>-1&&(0,r.each)(e.matrix,function(t,r){e.matrix[r].splice(n,1)});return e},e.deleteRow=function(t){var e="number"==typeof t?t:this.selectColumn(0).indexOf(t);e>-1&&this.matrix.splice(e,1);return this};var r=n(0)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.filterColumns=function(t){var e=this,n=[];return(0,r.each)(e.matrix,function(t,e){n.push([])}),(0,r.each)(e.matrix[0],function(i,o){var a=e.selectColumn(o);(0==o||t.call(e,a,o))&&(0,r.each)(a,function(t,e){n[e].push(t)})}),e.data(n),e},e.filterRows=function(t){var e=this,n=[];return(0,r.each)(e.matrix,function(r,i){(0==i||t.call(e,r,i))&&n.push(r)}),e.data(n),e};var r=n(0)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.insertColumn=function(t,e,n){var r=this,o=void 0!==e?e:null;"function"==typeof n?(r.matrix[0].splice(t,0,o),(0,i.each)(r.matrix,function(e,i){var o;i>0&&(void 0===(o=n.call(r,e,i))&&(o=null),r.matrix[i].splice(t,0,o))})):(!n||n instanceof Array)&&((n=n||[]).length<=r.matrix.length-1?n=n.concat((0,a.default)(r.matrix.length-1-n.length)):(0,i.each)(n,function(t,e){r.matrix.length-1<n.length&&s.appendRow.call(r,String(r.matrix.length))}),r.matrix[0].splice(t,0,o),(0,i.each)(n,function(e,n){r.matrix[n+1].splice(t,0,e)}));return r},e.insertRow=function(t,e,n){var r=this,o=[],l=void 0!==e?e:null;o.push(l),"function"==typeof n?((0,i.each)(r.matrix[0],function(t,e){var i=void 0,a=void 0;e>0&&(i=r.selectColumn(e),void 0===(a=n.call(r,i,e))&&(a=null),o.push(a))}),r.matrix.splice(t,0,o)):(!n||n instanceof Array)&&((n=n||[]).length<=r.matrix[0].length-1?n=n.concat((0,a.default)(r.matrix[0].length-1-n.length)):(0,i.each)(n,function(t,e){r.matrix[0].length-1<n.length&&s.appendColumn.call(r,String(r.matrix[0].length))}),r.matrix.splice(t,0,o.concat(n)));return r};var r,i=n(0),o=n(8),a=(r=o)&&r.__esModule?r:{default:r},s=n(7)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.selectColumn=function(t){var e=[],n="number"==typeof t?t:this.matrix[0].indexOf(t);n>-1&&void 0!==this.matrix[0][n]&&(0,r.each)(this.matrix,function(t,r){e.push(t[n])});return e},e.selectRow=function(t){var e=[],n="number"==typeof t?t:this.selectColumn(0).indexOf(t);n>-1&&void 0!==this.matrix[n]&&(e=this.matrix[n]);return e};var r=n(0)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sortColumns=function(t,e){var n=this,r=this.matrix[0].slice(1),o=[],s=e||a.default.getColumnLabel;return(0,i.each)(r,function(t,e){o.push(n.selectColumn(e+1).slice(0))}),o.sort(function(e,r){var i=s.call(n,e)>s.call(n,r);return i?"asc"===t?1:-1:i?0:"asc"===t?-1:1}),(0,i.each)(o,function(t,e){n.deleteColumn(e+1).insertColumn(e+1,t[0],t.slice(1))}),n},e.sortRows=function(t,e){var n=this,r=this.matrix.slice(0,1),i=this.matrix.slice(1),o=e||a.default.getRowIndex;return i.sort(function(e,r){var i=o.call(n,e)>o.call(n,r);return i?"asc"===t?1:-1:i?0:"asc"===t?-1:1}),n.data(r.concat(i)),n};var r,i=n(0),o=n(13),a=(r=o)&&r.__esModule?r:{default:r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.updateColumn=function(t,e){var n=this,r="number"==typeof t?t:this.matrix[0].indexOf(t);r>-1&&("function"==typeof e?(0,i.each)(n.data(),function(t,i){var o;i>0&&void 0!==(o=e.call(n,t[r],i,t))&&(n.matrix[i][r]=o)}):(!e||e instanceof Array)&&((e=e||[]).length<=n.data().length-1?e=e.concat((0,a.default)(n.data().length-1-e.length)):(0,i.each)(e,function(t,r){n.matrix.length-1<e.length&&s.appendRow.call(n,String(n.matrix.length))}),(0,i.each)(e,function(t,e){n.matrix[e+1][r]=t})));return n},e.updateRow=function(t,e){var n=this,r="number"==typeof t?t:this.selectColumn(0).indexOf(t);r>-1&&("function"==typeof e?(0,i.each)(n.data()[r],function(t,i){var o=n.selectColumn(i),a=e.call(n,t,i,o);void 0!==a&&(n.matrix[r][i]=a)}):(!e||e instanceof Array)&&((e=e||[]).length<=n.matrix[0].length-1?e=e.concat((0,a.default)(n.matrix[0].length-1-e.length)):(0,i.each)(e,function(t,r){n.matrix[0].length-1<e.length&&s.appendColumn.call(n,String(n.matrix[0].length))}),(0,i.each)(e,function(t,e){n.matrix[r][e+1]=t})));return n};var r,i=n(0),o=n(8),a=(r=o)&&r.__esModule?r:{default:r},s=n(7)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return a=t,function(t){var e=Array.prototype.slice.call(arguments,1);if(s[t])return s[t].apply(this,e);throw"Requested parser does not exist"}};var r=n(0),i=n(27),o=n(28),a=void 0;var s={metric:function(){return function(t){return(new a).set(["Value","Result"],t.result).type("metric")}},interval:function(){var t=Array.prototype.slice.call(arguments);return function(e){var n=(new a).type("interval");return(0,r.each)(e.result,function(e,r){var i=t[0]&&"timeframe.end"===t[0]?e.timeframe.end:e.timeframe.start;n.set(["Result",i],e.value)}),n}},"grouped-metric":function(){return function(t){var e=(new a).type("grouped-metric");return(0,r.each)(t.result,function(t,n){var i;(0,r.each)(t,function(t,e){"result"!==e&&(i=e)}),e.set(["Result",String(t[i])],t.result)}),e}},"grouped-interval":function(){var t=Array.prototype.slice.call(arguments);return function(e){var n=(new a).type("grouped-interval");return(0,r.each)(e.result,function(e,i){var o=t[0]&&"timeframe.end"===t[0]?e.timeframe.end:e.timeframe.start;e.value.length?(0,r.each)(e.value,function(t,e){var i;(0,r.each)(t,function(t,e){"result"!==e&&(i=e)}),n.set([String(t[i]),o],t.result)}):n.appendRow(o)}),n}},"double-grouped-metric":function(){var t=Array.prototype.slice.call(arguments);if(!t[0])throw"Requested parser requires a sequential list (array) of properties to target as a second argument";return function(e){var n=(new a).type("double-grouped-metric");return(0,r.each)(e.result,function(e,r){var i=e[t[0][0]]+" "+e[t[0][1]];n.set(["Result",i],e.result)}),n}},"double-grouped-interval":function(){var t=Array.prototype.slice.call(arguments);if(!t[0])throw"Requested parser requires a sequential list (array) of properties to target as a second argument";return function(e){var n=(new a).type("double-grouped-interval");return(0,r.each)(e.result,function(e,i){var o=t[1]&&"timeframe.end"===t[1]?e.timeframe.end:e.timeframe.start;(0,r.each)(e.value,function(e,r){var i=e[t[0][0]]+" "+e[t[0][1]];n.set([i,o],e.result)})}),n}},funnel:function(){return function(t){var e,n,i;return void 0!==t.steps&&void 0!==t.result&&t.result instanceof Array?(e=t.result,n=t.steps):void 0!==t.result.steps&&void 0!==t.result.result&&t.result.result instanceof Array&&(e=t.result.result,n=t.result.steps),(i=(new a).type("funnel")).appendColumn("Step Value"),(0,r.each)(e,function(t,e){void 0!==n&&n[e]&&i.appendRow(String(n[e].event_collection),[t])}),i}},list:function(){return function(t){var e=(new a).type("list");return(0,r.each)(t.result,function(t,n){e.set(["Result",String(n+1)],t)}),e}},extraction:function(){var t=this.config;return function(e){var n=(new a).type("extraction"),r=Object.keys((0,i.flatten)(e.result[0])),s=t&&t.table;if(s&&"dynamic"===s.schema){var l=e.result,c={};l.forEach(function(t){var e=Object.keys((0,i.flatten)(t));e&&e.length&&e.forEach(function(t){c[t]||(c[t]=!0)})}),r=Object.keys(c)}r.forEach(function(t){n.set([t,"0"],t)}),a&&t&&t.table&&t.table.columns&&(r=t.table.columns);for(var u=0;u<e.result.length;u++){for(var f=[u+1],d=0;d<r.length;d++)f.push((0,o.valueAtDeepKey)(e.result[u],r[d]));n.matrix[String(u+1)]=f}return n.deleteColumn(0),n}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.flatten=function t(e){var n={};for(var i in e)if(e.hasOwnProperty(i))if("object"==r(e[i])&&null!==e[i]){var o=t(e[i]);for(var a in o)o.hasOwnProperty(a)&&(n[i+"."+a]=o[a])}else n[i]=e[i];return n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.valueAtDeepKey=function t(e,n,r){return"string"==typeof n?t(e,n.split("."),r):1==n.length&&void 0!==r&&null!==e&&void 0!==e[n[0]]?e[n[0]]=r:0==n.length?e:void 0===n||void 0===e||null===n||null===e||void 0===e[n[0]]?null:t(e[n[0]],n.slice(1),r)}},function(t){t.exports={name:"keen-dataviz",description:"Data Visualization SDK for Keen IO",license:"MIT",version:"3.11.0",main:"dist/external_d3_c3/node/keen-dataviz.js",browser:"dist/external_d3_c3/keen-dataviz.js",style:"dist/keen-dataviz.css",scripts:{start:'concurrently --kill-others "NODE_ENV=development webpack-dev-server" "npm run postcss-watch"',"postcss-watch":"node_modules/postcss-cli/bin/postcss lib/style/keen-dataviz-c3.css -o test/demo/keen-dataviz.css --watch --config postcss.config.js",build:"NODE_ENV=production webpack -p && npm run build:css && NODE_ENV=production OPTIMIZE_MINIMIZE=1 webpack -p && npm run build:css && npm run build:css:min && npm run build:external_d3_c3 && npm run build:external_d3_c3:css && npm run build:external_d3_c3:css:min && npm run build:node","build:css":"node_modules/postcss-cli/bin/postcss lib/style/keen-dataviz-c3.css -o dist/keen-dataviz.css --config postcss.config.js","build:css:min":"OPTIMIZE_MINIMIZE=1 node_modules/postcss-cli/bin/postcss lib/style/keen-dataviz-c3.css -o dist/keen-dataviz.min.css --config postcss.config.js","build:external_d3_c3:css":"node_modules/postcss-cli/bin/postcss lib/style/keen-dataviz.css -o dist/external_d3_c3/keen-dataviz.css --config postcss.config.js","build:external_d3_c3:css:min":"OPTIMIZE_MINIMIZE=1 node_modules/postcss-cli/bin/postcss lib/style/keen-dataviz.css -o dist/external_d3_c3/keen-dataviz.min.css --config postcss.config.js","build:external_d3_c3":"NODE_ENV=production EXTERNAL_D3_C3=1 webpack -p && NODE_ENV=production EXTERNAL_D3_C3=1 OPTIMIZE_MINIMIZE=1 webpack -p","build:node":"TARGET=node NODE_ENV=production EXTERNAL_D3_C3=1 webpack -p",profile:"webpack --profile --json > stats.json",analyze:"webpack-bundle-analyzer stats.json /dist",version:"npm run build && git add .",postversion:"git push && git push --tags && npm publish",test:"NODE_ENV=test jest","test:watch":"NODE_ENV=test jest --watch"},repository:{type:"git",url:"https://github.com/keen/keen-dataviz.js.git"},bugs:"https://github.com/keen/keen-dataviz.js/issues",author:"Keen.IO <team@keen.io> (https://keen.io/)",contributors:["Dustin Larimer <dustin@keen.io> (https://github.com/dustinlarimer)","Joanne Cheng <joanne@keen.io> (https://github.com/joannecheng)","Eric Anderson <eric@keen.io> (https://github.com/aroc)","Joe Wegner <joe@keen.io> (https://github.com/josephwegner)","Sara Falkoff <sara@keen.io (https://github.com/sfalkoff)","Adam Kasprowicz <adam.kasprowicz@keen.io> (https://github.com/adamkasprowicz)","Dariusz ≈Åacheta <dariusz.lacheta@keen.io> (https://github.com/dariuszlacheta)"],homepage:"https://keen.io",keywords:["d3","c3","Analytics","Stats","Statistics","Visualization","Visualizations","Data Visualization","Chart","Charts","Charting","Svg","Dataviz","Plots","Graphs","Funnels"],dependencies:{c3:"^0.7.1","dom-to-image":"^2.6.0","file-saver":"^2.0.1","promise-polyfill":"^8.0.0"},devDependencies:{autoprefixer:"^8.2.0","babel-loader":"^7.1.4","babel-plugin-transform-es2015-modules-commonjs":"^6.26.2","babel-plugin-transform-object-rest-spread":"^6.26.0","babel-preset-env":"^1.7.0",concurrently:"^3.5.1",cssnano:"^3.10.0",eslint:"^4.19.1","eslint-config-airbnb":"^16.1.0","eslint-loader":"^2.0.0","eslint-plugin-import":"^2.11.0","eslint-plugin-jsx-a11y":"^6.0.3","eslint-plugin-react":"^7.7.0","html-loader":"^0.5.5","html-webpack-plugin":"^3.2.0",jest:"^22.4.3","jest-environment-jsdom-c3":"^2.0.0",nock:"^9.2.6",postcss:"^6.0.21","postcss-cli":"^5.0.0","postcss-color-function":"^4.0.1","postcss-css-variables":"^0.8.1","postcss-cssnext":"^2.4.0","postcss-import":"^8.0.2","postcss-loader":"^2.1.3",precss:"^3.1.2","regenerator-runtime":"^0.11.1","replace-in-file":"^3.4.0","style-loader":"^0.20.3",webpack:"^4.29.0","webpack-bundle-analyzer":"^3.3.2","webpack-cli":"^3.2.1","webpack-dev-server":"^3.3.1","xhr-mock":"^2.3.2"}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return arguments.length?t instanceof o.default?(this.dataset=t,this):function(t){var e,n,r,i,l,c,u,f,d=[];n=this.config.indexBy,r=t.metadata||{},l=void 0!==t.query?t.query:{},"funnel"===(l=(0,a.extend)({analysis_type:null,event_collection:null,filters:[],group_by:null,interval:null,timeframe:null,timezone:null},l)).analysis_type?i="funnel":"extraction"===l.analysis_type?i="extraction":"select_unique"===l.analysis_type?l.group_by||l.interval||(i="list"):l.analysis_type&&(l.group_by||l.interval?l.group_by&&!l.interval?l.group_by instanceof Array&&l.group_by.length>1?(i="double-grouped-metric",d.push(l.group_by)):i="grouped-metric":l.interval&&!l.group_by?(i="interval",d.push(n)):l.group_by&&l.interval&&(l.group_by instanceof Array&&l.group_by.length>1?(i="double-grouped-interval",d.push(l.group_by),d.push(n)):(i="grouped-interval",d.push(n))):i="metric");i||("number"==typeof t.result&&(i="metric"),t.result instanceof Array&&t.result.length>0&&(!t.result[0].timeframe||"number"!=typeof t.result[0].value&&null!=t.result[0].value||(i="interval",d.push(n)),"number"==typeof t.result[0].result&&(i="grouped-metric"),t.result[0].value instanceof Array&&(i="grouped-interval",d.push(n)),"number"==typeof t.result[0]&&void 0!==t.steps&&(i="funnel",l.steps=t.steps),"string"!=typeof t.result[0]&&"number"!=typeof t.result[0]||void 0!==t.steps||(i="list"),i||(i="extraction")),i||(i="extraction"));void 0===this.config.title&&(u=r.display_name?r.display_name:function(t){var e,n=t.analysis_type?t.analysis_type.replace("_"," "):"";e=n.replace(/\b./g,function(t){return t.toUpperCase()}),t.event_collection&&(e+=" - "+t.event_collection);return e}(l),this.config.title=u);this.config.type||(f=r.visualization&&r.visualization.chart_type?r.visualization.chart_type:function(t){var e=void 0;switch(t){case"metric":e="metric";break;case"interval":e="area";break;case"grouped-metric":case"double-grouped-metric":e="bar";break;case"grouped-interval":case"double-grouped-interval":e="line";break;case"funnel":e="horizontal-bar";break;case"list":case"extraction":default:e="table"}return e}(i),this.config.type=f);c=o.default.parser.apply(this,[i].concat(d)),e=c((0,a.extend)(t,{query:l})),i.indexOf("interval")>-1&&e.updateColumn(0,function(t,e){return new Date(t)});e.updateRow(0,function(t,e){return(0,s.stripHtmlTags)(t)}),this.dataset=e,t.execution_metadata&&(this.execution_metadata=t.execution_metadata);return this}.call(this,t):this.dataset.data()};var r,i=n(12),o=(r=i)&&r.__esModule?r:{default:r},a=n(5),s=n(14)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=function(t){var e=void 0;return function(t){if("undefined"==typeof window)return;window.onresize=window.resize=function(){},window.addEventListener?window.addEventListener("resize",t,!0):window.attachEvent&&window.attachEvent("onresize",t)}(function(){e&&clearTimeout(e);var n=t.visuals.length>12?1e3:250;e=setTimeout(function(){(0,o.each)(t.visuals,function(t){var e=t.view._artifacts.c3;if(e){var n=e.element.previousSibling?e.element.previousSibling.offsetWidth:0,r=e.element.nextSibling?e.element.nextSibling.offsetWidth:0,i=e.element.parentNode.parentNode.offsetWidth-n-r;e.resize({width:i})}})},n)}),i.default.chart&&i.default.chart.internal&&i.default.chart.internal.fn&&(i.default.chart.internal.fn.horizontalDistance=function(t,e){var n=this.config.axis_rotated?1:0,r=this.x(t.x);return Math.abs(r-e[n])},i.default.chart.internal.fn.findClosest=function(t,e){var n,r=i.default.chart.internal.fn.CLASS,o=this,a=o.config.point_sensitivity;a=1/0;return t.filter(function(t){return t&&o.isBarType(t.id)}).forEach(function(t){var e=o.main.select("."+r.bars+o.getTargetSelectorSuffix(t.id)+" ."+r.bar+"-"+t.index).node();!n&&o.isWithinBar(o.d3.mouse(e),e)&&(n=t)}),t.filter(function(t){return t&&!o.isBarType(t.id)}).forEach(function(t){var r=o.dist(t,e);(r=o.horizontalDistance(t,e))<a&&(a=r,n=t)}),n}),function(){var t={message:p.default,metric:h.default,table:g.default,spinner:v.default,funnel:new y.default,"funnel-3d":new m.default,"horizontal-funnel":new b.default,"horizontal-funnel-3d":new x.default,"metric-combo":new w.default},e=function(t,e){return parseInt(window.getComputedStyle(t)["padding"+e].replace("px",""))};return(0,o.each)(["area","area-spline","area-step","bar","donut","gauge","line","pie","step","spline","horizontal-area","horizontal-area-spline","horizontal-area-step","horizontal-bar","horizontal-line","horizontal-step","horizontal-spline"],function(n,p){t[n]={render:function(){var t=this,p=function(){var t={bindto:this.el().querySelector("."+this.config.theme+"-rendering .c3-chart"),color:{pattern:this.config.colors},data:{colors:r({},this.config.colorMapping),columns:[],type:this.config.type.replace("horizontal-","")}},n=this.el(),i=n.offsetHeight;if(i-=e(n,"Top")+e(n,"Bottom"),this.config.showTitle){var o=this.el().querySelector(".keen-dataviz-title");i-=o?o.offsetHeight:parseInt(window.getComputedStyle(this.el(),null)["font-size"].replace("px",""))}if(this.config.notes){var s=this.el().querySelector(".keen-dataviz-notes");i-=s?s.offsetHeight:parseInt(window.getComputedStyle(this.el(),null)["font-size"].replace("px",""))}var l=this.el().querySelector(".c3-chart").offsetWidth-(e(n,"Left")+e(n,"Right"));l<0&&(l=0);var c={size:{width:l,height:i>0?i:void 0}};return(0,a.extendDeep)({},c,this.config,t)}.call(this),h=(0,d.calculateSumForPercents)(this.dataset.matrix);if("percent"!==p.stacking||"bar"!==n&&"horizontal-bar"!==n&&"area"!==n&&"area-step"!==n&&"area-spline"!==n||(this.dataset.matrix,this.dataset.matrix=[this.dataset.matrix[0]].concat(M((0,d.calculatePercents)(this.dataset.matrix,h))),p.sparkline||(p.axis={y:{padding:{top:0},tick:{format:function(t){return t+"%"}}}})),p.range&&(this.dataset.matrix=[this.dataset.matrix[0]].concat(M((0,f.default)(this.dataset.matrix)))),this.config.clearOnRender&&p.data.columns.length&&this.dataset&&this.dataset.meta){var g=(this.dataset.meta||{}).type,v=0;["interval"].includes(void 0===g?"":g)&&(v=1),p.data.columns.splice(v)}if(1!==this.data()[0].length&&1!==this.data().length){var y=!1;if("gauge"===n?(p.legend.show=!1,p.data.columns=[[this.config.title||this.data()[1][0],this.data()[1][1]]],y=!0):"pie"===n||"donut"===n?p.data.columns=this.data().slice(1):(n.indexOf("horizontal-")>-1&&(p.axis.rotated=n.indexOf("horizontal-")>-1),(0,s.default)(this.data()[1][0])?(p.axis.x=p.axis.x||{},p.axis.x.type="timeseries",p.axis.x.tick=p.axis.x.tick||{format:this.config.dateFormat||(0,l.default)(this.data()[1][0],this.data()[2]?this.data()[2][0]:this.data()[1][0]),culling:{max:5}},p.data.columns[0]=[],(0,o.each)(this.dataset.selectColumn(0),function(t,e){e>0&&(t=new Date(t)),p.data.columns[0][e]=t}),p.data.columns[0][0]="x",p.data.x="x",this.config.stacked&&this.data()[0].length>2&&(p.data.groups=[this.dataset.selectRow(0).slice(1)])):(p.axis.x=p.axis.x||{},p.axis.x.type="category",p.axis.x.categories=this.dataset.selectColumn(0).slice(1),this.config.stacked&&this.data()[0].length>2&&(p.data.groups=[this.dataset.selectRow(0).slice(1)])),2===this.data()[0].length&&(p.legend.show=!1,y=!0),(0,o.each)(this.data()[0],function(t,e){e>0&&p.data.columns.push(this.dataset.selectColumn(e))}.bind(this))),y){var m=this.el().querySelector(".keen-c3-legend");m&&(m.remove(),p.size.width=this.el().querySelector(".c3-chart").offsetWidth),p.legend.show=!1}if(p.partialIntervalIndicator&&p.partialIntervalIndicator.show&&["area","area-spline","area-step","line","spline","step"].indexOf(p.type)>-1){var b=p.data.columns&&p.data.columns[0];if(b&&b.length>1){var x={axis:"x",start:new Date(b[b.length-2]),class:p.partialIntervalIndicator.className};p.regions=[].concat(M(p.regions||[]),[x])}}if(p.tooltip&&!1===p.tooltip.show||!(!0===p.legend.show||p.legend&&p.legend.tooltip&&p.legend.tooltip.show)||(p.tooltip={contents:u.default,format:{title:this.config.tooltip.format.title,value:function(e,r,i,o){var a=function(t,e,n,r){var i=this.config.type;if(!this.view._artifacts.pagination||"gauge"===i)return t;var o=this.view._artifacts.pagination.labels;return o.indexOf(n)>-1?t:void 0}.call(t,e,r,i,o);return t.config.tooltip&&t.config.tooltip.format&&t.config.tooltip.format.value?(a=t.config.tooltip.format.value.call(t,a,r,i,o),"percent"!==p.stacking||"bar"!==n&&"horizontal-bar"!==n&&"area"!==n&&"area-step"!==n&&"area-spline"!==n||(a=parseFloat((a/100*h[o]).toFixed(2))),p.range&&"Max"===i&&(a+=t.dataset.matrix[o+1][2]),a):"percent"!==p.stacking||"bar"!==n&&"horizontal-bar"!==n&&"area"!==n&&"area-step"!==n&&"area-spline"!==n?(p.range&&"Max"===i&&(a+=t.dataset.matrix[o+1][2]),a):(a=(a/100*h[o]).toFixed(2),parseFloat(a))}}}),!0===p.legend.show){var w=r({},p);w.data.color=function(t,e){var n=this.config.type;if(this.view._artifacts.pagination&&"gauge"!==n){var r=this.view._artifacts.pagination.labels;return e.id&&r.indexOf(e.id)>-1||e&&!e.id&&r.indexOf(e)>-1?t:"donut"===n||"pie"===n?"rgba(0,0,0,.1)":"rgba(0,0,0,.07)"}return t}.bind(this),w.legend.hide=!0,this.view._artifacts.c3=i.default.generate(w),c.default.call(this,r({},p,{onLegendRendered:function(){var n=t.el().querySelector(".keen-c3-legend");n&&("top"===p.legend.position||"bottom"===p.legend.position?(w.size.height-=n.offsetHeight,t.view._artifacts.c3.resize({height:w.size.height})):(0===w.size.width&&(w.size.width=t.el().offsetWidth-e(t.el(),"Left")-e(t.el(),"Right")),w.size.width-=n.offsetWidth,t.view._artifacts.c3.resize({width:w.size.width})))},onPaginated:function(){t.view._artifacts.c3.flush()}}))}else this.view._artifacts.c3=i.default.generate(p)}else{var _="No data to display",k=this.config.errorMapping[_]||_;this.config.showErrorMessages&&this.message(k)}},update:function(){this.render()},destroy:function(){this.view._artifacts.c3&&(this.view._artifacts.c3.destroy(),this.view._artifacts.c3=null)}}}),t}()};var i=_(n(9)),o=n(0),a=(n(5),n(15)),s=_(n(10)),l=_(n(32)),c=_(n(33)),u=_(n(34)),f=_(n(35)),d=n(36),p=_(n(37)),h=_(n(41)),g=_(n(42)),v=_(n(43)),y=_(n(44)),m=_(n(45)),b=_(n(46)),x=_(n(47)),w=_(n(48));function _(t){return t&&t.__esModule?t:{default:t}}function M(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=Math.abs(new Date(t).getTime()-new Date(e).getTime()),r=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"];return n>=24192e5?function(t){var e=new Date(t);return r[e.getMonth()]+" "+e.getFullYear()}:n>=864e5?function(t){var e=new Date(t);return r[e.getMonth()]+" "+e.getDate()}:n>=36e5?"%I:%M %p":"%I:%M:%S %p"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=function(t){var e=t.data.columns,n=this,i=this.view._artifacts.c3,o=[],s=this.el().querySelector("."+n.config.theme+"-rendering"),l=n.config.legend,c=this.view._artifacts.pagination=r({hidden:[],labels:[],offset:0,limit:Math.round((s.offsetHeight-78)/20),total:0},l.pagination);if(t.legend.sort){o=t.legend.sort(e);var u=[];"x"===e[0][0]&&u.push(e[0]),o.forEach(function(e){var n=t.data.columns.find(function(t){return t[0]===e});u.push(n)}),t.data.columns=u}else for(var f=0;f<e.length;f++)"x"===e[f][0]||(0,a.default)(e[f][1])||o.push(e[f][0]);var d=this.el().querySelector(".keen-c3-legend"),p="vertical";"top"!==l.position&&"bottom"!==l.position||(p="horizontal");var h=document.createElement("div");h.setAttribute("class","keen-c3-legend-pagination-icons keen-c3-legend-horizontal-pagination-left"),"horizontal"===p&&d.append(h);var g=document.createElement("div");g.setAttribute("class","keen-c3-legend-items keen-c3-legend-"+p+"-items"),d.append(g);var v=document.createElement("div");v.setAttribute("class","keen-c3-legend-pagination keen-c3-legend-pagination-icons"),"vertical"===p&&d.append(v);var y=document.createElement("div");function m(){c.labels=o.slice(c.offset,c.offset+c.limit),c.total=o.length,function(){g.innerHTML="",c.labels.forEach(function(e){var n=l.label.textMaxLength?e.slice(0,l.label.textMaxLength-1):e,r=document.createElement("div");r.innerHTML="<span class='legend-item-text'>"+n+"</span>",r.chartPartId=e,r.setAttribute("class","legend-item"),g.append(r);var o=document.createElement("span");o.setAttribute("class","legend-item-color-sample"),o.style.backgroundColor=i.color(r.chartPartId),r.prepend(o);var a=document.createElement("div");r.addEventListener("mouseover",function(e){i.focus(r.chartPartId),l.tooltip.show&&r.chartPartId.length>l.label.textMaxLength&&(a.setAttribute("class","keen-c3-legend-label-overlay keen-c3-legend-position-"+l.position),a.innerHTML=(t.legend.tooltip.pointer?"<div class='overlay-pointer'></div>":"")+r.chartPartId,r.append(a))}),r.addEventListener("mouseout",function(t){i.revert(),a.remove()}),r.addEventListener("click",function(t){var e=1,n=c.hidden.indexOf(r.chartPartId);n<0?(c.hidden.push(r.chartPartId),e=.35):(c.hidden.splice(n,1),e=1),r.style.opacity=e,i.toggle(r.chartPartId)})}),t.onLegendRendered&&(t.onLegendRendered(),t.onLegendRendered=null)}.call(n,c.labels),c.total>c.limit&&function(){v.innerHTML="",h.innerHTML="",y.innerHTML="";var t=document.createElement("i"),e=document.createElement("i"),n=function(t){if("forward"===t){var e=c.offset+c.limit;return e<c.total?void(c.offset=e):void(c.offset=0)}var n=c.offset-c.limit;c.offset=n>=0?n:Math.floor(c.total/c.limit)*c.limit};e.addEventListener("click",function(){n("forward"),m(),b()}),t.addEventListener("click",function(){n("backward"),m(),b()}),"left"===l.position||"right"===l.position?(t.setAttribute("class","up"),e.setAttribute("class","down"),v.append(e),v.append(t)):(t.setAttribute("class","left"),e.setAttribute("class","right"),h.append(t),y.append(e))}.call(n),t.onPaginated&&t.onPaginated()}function b(){document.selection&&document.selection.empty?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()}y.setAttribute("class","keen-c3-legend-pagination-icons keen-c3-legend-horizontal-pagination-right"),"horizontal"===p&&d.append(y),m()};!function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);e.default=t}(n(2));var i,o=n(10),a=(i=o)&&i.__esModule?i:{default:i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,i){for(var o=void 0,a=void 0,s=this.config.tooltip_format_name||function(t){return t},l=this.config.tooltip_format_title||e,c=this.config.tooltip_format_value||n,u=0;u<t.length;u++)if(t[u]&&(t[u].value||0===t[u].value)){o||(a=l?l(t[u].x):t[u].x,o="<table class='"+this.CLASS.tooltip+"'>"+(a||0===a?"<tr><th colspan='2'>"+(0,r.escapeHtml)(a)+"</th></tr>":""));var f=s(t[u].name),d=c(t[u].value,t[u].ratio,t[u].id,t[u].index),p=this.levelColor?this.levelColor(t[u].value):i(t[u].id);d&&!isNaN(d)&&(o+="<tr class='"+this.CLASS.tooltipName+"-"+t[u].id+"'>",-1===f.indexOf("__tooltip_ignore_name_field__")&&(o+="<td class='name'><span style='background-color:"+p+"'></span>"+(0,r.escapeHtml)(f)+"</td>"),o+="<td class='value'>"+(0,r.escapeHtml)(d)+"</td>",o+="</tr>")}return o+"</table>"};var r=n(4)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.slice(1).map(function(t){return t.map(function(e,n){return"number"==typeof e&&1===n?e-t[n+1]:e})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.calculateSumForPercents=function(t){var e=[];return t.slice(1).forEach(function(t,n){t.forEach(function(t){if("number"==typeof t){if(!e[n])return e[n]=t,e[n];e[n]+=t}return e[n]})}),e},e.calculatePercents=function(t,e){return t.slice(1).map(function(t,n){return t.map(function(t){return"number"==typeof t?t/e[n]*100:t})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=a(n(16)),o=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}e.default={render:function(t){var e=document.createElement("div"),n=document.createElement("div"),a=document.createElement("span"),s=document.createElement("div"),l=document.createElement("div");e.className=this.config.theme+" keen-dataviz-box",n.className=this.config.theme+"-message",s.className=this.config.theme+"-title",s.innerHTML=(0,r.escapeHtml)(this.config.title||""),l.className=this.config.theme+"-notes",l.innerHTML=(0,r.escapeHtml)(this.config.notes||""),a.innerHTML=(0,r.escapeHtml)(t)||"",n.appendChild(a),this.config.title&&this.config.showTitle&&e.appendChild(s),e.appendChild(n),this.config.notes&&e.appendChild(l),this.config.ui&&this.config.ui.buttons&&this.config.ui.buttons.download&&this.config.ui.buttons.download.type&&(0,i.default)({element:this.el(),data:(0,r.escapeHtml)(t)||"",type:this.config.ui.buttons.download.type,label:this.config.ui.buttons.download.label}),this.config.utils&&this.config.utils.clickToCopyToClipboard&&(s.addEventListener("click",function(t){return(0,o.default)(t.target.innerText,t)}),l.addEventListener("click",function(t){return(0,o.default)(t.target.innerText,t)}),a.addEventListener("click",function(t){return(0,o.default)(t.target.innerText,t)})),this.el().innerHTML="",this.el().appendChild(e)},update:function(){this.render()},destroy:function(){}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.event,n=t.type,r=t.data;e.preventDefault();var i=n.toLowerCase();if(!["json","csv","jpg","jpeg","png"].includes(n))throw new Error("This type is not supported");var a="",s="";if("png"===i)return void(0,o.default)({node:e.currentTarget.previousElementSibling});if("jpg"===i||"jpeg"===i)return void(0,o.default)({node:e.currentTarget.previousElementSibling,quality:1,bgcolor:"#fff"});"json"===i&&(s="data:text/json;charset=utf-8, "+encodeURIComponent(JSON.stringify(r)),a=i);"csv"===i&&(s=function(t){var e="data:text/csv;charset=utf-8,";return t.forEach(function(n,r){n.forEach(function(t,r){e+=String(t).replace(/,/g,""),n.length>r+1&&(e+=",")}),t.length>r+1&&(e+="\n")}),e}(r));var l=document.createElement("a");l.setAttribute("href",s),l.setAttribute("download","chart."+a),document.body.appendChild(l),l.click(),document.body.removeChild(l)};var r,i=n(17),o=(r=i)&&r.__esModule?r:{default:r}},function(t,e,n){!function(e){"use strict";var n=function(){return{escape:function(t){return t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:e,mimeType:function(t){var n=e(t).toLowerCase();return(r="application/font-woff",{woff:r,woff2:r,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"})[n]||"";var r},dataAsUrl:function(t,e){return"data:"+e+";base64,"+t},isDataUrl:function(t){return-1!==t.search(/^(data:)/)},canvasToBlob:function(t){return t.toBlob?new Promise(function(e){t.toBlob(e)}):function(t){return new Promise(function(e){for(var n=window.atob(t.toDataURL().split(",")[1]),r=n.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=n.charCodeAt(o);e(new Blob([i],{type:"image/png"}))})}(t)},resolveUrl:function(t,e){var n=document.implementation.createHTMLDocument(),r=n.createElement("base");n.head.appendChild(r);var i=n.createElement("a");return n.body.appendChild(i),r.href=e,i.href=t,i.href},getAndEncode:function(t){var e=3e4;s.impl.options.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime());return new Promise(function(n){var r,i=new XMLHttpRequest;if(i.onreadystatechange=function(){if(4!==i.readyState)return;if(200!==i.status)return void(r?n(r):a("cannot fetch resource: "+t+", status: "+i.status));var e=new FileReader;e.onloadend=function(){var t=e.result.split(/,/)[1];n(t)},e.readAsDataURL(i.response)},i.ontimeout=function(){r?n(r):a("timeout of "+e+"ms occured while fetching resource: "+t)},i.responseType="blob",i.timeout=e,i.open("GET",t,!0),i.send(),s.impl.options.imagePlaceholder){var o=s.impl.options.imagePlaceholder.split(/,/);o&&o[1]&&(r=o[1])}function a(t){console.error(t),n("")}})},uid:(t=0,function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+t++}),delay:function(t){return function(e){return new Promise(function(n){setTimeout(function(){n(e)},t)})}},asArray:function(t){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e},escapeXhtml:function(t){return t.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src=t})},width:function(t){var e=n(t,"border-left-width"),r=n(t,"border-right-width");return t.scrollWidth+e+r},height:function(t){var e=n(t,"border-top-width"),r=n(t,"border-bottom-width");return t.scrollHeight+e+r}};var t;function e(t){var e=/\.([^\.\/]*?)$/g.exec(t);return e?e[1]:""}function n(t,e){var n=window.getComputedStyle(t).getPropertyValue(e);return parseFloat(n.replace("px",""))}}(),r=function(){var t=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(t,n,o){return e(t)?Promise.resolve(t).then(r).then(function(e){var r=Promise.resolve(t);return e.forEach(function(t){r=r.then(function(e){return i(e,t,n,o)})}),r}):Promise.resolve(t)},shouldProcess:e,impl:{readUrls:r,inline:i}};function e(e){return-1!==e.search(t)}function r(e){for(var r,i=[];null!==(r=t.exec(e));)i.push(r[1]);return i.filter(function(t){return!n.isDataUrl(t)})}function i(t,e,r,i){return Promise.resolve(e).then(function(t){return r?n.resolveUrl(t,r):t}).then(i||n.getAndEncode).then(function(t){return n.dataAsUrl(t,n.mimeType(e))}).then(function(r){return t.replace(function(t){return new RegExp("(url\\(['\"]?)("+n.escape(t)+")(['\"]?\\))","g")}(e),"$1"+r+"$3")})}}(),i=function(){return{resolveAll:function(){return t(document).then(function(t){return Promise.all(t.map(function(t){return t.resolve()}))}).then(function(t){return t.join("\n")})},impl:{readAll:t}};function t(){return Promise.resolve(n.asArray(document.styleSheets)).then(function(t){var e=[];return t.forEach(function(t){try{n.asArray(t.cssRules||[]).forEach(e.push.bind(e))}catch(e){console.log("Error while reading CSS rules from "+t.href,e.toString())}}),e}).then(function(t){return t.filter(function(t){return t.type===CSSRule.FONT_FACE_RULE}).filter(function(t){return r.shouldProcess(t.style.getPropertyValue("src"))})}).then(function(e){return e.map(t)});function t(t){return{resolve:function(){var e=(t.parentStyleSheet||{}).href;return r.inlineAll(t.cssText,e)},src:function(){return t.style.getPropertyValue("src")}}}}}(),o=function(){return{inlineAll:function e(i){if(!(i instanceof Element))return Promise.resolve(i);return function(t){var e=t.style.getPropertyValue("background");return e?r.inlineAll(e).then(function(e){t.style.setProperty("background",e,t.style.getPropertyPriority("background"))}).then(function(){return t}):Promise.resolve(t)}(i).then(function(){return i instanceof HTMLImageElement?t(i).inline():Promise.all(n.asArray(i.childNodes).map(function(t){return e(t)}))})},impl:{newImage:t}};function t(t){return{inline:function(e){return n.isDataUrl(t.src)?Promise.resolve():Promise.resolve(t.src).then(e||n.getAndEncode).then(function(e){return n.dataAsUrl(e,n.mimeType(t.src))}).then(function(e){return new Promise(function(n,r){t.onload=n,t.onerror=r,t.src=e})})}}}}(),a={imagePlaceholder:void 0,cacheBust:!1},s={toSvg:l,toPng:function(t,e){return c(t,e||{}).then(function(t){return t.toDataURL()})},toJpeg:function(t,e){return c(t,e=e||{}).then(function(t){return t.toDataURL("image/jpeg",e.quality||1)})},toBlob:function(t,e){return c(t,e||{}).then(n.canvasToBlob)},toPixelData:function(t,e){return c(t,e||{}).then(function(e){return e.getContext("2d").getImageData(0,0,n.width(t),n.height(t)).data})},impl:{fontFaces:i,images:o,util:n,inliner:r,options:{}}};function l(t,e){return function(t){void 0===t.imagePlaceholder?s.impl.options.imagePlaceholder=a.imagePlaceholder:s.impl.options.imagePlaceholder=t.imagePlaceholder;void 0===t.cacheBust?s.impl.options.cacheBust=a.cacheBust:s.impl.options.cacheBust=t.cacheBust}(e=e||{}),Promise.resolve(t).then(function(t){return function(t,e,r){if(!r&&e&&!e(t))return Promise.resolve();return Promise.resolve(t).then(function(t){return t instanceof HTMLCanvasElement?n.makeImage(t.toDataURL()):t.cloneNode(!1)}).then(function(r){return function(t,e,r){var i=t.childNodes;return 0===i.length?Promise.resolve(e):function(t,e,n){var r=Promise.resolve();return e.forEach(function(e){r=r.then(function(){return u(e,n)}).then(function(e){e&&t.appendChild(e)})}),r}(e,n.asArray(i),r).then(function(){return e})}(t,r,e)}).then(function(e){return function(t,e){return e instanceof Element?Promise.resolve().then(function(){var r,i;r=window.getComputedStyle(t),i=e.style,r.cssText?i.cssText=r.cssText:function(t,e){n.asArray(t).forEach(function(n){e.setProperty(n,t.getPropertyValue(n),t.getPropertyPriority(n))})}(r,i)}).then(function(){[":before",":after"].forEach(function(r){!function(r){var i=window.getComputedStyle(t,r),o=i.getPropertyValue("content");if(""!==o&&"none"!==o){var a=n.uid();e.className=e.className+" "+a;var s=document.createElement("style");s.appendChild(function(t,e,r){var i="."+t+":"+e,o=r.cssText?function(t){var e=t.getPropertyValue("content");return t.cssText+" content: "+e+";"}(r):function(t){return n.asArray(t).map(function(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")}).join("; ")+";"}(r);return document.createTextNode(i+"{"+o+"}")}(a,r,i)),e.appendChild(s)}}(r)})}).then(function(){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value),t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}).then(function(){e instanceof SVGElement&&(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e instanceof SVGRectElement&&["width","height"].forEach(function(t){var n=e.getAttribute(t);n&&e.style.setProperty(t,n)}))}).then(function(){return e}):e}(t,e)})}(t,e.filter,!0)}).then(f).then(d).then(function(t){e.bgcolor&&(t.style.backgroundColor=e.bgcolor);e.width&&(t.style.width=e.width+"px");e.height&&(t.style.height=e.height+"px");e.style&&Object.keys(e.style).forEach(function(n){t.style[n]=e.style[n]});return t}).then(function(r){return function(t,e,r){return Promise.resolve(t).then(function(t){return t.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(t)}).then(n.escapeXhtml).then(function(t){return'<foreignObject x="0" y="0" width="100%" height="100%">'+t+"</foreignObject>"}).then(function(t){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+r+'">'+t+"</svg>"}).then(function(t){return"data:image/svg+xml;charset=utf-8,"+t})}(r,e.width||n.width(t),e.height||n.height(t))})}function c(t,e){return l(t,e).then(n.makeImage).then(n.delay(100)).then(function(r){var i=function(t){var r=document.createElement("canvas");if(r.width=e.width||n.width(t),r.height=e.height||n.height(t),e.bgcolor){var i=r.getContext("2d");i.fillStyle=e.bgcolor,i.fillRect(0,0,r.width,r.height)}return r}(t);return i.getContext("2d").drawImage(r,0,0),i})}function u(t,e,r){if(!r&&e&&!e(t))return Promise.resolve();return Promise.resolve(t).then(i).then(function(n){return o(t,n,e)}).then(function(e){return a(t,e)});function i(t){return t instanceof HTMLCanvasElement?n.makeImage(t.toDataURL()):t.cloneNode(!1)}function o(t,e,r){var i=t.childNodes;return 0===i.length?Promise.resolve(e):function(t,e,n){var r=Promise.resolve();return e.forEach(function(e){r=r.then(function(){return u(e,n)}).then(function(e){e&&t.appendChild(e)})}),r}(e,n.asArray(i),r).then(function(){return e});function o(t,e,n){var r=Promise.resolve();return e.forEach(function(e){r=r.then(function(){return u(e,n)}).then(function(e){e&&t.appendChild(e)})}),r}}function a(t,e){return e instanceof Element?Promise.resolve().then(function(){!function(t,e){t.cssText?e.cssText=t.cssText:function(t,e){n.asArray(t).forEach(function(n){e.setProperty(n,t.getPropertyValue(n),t.getPropertyPriority(n))})}(t,e)}(window.getComputedStyle(t),e.style)}).then(function(){[":before",":after"].forEach(function(r){!function(r){var i=window.getComputedStyle(t,r),o=i.getPropertyValue("content");if(""===o||"none"===o)return;var a=n.uid();e.className=e.className+" "+a;var s=document.createElement("style");s.appendChild(function(t,e,r){var i="."+t+":"+e,o=r.cssText?function(t){var e=t.getPropertyValue("content");return t.cssText+" content: "+e+";"}(r):function(t){return n.asArray(t).map(function(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")}).join("; ")+";"}(r);return document.createTextNode(i+"{"+o+"}")}(a,r,i)),e.appendChild(s)}(r)})}).then(function(){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value);t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}).then(function(){if(!(e instanceof SVGElement))return;if(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),!(e instanceof SVGRectElement))return;["width","height"].forEach(function(t){var n=e.getAttribute(t);n&&e.style.setProperty(t,n)})}).then(function(){return e}):e;function r(){function r(t,e){if(t.cssText)e.cssText=t.cssText;else r(t,e);function r(t,e){n.asArray(t).forEach(function(n){e.setProperty(n,t.getPropertyValue(n),t.getPropertyPriority(n))})}}r(window.getComputedStyle(t),e.style)}function i(){function r(r){var i=window.getComputedStyle(t,r),o=i.getPropertyValue("content");if(o===""||o==="none")return;var a=n.uid();e.className=e.className+" "+a;var s=document.createElement("style");function l(t,e,r){var i="."+t+":"+e,o=r.cssText?a(r):s(r);return document.createTextNode(i+"{"+o+"}");function a(t){var e=t.getPropertyValue("content");return t.cssText+" content: "+e+";"}function s(t){return n.asArray(t).map(e).join("; ")+";";function e(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")}}}s.appendChild(l(a,r,i)),e.appendChild(s)}[":before",":after"].forEach(function(t){r(t)})}function o(){if(t instanceof HTMLTextAreaElement)e.innerHTML=t.value;if(t instanceof HTMLInputElement)e.setAttribute("value",t.value)}function a(){if(!(e instanceof SVGElement))return;if(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),!(e instanceof SVGRectElement))return;["width","height"].forEach(function(t){var n=e.getAttribute(t);if(!n)return;e.style.setProperty(t,n)})}}}function f(t){return i.resolveAll().then(function(e){var n=document.createElement("style");return t.appendChild(n),n.appendChild(document.createTextNode(e)),t})}function d(t){return o.inlineAll(t).then(function(){return t})}t.exports=s}()},function(t,e,n){(function(n){var r,i,o;i=[],void 0===(o="function"==typeof(r=function(){"use strict";function e(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){a(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,a=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(t,n,a){var s=o.URL||o.webkitURL,l=document.createElement("a");n=n||t.name||"download",l.download=n,l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?i(l):r(l.href)?e(t,n,a):i(l,l.target="_blank")):(l.href=s.createObjectURL(t),setTimeout(function(){s.revokeObjectURL(l.href)},4e4),setTimeout(function(){i(l)},0))}:"msSaveOrOpenBlob"in navigator?function(t,n,o){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,o),n);else if(r(t))e(t,n,o);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout(function(){i(a)})}}:function(t,n,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,r);var a="application/octet-stream"===t.type,s=/constructor/i.test(o.HTMLElement)||o.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&s)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var t=c.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location=t,i=null},c.readAsDataURL(t)}else{var u=o.URL||o.webkitURL,f=u.createObjectURL(t);i?i.location=f:location.href=f,i=null,setTimeout(function(){u.revokeObjectURL(f)},4e4)}});o.saveAs=a.saveAs=a,t.exports=a})?r.apply(e,i):r)||(t.exports=o)}).call(this,n(11))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(3),o=n(4),a=n(1),s=(r=a)&&r.__esModule?r:{default:r};e.default={render:function(){this.config.colors[0];var t=this.config.theme,e=this.config.title,n=this.config,r="-",a="",l="",c="",u=void 0,f="",d="",p="",h="",g=this.config,v=g.results,y=g.previousResults;if(v&&y&&(f=y?" metric-comparison":"",h=y&&e?"-smaller":"",p=(d=v.result-y.result)>0?"-green":"-red",d=Math.abs(d)),"number"==typeof this.data()[1][1]&&(r=this.data()[1][1]),u=r,void 0!==n.prettyNumber&&!0!==n.prettyNumber||isNaN(parseInt(r))||(u=(0,i.prettyNumber)(r),v&&y&&(d=(0,i.prettyNumber)(d))),n.prefix&&(l='<span class="'+t+'-metric-prefix">'+n.prefix+"</span>"),n.suffix&&(c='<span class="'+t+'-metric-suffix">'+n.suffix+"</span>"),a+='<div class="'+t+'">',a+='<div class="'+t+"-metric keen-dataviz-box"+f+'" title="'+(0,o.escapeHtml)(r)+'">',v&&y&&(a+='<div class="'+t+"-metric"+p+'"><div class="arrow'+p+'"> </div>'+(0,o.escapeHtml)(d)+"</div>"),a+='<div class="'+t+"-metric-value"+h+'">'+l+(0,o.escapeHtml)(u)+c+"</div>",e&&(a+='<div class="'+t+'-metric-title">'+(0,o.escapeHtml)(e)+"</div>"),a+="</div>",a+="</div>",this.el().innerHTML=a,this.config.onrendered&&this.config.onrendered(),this.config.utils&&this.config.utils.clickToCopyToClipboard){var m="."+t+"-metric-value"+h;if(document.querySelector(m).addEventListener("click",function(t){return(0,s.default)(t.target.innerText,t)}),v&&y){var b="."+t+"-metric"+p;document.querySelector(b).addEventListener("click",function(t){return(0,s.default)(t.target.innerText,t)})}}},update:function(){this.render()},destroy:function(){}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(4),s=n(1),l=(r=s)&&r.__esModule?r:{default:r};var c=void 0;function u(t,e){var n="",r={};t.config.table&&t.config.table.pagination&&(r=t.config.table.pagination);var s=o({},{page:1,limit:0,arrows:!0},r);c||(c=s.page);var l=void 0,u=0;if(0===s.limit)l=e.slice(1);else{var f=s.limit*(c-1)+1,d=f+s.limit;l=e.slice(f,d),u=Math.ceil((e.length-1)/s.limit)}var p=t.config.table.columns?t.config.table.columns:t.dataset.matrix[0],h={},g=t.config.table,v=g.mapValues,y=g.mapDates;for(var m in v)h[p.indexOf(m)]=m;var b=!0,x=!1,w=void 0;try{for(var _,M=l[Symbol.iterator]();!(b=(_=M.next()).done);b=!0){var k=_.value;n+='<tr class="table-data-row">';var E=!0,A=!1,S=void 0;try{for(var P,j=k.entries()[Symbol.iterator]();!(E=(P=j.next()).done);E=!0){var T=P.value,O=i(T,2),C=O[0],D=O[1];y&&D instanceof Date&&(D=y(D));var z=(0,a.escapeHtml)(D);h[C]?n+="<td>"+v[h[C]](z)+"</td>":n+="<td>"+z+"</td>"}}catch(t){A=!0,S=t}finally{try{!E&&j.return&&j.return()}finally{if(A)throw S}}n+="</tr>"}}catch(t){x=!0,w=t}finally{try{!b&&M.return&&M.return()}finally{if(x)throw w}}if(u>1){n+='<tr class="table-pagination"><td colspan="999">';var L=1,N=1===c?1:c-1,I=c===u?u:c+1;for(s.arrows&&(n+='<a class="arrow btn" data-page="'+N+'"><</a>');L<=u;)n+='<a class="btn '+(L===c?"active":"")+'" data-page="'+L+'">'+L+"</a>",L++;s.arrows&&(n+='<a class="arrow btn" data-page="'+I+'">></a>'),n+="</td></tr>"}return n}e.default={render:function(){var t=this,e=this.dataset.matrix,n=this.el(),r=this.config.theme,i=this,o="";if(1===e.length&&0===e[0].length){var s="No data to display",f=this.config.errorMapping[s]||s;this.config.showErrorMessages&&this.message(f)}else{o+='<div class="'+r+'-table">',o+='<table class="'+r+'-table-dataset">',o+="<thead>",o+="<tr>",o+=function(t,e){var n="",r=-1,i=t.config.table,o=i&&i.columns||e[0],s=!0,l=!1,c=void 0;try{for(var u,f=o[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var d=u.value,p=(0,a.escapeHtml)(d);n+='<th fieldNumber="'+(r+=1)+'">'+p+"</th>"}}catch(t){l=!0,c=t}finally{try{!s&&f.return&&f.return()}finally{if(l)throw c}}return n}(i,e),o+="</tr>",o+="</thead>",o+="<tbody>",o+=u(i,e),o+="</tbody>",o+="</table>",o+="</div>",n.querySelector("."+r+"-rendering").innerHTML=o,n.querySelectorAll("."+r+"-rendering th").forEach(function(o){o.addEventListener("click",function(o){var a=o.target.getAttribute("order")||"asc",s=o.target.getAttribute("fieldNumber");a="asc"===a?"desc":"asc",o.target.setAttribute("order",a);var l=t.dataset.matrix.shift();t.dataset.matrix.sort(function(t,e){var n="asc"===a?1:-1;if("string"==typeof t[s]){var r=t[s].toUpperCase(),i=e[s].toUpperCase();return r<i?-1*n:r>i?1*n:0}return(t[s]-e[s])*n}),t.dataset.matrix.unshift(l),n.querySelector("."+r+"-rendering tbody").innerHTML=u(i,e),d()})});var d=function t(){n.querySelectorAll(".btn").forEach(function(o){o.addEventListener("click",function(o){c=parseInt(o.target.getAttribute("data-page")),n.querySelector("."+r+"-rendering tbody").innerHTML=u(i,e),t()},!0)})};if(d(i,n,r),this.config.onrendered&&this.config.onrendered(),this.config.utils&&this.config.utils.clickToCopyToClipboard){var p="."+r+"-table-dataset";document.querySelector(p).addEventListener("click",function(t){var e=t.target,n=e.nodeName,r=e.innerText;"TD"===n&&(0,l.default)(r,t)})}}},update:function(){this.render()},destroy:function(){}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={render:function(){var t="";this.view._artifacts.spinner={};t+='<div class="'+this.config.theme+'">',t+='<div class="keen-spinner-container keen-dataviz-box">',t+='<div class="keen-spinner-indicator"></div>',t+="</div>",t+="</div>",this.el().innerHTML=t},update:function(){this.render()},destroy:function(){if(this.view._artifacts.spinner){this.view._artifacts.spinner.interval&&clearInterval(this.view._artifacts.spinner.interval),this.view._artifacts.spinner.radius=0;try{delete this.view._artifacts.spinner}catch(t){this.view._artifacts.spinner=void 0}}this.el().innerHTML=""}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2)),a=n(6),s=n(3),l=n(1),c=(r=l)&&r.__esModule?r:{default:r};var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"render",value:function(){var t=this.dataset.matrix,e=this.config,n=e.colors,r=e.container,i=e.labelMapping,l=e.colorMapping,u=e.utils,f=this.config,d=this.config.funnel,p=d.percents,h=p.show,g=p.countingMethod,v=p.decimals,y=d.lines,m=d.marginBetweenSteps,b=d.resultValues,x=d.hover,w=d.minimalSize,_=20,M=30,k=30,E=200,A=0;m&&(A=5);var S=o.select(r),P=o.select(this.el().querySelector("."+this.config.theme+"-rendering .c3-chart")).append("svg"),j=S.style("width").slice(0,-2)-M-E,T=S.style("height").slice(0,-2)-_-k-30,O=T/(t.length-1),C=j,D=100..toFixed(v),z=0;w&&(z=(j-w)/(t.length-2));var L=t.slice(1).map(function(e,n){var r=[{x:(j-C)/2,y:O*n+A},{x:(j-C)/2+C,y:O*n+A}];0!==n&&("relative"===g&&(w?C-=z:C=C*e[1]/t[n][1],D=(e[1]/t[n][1]*100).toFixed(v)),"absolute"===g&&(w?C-=z:C=j*e[1]/t[1][1],D=(e[1]/t[1][1]*100).toFixed(v)));var o=e[0];if(Object.keys(i).length)for(var a in i)i[a]===e[0]&&(o=a);var l=e[1];return void 0!==f.prettyNumber&&!0!==f.prettyNumber||isNaN(parseInt(e[1]))||(l=(0,s.prettyNumber)(e[1])),{name:e[0],label:o,percent:D+"%",result:l,points:[].concat(r,[{x:(j-C)/2+C,y:O*(n+1)},{x:(j-C)/2,y:O*(n+1)}])}});if(P.attr("preserveAspectRatio","xMidYMid slice").attr("viewBox","0 0 "+(j+E+M)+" "+(T+_+k-30)).attr("height","100%").attr("width","100%").append("g").attr("transform","translate("+E+","+_+")").selectAll("polygon").data(L).enter().append("polygon").attr("points",function(t){return t.points.map(function(t){return[t.x,t.y].join(",")}).join(" ")}).style("fill",function(t,e){return l[t.label]?l[t.label]:n[e]}).attr("class",function(t){return t.label}).attr("cursor","pointer"),y&&(P.selectAll("line").data(L).enter().append("line").attr("x1",10).attr("y1",function(t){return t.points[0].y+_-A/2}).attr("x2",function(t){return t.points[1].x+E}).attr("y2",function(t){return t.points[0].y+_-A/2}).attr("class","chart-lines"),P.append("line").attr("x1",10).attr("y1",L[L.length-1].points[2].y+_+A/2).attr("x2",L[L.length-1].points[2].x+E).attr("y2",L[L.length-1].points[2].y+_+A/2).attr("class","chart-lines")),y&&P.selectAll("text.label").data(L).enter().append("text").style("text-anchor","start").attr("x",20).attr("y",function(t){return(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+A+5}).attr("class",function(t){return"text-label "+t.label}).text(function(t){return t.name}).call(a.textWrap,E).attr("cursor","pointer"),y||P.selectAll("text.label").data(L).enter().append("text").style("text-anchor","end").attr("x",function(t){return t.points[0].x+(t.points[3].x-t.points[0].x)/2+.9*E}).attr("y",function(t){return(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+A+5}).attr("class",function(t){return"text-label "+t.label}).text(function(t){return t.name}).call(a.textWrap,E).attr("cursor","pointer"),h&&!b&&P.selectAll("text.label").data(L).enter().append("text").style("text-anchor","middle").attr("x",j/2+E).attr("y",function(t){return(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+A+8}).attr("class",function(t){return"text-main "+t.label}).text(function(t){return t.percent}).attr("cursor","pointer"),b&&!h&&P.selectAll("text.label").data(L).enter().append("text").style("text-anchor","middle").attr("x",j/2+E).attr("y",function(t){return(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+A+8}).attr("class",function(t){return"text-main "+t.label}).text(function(t){return t.result}).attr("cursor","pointer"),h&&b&&(P.selectAll("text.label").data(L).enter().append("text").style("text-anchor","middle").attr("x",j/2+E).attr("y",function(t){return 0===A?(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+16:(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+A+12}).attr("class",function(t){return"text-second "+t.label}).text(function(t){return t.percent}).attr("cursor","pointer"),P.selectAll("text.label").data(L).enter().append("text").style("text-anchor","middle").attr("x",j/2+E).attr("y",function(t){return 0===A?(t.points[2].y-t.points[1].y)/2+t.points[1].y+_:(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+A-5}).attr("class",function(t){return"text-main "+t.label}).text(function(t){return t.result}).attr("cursor","pointer")),x){var N=function(t){R.style("opacity",.5),H.style("opacity",.5);var e=/[^ ]*$/.exec(o.select(this).attr("class"))[0];P.selectAll("."+e).style("opacity",1)},I=function(t){R.style("opacity",1),H.style("opacity",1)},R=P.selectAll("polygon");R.on("mouseover",N).on("mouseout",I);var H=P.selectAll("text");H.on("mouseover",N).on("mouseout",I)}if(u&&u.clickToCopyToClipboard){P.selectAll("text").on("click",function(t){var e=t.percent,n=t.result;b?(0,c.default)(n,o.event):h&&(0,c.default)(e,o.event)})}}},{key:"update",value:function(){this.destroy(),this.render()}},{key:"destroy",value:function(){o.select(this.el().querySelector("."+this.config.theme+"-rendering .c3-chart")).remove()}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2)),a=n(6),s=n(3),l=n(1),c=(r=l)&&r.__esModule?r:{default:r};var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"render",value:function(){var t=this.dataset.matrix,e=this.config,n=e.colors,r=e.container,i=e.labelMapping,l=e.colorMapping,u=e.utils,f=this.config,d=this.config.funnel,p=d.percents,h=p.show,g=p.countingMethod,v=p.decimals,y=d.lines,m=d.resultValues,b=d.effect3d,x=d.hover,w=d.minimalSize,_=20,M=30,k=60,E=200,A=o.select(r),S=o.select(this.el().querySelector("."+this.config.theme+"-rendering .c3-chart")).append("svg"),P=A.style("width").slice(0,-2)-M-E,j=A.style("height").slice(0,-2)-_-k-30,T=j/(t.length-1),O=.3*T,C=2.5*O,D=P,z=100..toFixed(v),L=0;w&&(L=(P-w)/(t.length-2));var N=t.slice(1).map(function(e,n){var r=[{x:(P-D)/2,y:T*n+O},{x:(P-D)/2+D,y:T*n+O}];0!==n&&("relative"===g&&(w?D-=L:D=D*e[1]/t[n][1],z=(e[1]/t[n][1]*100).toFixed(v)),"absolute"===g&&(w?D-=L:D=P*e[1]/t[1][1],z=(e[1]/t[1][1]*100).toFixed(v)));var o=e[0];if(Object.keys(i).length)for(var a in i)i[a]===e[0]&&(o=a);var l=e[1];return void 0!==f.prettyNumber&&!0!==f.prettyNumber||isNaN(parseInt(e[1]))||(l=(0,s.prettyNumber)(e[1])),{name:e[0],label:o,percent:z+"%",result:l,points:[].concat(r,[{x:(P-D)/2+D,y:T*(n+1)},{x:(P-D)/2,y:T*(n+1)}])}}),I=N.map(function(t,e){return{label:t.label,points:[{x:t.points[3].x,y:t.points[3].y},{x:t.points[2].x,y:t.points[2].y},{x:"left"===b?t.points[2].x:t.points[2].x-C<P/2?P/2+5:t.points[2].x-C,y:"left"===b?t.points[2].y:t.points[2].y+O/1.5},{x:"right"===b?t.points[3].x:t.points[3].x+C>P/2?P/2-5:t.points[3].x+C,y:"right"===b?t.points[3].y:t.points[3].y+O/1.5}]}}),R=N.concat(I);if(S.attr("preserveAspectRatio","xMidYMid meet").attr("viewBox","0 0 "+(P+E+M)+" "+(j+_+k-30)).attr("height","100%").attr("width","100%").append("g").attr("transform","translate("+E+","+_+")").selectAll("polygon").data(R).enter().append("polygon").attr("points",function(t){return t.points.map(function(t){return[t.x,t.y].join(",")}).join(" ")}).style("fill",function(t,e){return e>N.length-1?l[t.label]?o.rgb(l[t.label]).darker(1.5):o.rgb(n[e-N.length]).darker(1.5):l[t.label]?l[t.label]:n[e]}).attr("class",function(t){return t.label}).attr("cursor","pointer"),y&&(S.selectAll("line").data(N).enter().append("line").attr("x1",10).attr("y1",function(t){return t.points[0].y+_-O/5}).attr("x2",function(t,e){return 0===e?t.points[1].x+E:t.points[1].x+E-C}).attr("y2",function(t){return t.points[0].y+_-O/5}).attr("class","chart-lines"),S.append("line").attr("x1",10).attr("y1",N[N.length-1].points[2].y+_+O-O/5).attr("x2",N[N.length-1].points[2].x+E-C).attr("y2",N[N.length-1].points[2].y+_+O-O/5).attr("class","chart-lines")),y&&S.selectAll("text.label").data(N).enter().append("text").style("text-anchor","start").attr("x",20).attr("y",function(t){return(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+5+O/4}).attr("class",function(t){return"text-label "+t.label}).text(function(t){return t.name}).call(a.textWrap,E).attr("cursor","pointer"),y||S.selectAll("text.label").data(N).enter().append("text").style("text-anchor","end").attr("x",function(t){return t.points[0].x+(t.points[3].x-t.points[0].x)/2+130}).attr("y",function(t){return(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+5}).attr("class",function(t){return"text-label "+t.label}).text(function(t){return t.name}).call(a.textWrap,E).attr("cursor","pointer"),h&&!m&&S.selectAll("text.label").data(N).enter().append("text").style("text-anchor","middle").attr("x",P/2+E).attr("y",function(t){return(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+8}).attr("class",function(t){return"text-main "+t.label}).text(function(t){return t.percent}).attr("cursor","pointer"),m&&!h&&S.selectAll("text.label").data(N).enter().append("text").style("text-anchor","middle").attr("x",P/2+E).attr("y",function(t){return(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+8}).attr("class",function(t){return"text-main "+t.label}).text(function(t){return t.result}).attr("cursor","pointer"),h&&m&&(S.selectAll("text.label").data(N).enter().append("text").style("text-anchor","middle").attr("x",P/2+E).attr("y",function(t){return(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+18}).attr("class",function(t){return"text-second "+t.label}).text(function(t){return t.percent}).attr("cursor","pointer"),S.selectAll("text.label").data(N).enter().append("text").style("text-anchor","middle").attr("x",P/2+E).attr("y",function(t){return(t.points[2].y-t.points[1].y)/2+t.points[1].y+_+3}).attr("class",function(t){return"text-main "+t.label}).text(function(t){return t.result}).attr("cursor","pointer")),x){var H=function(t){F.style("opacity",.5),B.style("opacity",.5);var e=/[^ ]*$/.exec(o.select(this).attr("class"))[0];S.selectAll("."+e).style("opacity",1)},q=function(t){F.style("opacity",1),B.style("opacity",1)},F=S.selectAll("polygon");F.on("mouseover",H).on("mouseout",q);var B=S.selectAll("text");B.on("mouseover",H).on("mouseout",q)}if(u&&u.clickToCopyToClipboard){S.selectAll("text").on("click",function(t){var e=t.percent,n=t.result;m?(0,c.default)(n,o.event):h&&(0,c.default)(e,o.event)})}}},{key:"update",value:function(){this.destroy(),this.render()}},{key:"destroy",value:function(){o.select(this.el().querySelector("."+this.config.theme+"-rendering .c3-chart")).remove()}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2)),a=n(6),s=n(3),l=n(1),c=(r=l)&&r.__esModule?r:{default:r};var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"render",value:function(){var t=this.dataset.matrix,e=this.config,n=e.colors,r=e.container,i=e.labelMapping,l=e.colorMapping,u=e.utils,f=this.config,d=this.config.funnel,p=d.percents,h=p.show,g=p.countingMethod,v=p.decimals,y=d.lines,m=d.marginBetweenSteps,b=d.resultValues,x=d.hover,w=d.minimalSize,_=20,M=30,k=100,E=10,A=0;m&&(A=5);var S=o.select(r),P=o.select(this.el().querySelector("."+this.config.theme+"-rendering .c3-chart")).append("svg"),j=S.style("width").slice(0,-2)-M-E,T=S.style("height").slice(0,-2)-_-k-30,O=j/(t.length-1),C=T,D=100..toFixed(v),z=0;w&&(z=(T-w)/(t.length-2));var L=t.slice(1).map(function(e,n){var r=[{x:O*n+A,y:(T-C)/2},{x:O*n+A,y:(T-C)/2+C}];0!==n&&("relative"===g&&(w?C-=z:C=C*e[1]/t[n][1],D=(e[1]/t[n][1]*100).toFixed(v)),"absolute"===g&&(w?C-=z:C=T*e[1]/t[1][1],D=(e[1]/t[1][1]*100).toFixed(v)));var o=e[0];if(Object.keys(i).length)for(var a in i)i[a]===e[0]&&(o=a);var l=e[1];return void 0!==f.prettyNumber&&!0!==f.prettyNumber||isNaN(parseInt(e[1]))||(l=(0,s.prettyNumber)(e[1])),{name:e[0],label:o,percent:D+"%",result:l,points:[].concat(r,[{x:O*(n+1),y:(T-C)/2+C},{x:O*(n+1),y:(T-C)/2}])}});if(P.attr("preserveAspectRatio","xMidYMid meet").attr("viewBox","0 0 "+(j+E+M)+" "+(T+_+k-30)).attr("height","100%").attr("width","100%").append("g").attr("transform","translate("+E+","+_+")").selectAll("polygon").data(L).enter().append("polygon").attr("points",function(t){return t.points.map(function(t){return[t.x,t.y].join(",")}).join(" ")}).style("fill",function(t,e){return l[t.label]?l[t.label]:n[e]}).attr("class",function(t){return t.label}).attr("cursor","pointer"),y&&(P.selectAll("line").data(L).enter().append("line").attr("x1",function(t){return t.points[0].x+E-A/2}).attr("y1",T+k).attr("x2",function(t){return t.points[0].x+E-A/2}).attr("y2",function(t){return t.points[0].y+_}).attr("class","chart-lines"),P.append("line").attr("x1",j+E-A/2).attr("y1",T+k).attr("x2",L[L.length-1].points[3].x+E+A/2).attr("y2",L[L.length-1].points[3].y+_).attr("class","chart-lines")),y&&P.selectAll("text.label").data(L).enter().append("text").style("text-anchor","middle").attr("x",function(t){return t.points[1].x+O/2+E}).attr("y",T+.5*k+_).attr("class",function(t){return"text-label "+t.label}).text(function(t){return t.name}).call(a.textWrap,O).attr("cursor","pointer"),y||P.selectAll("text.label").data(L).enter().append("text").style("text-anchor","middle").attr("x",function(t){return t.points[1].x+O/2+E}).attr("y",function(t){return t.points[2].y+(t.points[3].y-t.points[0].y)/2+O/4>T+k-40+_?T+k-40+_:t.points[2].y+(t.points[3].y-t.points[0].y)/2+O/4+_}).attr("class",function(t){return"text-label "+t.label}).text(function(t){return t.name}).call(a.textWrap,O).attr("cursor","pointer"),h&&!b&&P.selectAll("text.label").data(L).enter().append("text").style("text-anchor","middle").attr("x",function(t){return t.points[1].x+O/2+E}).attr("y",T/2+_+10).attr("class",function(t){return"text-main "+t.label}).text(function(t){return t.percent}).attr("cursor","pointer"),b&&!h&&P.selectAll("text.label").data(L).enter().append("text").style("text-anchor","middle").attr("x",function(t){return t.points[1].x+O/2+E}).attr("y",T/2+_+10).attr("class",function(t){return"text-main "+t.label}).text(function(t){return t.result}).attr("cursor","pointer"),h&&b&&(P.selectAll("text.label").data(L).enter().append("text").style("text-anchor","middle").attr("x",function(t){return t.points[1].x+O/2+E}).attr("y",T/2+_+16).attr("class",function(t){return"text-second "+t.label}).text(function(t){return t.percent}).attr("cursor","pointer"),P.selectAll("text.label").data(L).enter().append("text").style("text-anchor","middle").attr("x",function(t){return t.points[1].x+O/2+E}).attr("y",T/2+_-3).attr("class",function(t){return"text-main "+t.label}).text(function(t){return t.result}).attr("cursor","pointer")),x){var N=function(t){R.style("opacity",.5),H.style("opacity",.5);var e=/[^ ]*$/.exec(o.select(this).attr("class"))[0];P.selectAll("."+e).style("opacity",1)},I=function(t){R.style("opacity",1),H.style("opacity",1)},R=P.selectAll("polygon");R.on("mouseover",N).on("mouseout",I);var H=P.selectAll("text");H.on("mouseover",N).on("mouseout",I)}if(u&&u.clickToCopyToClipboard){P.selectAll("text").on("click",function(t){var e=t.percent,n=t.result;b?(0,c.default)(n,o.event):h&&(0,c.default)(e,o.event)})}}},{key:"update",value:function(){this.destroy(),this.render()}},{key:"destroy",value:function(){o.select(this.el().querySelector("."+this.config.theme+"-rendering .c3-chart")).remove()}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2)),a=n(6),s=n(3),l=n(1),c=(r=l)&&r.__esModule?r:{default:r};var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"render",value:function(){var t=this.dataset.matrix,e=this.config,n=e.colors,r=e.container,i=e.labelMapping,l=e.colorMapping,u=e.utils,f=this.config,d=this.config.funnel,p=d.percents,h=p.show,g=p.countingMethod,v=p.decimals,y=d.lines,m=d.resultValues,b=d.effect3d,x=d.hover,w=d.minimalSize,_=20,M=30,k=100,E=10,A=o.select(r),S=o.select(this.el().querySelector("."+this.config.theme+"-rendering .c3-chart")).append("svg"),P=A.style("width").slice(0,-2)-M-E,j=A.style("height").slice(0,-2)-_-k-30,T=P/(t.length-1),O=.3*T,C=O/1.5,D=j,z=100..toFixed(v),L=0;w&&(L=(j-w)/(t.length-2));var N=t.slice(1).map(function(e,n){var r=[{x:T*n+O,y:(j-D)/2},{x:T*n+O,y:(j-D)/2+D}];0!==n&&("relative"===g&&(w?D-=L:D=D*e[1]/t[n][1],z=(e[1]/t[n][1]*100).toFixed(v)),"absolute"===g&&(w?D-=L:D=j*e[1]/t[1][1],z=(e[1]/t[1][1]*100).toFixed(v)));var o=e[0];if(Object.keys(i).length)for(var a in i)i[a]===e[0]&&(o=a);var l=e[1];return void 0!==f.prettyNumber&&!0!==f.prettyNumber||isNaN(parseInt(e[1]))||(l=(0,s.prettyNumber)(e[1])),{name:e[0],label:o,percent:z+"%",result:l,points:[].concat(r,[{x:T*(n+1),y:(j-D)/2+D},{x:T*(n+1),y:(j-D)/2}])}}),I=N.map(function(t,e){return{label:t.label,points:[{x:t.points[0].x,y:t.points[0].y},{x:t.points[1].x,y:t.points[1].y},{x:"top"===b?t.points[1].x:t.points[1].x-C,y:"top"===b?t.points[1].y:t.points[1].y-O<j/2?j/2+5:t.points[1].y-O},{x:"bottom"===b?t.points[0].x:t.points[0].x-C,y:"bottom"===b?t.points[0].y:t.points[0].y+O>j/2?j/2-5:t.points[0].y+O}]}}),R=N.concat(I);if(S.attr("preserveAspectRatio","xMidYMid meet").attr("viewBox","0 0 "+(P+E+M)+" "+(j+_+k-30)).attr("height","100%").attr("width","100%").append("g").attr("transform","translate("+E+","+_+")").selectAll("polygon").data(R).enter().append("polygon").attr("points",function(t){return t.points.map(function(t){return[t.x,t.y].join(",")}).join(" ")}).style("fill",function(t,e){return e>N.length-1?l[t.label]?o.rgb(l[t.label]).darker(1.5):o.rgb(n[e-N.length]).darker(1.5):l[t.label]?l[t.label]:n[e]}).attr("class",function(t){return t.label}).attr("cursor","pointer"),y&&(S.selectAll("line").data(N).enter().append("line").attr("x1",function(t){return t.points[0].x+E-.8*O}).attr("y1",j+k).attr("x2",function(t){return t.points[0].x+E-.8*O}).attr("y2",function(t){return t.points[0].y+_}).attr("class","chart-lines"),S.append("line").attr("x1",P+E+O/4).attr("y1",j+k).attr("x2",N[N.length-1].points[3].x+E+O/4).attr("y2",N[N.length-1].points[3].y+_).attr("class","chart-lines")),y&&S.selectAll("text.label").data(N).enter().append("text").style("text-anchor","middle").attr("x",function(t){return t.points[0].x+E+.25*T}).attr("y",j+.4*k+_).attr("class",function(t){return"text-label "+t.label}).text(function(t){return t.name}).call(a.textWrap,T).attr("cursor","pointer"),y||S.selectAll("text.label").data(N).enter().append("text").style("text-anchor","middle").attr("x",function(t){return t.points[0].x+E+.25*T}).attr("y",function(t){return t.points[2].y+T/4>j+k-40?j+k-40+_:t.points[2].y+T/4<t.points[1].y?t.points[1].y+20+_:t.points[2].y+T/4+10+_}).attr("class",function(t){return"text-label "+t.label}).text(function(t){return t.name}).call(a.textWrap,T).attr("cursor","pointer"),h&&!m&&S.selectAll("text.label").data(N).enter().append("text").style("text-anchor","middle").attr("x",function(t){return t.points[1].x+T/2.8+E}).attr("y",j/2+_+10).attr("class",function(t){return"text-main "+t.label}).text(function(t){return t.percent}).attr("cursor","pointer"),m&&!h&&S.selectAll("text.label").data(N).enter().append("text").style("text-anchor","middle").attr("x",function(t){return t.points[1].x+T/2.8+E}).attr("y",j/2+_+10).attr("class",function(t){return"text-main "+t.label}).text(function(t){return t.result}).attr("cursor","pointer"),h&&m&&(S.selectAll("text.label").data(N).enter().append("text").style("text-anchor","middle").attr("x",function(t){return t.points[1].x+T/2.8+E}).attr("y",j/2+_+16).attr("class",function(t){return"text-second "+t.label}).text(function(t){return t.percent}).attr("cursor","pointer"),S.selectAll("text.label").data(N).enter().append("text").style("text-anchor","middle").attr("x",function(t){return t.points[1].x+T/2.8+E}).attr("y",j/2+_-3).attr("class",function(t){return"text-main "+t.label}).text(function(t){return t.result}).attr("cursor","pointer")),x){var H=function(t){F.style("opacity",.5),B.style("opacity",.5);var e=/[^ ]*$/.exec(o.select(this).attr("class"))[0];S.selectAll("."+e).style("opacity",1)},q=function(t){F.style("opacity",1),B.style("opacity",1)},F=S.selectAll("polygon");F.on("mouseover",H).on("mouseout",q);var B=S.selectAll("text");B.on("mouseover",H).on("mouseout",q)}if(u&&u.clickToCopyToClipboard){S.selectAll("text").on("click",function(t){var e=t.percent,n=t.result;m?(0,c.default)(n,o.event):h&&(0,c.default)(e,o.event)})}}},{key:"update",value:function(){this.destroy(),this.render()}},{key:"destroy",value:function(){o.select(this.el().querySelector("."+this.config.theme+"-rendering .c3-chart")).remove()}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=l(n(9)),o=n(0),a=n(3),s=l(n(1));function l(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,[{key:"render",value:function(){var t=this,e=this.config,n=e.container,r=e.metricResults,l=e.title,c=e.tooltip,u=e.utils,f=[];f[0]=[],(0,o.each)(this.dataset.selectColumn(0),function(t,e){var n=void 0;e>0&&(n=new Date(t)),f[0][e]=n}),f[0][0]="x",(0,o.each)(this.data()[0],function(e,n){n>0&&f.push(t.dataset.selectColumn(n))});var d=r&&r.previous&&r.previous.result||0,p=(r&&r.current&&r.current.result||0)-d,h=0===d?"-":(0,a.prettyNumber)(Math.round(p/d*100)),g="keen-dataviz-metric-green",v="arrow-green";h<0&&(g="keen-dataviz-metric-red",v="arrow-red");var y=this.config.showTitle&&l?'<div class="keen-dataviz-title">'+l+"</div>":"",m=document.querySelector(n);m.innerHTML='\n      <div class="keen-dataviz">\n        <div class="keen-dataviz-metric-combo">\n          <div class="metric-combo-data">\n            '+y+' \n            <div class="percent-difference '+g+'"><div class="'+v+'"></div> '+h+' %</div>\n            <div class="current-count '+g+'"> '+(0,a.prettyNumber)(p)+' </div>\n          </div>\n          <div class="keen-dataviz-rendering">\n            <div class="c3-chart"></div>\n          </div>\n        </div>\n      </div>';var b=m.querySelector(".c3-chart");i.default.generate({bindto:b,color:{pattern:["#c3c4cc"]},title:l,legend:{show:!1},data:{x:"x",columns:f,type:"area-spline",selection:{draggable:!1,enabled:!0,multiple:!0}},point:{r:0,focus:{expand:{r:5,enabled:!0}},select:{r:5,enabled:!0}},axis:{y:{show:!1},x:{show:!1}},grid:{x:{show:!1},y:{show:!1}},padding:{left:0,right:0,top:0,bottom:-4},tooltip:c});if(u&&u.clickToCopyToClipboard){var x=document.querySelector(".current-count").innerText;document.querySelector(".keen-dataviz-metric-combo").addEventListener("click",function(t){return(0,s.default)(x,t)})}}},{key:"update",value:function(){this.destroy(),this.render()}},{key:"destroy",value:function(){var t=this.config.container;document.querySelector(t).querySelector(".c3-chart").remove()}}]),t}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.element,n=t.data,r=document.createElement("dl");r.classList="keen-dataviz-execution-meta",Object.keys(n).length?Object.keys(n).forEach(function(t){var e=document.createElement("dt");e.innerText=t.replace(/_/g," "),e.addEventListener("click",function(t){return s(t)});var i=document.createElement("dd");i.innerText=n[t],i.addEventListener("click",function(t){return s(t)}),r.append(e),r.append(i)}):r.innerText="No execution metadata available";e.append(r)};var r,i=n(1),o=(r=i)&&r.__esModule?r:{default:r};function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"copied",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;setTimeout(function(){t.classList.remove(e)},n)}function s(t){var e=t.target,n=t.target.nodeName,r=void 0;"DD"===n&&(r=e.innerText,e.classList.contains("copied")||(e.classList.add("copied"),a(e))),"DT"===n&&(r=e.nextSibling.innerText,e.nextSibling.classList.contains("copied")||(e.nextSibling.classList.add("copied"),a(e.nextSibling))),(0,o.default)(r)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(n(51)),i=a(n(52)),o=a(n(53));function a(t){return t&&t.__esModule?t:{default:t}}e.default={autocollector:r.default,modern:i.default,dracula:o.default}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={colors:["#5E77FF","#9C60FE","#F162FE","#FD65B7","#FD6768","#FDB86A","#F2FC6C","#A5FC6E","#71FB85","#73FBD0","#76DDFA","#76f4fa","#bb76fa","#fa76bf"]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={colors:["#45B2E8","#D9540D","#2CAB72","#2C4BAB","#EDDD02","#E84545","#E845CE","#5FCEC9","#E89F45","#28E43F","#B765C0","#458AE8","#AB2C2C","#AB2C75","#27E5FF","#7168F2","#FF932B","#855D00","#ACE845","#1C91B4"]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={colors:["#8be9fd","#50fa7b","#ffb86c","#ff79c6","#bd93f9","#ff5555","#f1fa8c"]}}])});
//# sourceMappingURL=keen-dataviz.min.js.map