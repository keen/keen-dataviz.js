{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./lib/utils/each.js","webpack:///./lib/utils/escape-html.js","webpack:///./lib/utils/extend.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/promise-polyfill/src/finally.js","webpack:///./lib/utils/assert-date-string.js","webpack:///./lib/dataset/utils/create-null-list.js","webpack:///./lib/dataset/modifiers/append.js","webpack:///./lib/utils/extend-deep.js","webpack:///external \"d3\"","webpack:///./lib/utils/strip-html-tags.js","webpack:///./lib/dataset/utils/analyses.js","webpack:///./lib/dataset/index.js","webpack:///./node_modules/promise-polyfill/src/index.js","webpack:///./lib/libraries/default/spinner.js","webpack:///./lib/libraries/default/table.js","webpack:///./lib/utils/pretty-number.js","webpack:///./lib/libraries/default/metric.js","webpack:///./lib/libraries/default/message.js","webpack:///./lib/libraries/c3/extensions/tooltip-contents.js","webpack:///./lib/libraries/c3/extensions/paginating-legend.js","webpack:///./lib/libraries/c3/extensions/default-date-format.js","webpack:///external \"c3\"","webpack:///./lib/libraries/index.js","webpack:///./lib/data.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/setimmediate/setImmediate.js","webpack:///./node_modules/timers-browserify/main.js","webpack:///./node_modules/promise-polyfill/src/polyfill.js","webpack:///./lib/dataset/utils/object.js","webpack:///./lib/dataset/utils/flatten.js","webpack:///./lib/dataset/utils/parsers.js","webpack:///./lib/dataset/modifiers/update.js","webpack:///./lib/dataset/modifiers/sort.js","webpack:///./lib/dataset/modifiers/select.js","webpack:///./lib/dataset/modifiers/insert.js","webpack:///./lib/dataset/modifiers/filter.js","webpack:///./lib/dataset/modifiers/delete.js","webpack:///./lib/index.js","webpack:///./lib/browser.js"],"names":["each","o","cb","s","n","Array","length","call","hasOwnProperty","escapeHtml","matchHtmlRegExp","string","str","match","exec","escape","html","index","lastIndex","charCodeAt","substring","extend","target","i","arguments","prop","testObject","testString","input","getTime","isNaN","ISO_8601","test","len","list","push","appendColumn","appendRow","self","args","prototype","slice","label","undefined","matrix","row","cell","concat","value","String","newRow","col","selectColumn","extendDeep","key","stripHtmlTags","inputString","replace","average","arr","start","end","set","sum","avg","val","parseFloat","maximum","nums","Math","max","apply","minimum","min","getColumnAverage","getRowAverage","getColumnSum","getRowSum","getColumnMaximum","getRowMaximum","getColumnMinimum","getRowMinimum","getColumnLabel","getRowIndex","append","del","filter","insert","select","sort","update","Dataset","config","meta","type","data","coords","Error","colIndex","indexOf","rowIndex","colResult","rowResult","selectRow","analyses","parser","render","artifacts","view","_artifacts","spinner","theme","el","innerHTML","destroy","interval","clearInterval","radius","e","defaults","currentPage","_generateTableRows","datavizInstance","dataset","defaultConfig","page","limit","arrows","customConfig","table","pagination","datasetPaginated","pages","ceil","rowCol","pageNumber","prevPage","nextPage","_generateTableHeader","fieldNumber","columnNames","columns","colName","isEmpty","message","querySelector","querySelectorAll","forEach","item","addEventListener","event","sortOrder","getAttribute","checker","a","b","sortOrderNumber","nameA","toUpperCase","nameB","setAttribute","first","shift","unshift","attachBtnEventListeners","btn","parseInt","onrendered","prettyNumber","Number","sciNo","toPrecision","prefix","suffixes","abs","recurse","iteration","split","rhs","charAt","numNumerals","color","colors","title","opts","suffix","formattedNum","valueEl","text","outer","document","createElement","inner","msg","titleContainer","notesContainer","className","notes","appendChild","d","defaultTitleFormat","defaultValueFormat","nameFormat","tooltip_format_name","name","titleFormat","tooltip_format_title","valueFormat","tooltip_format_value","x","CLASS","tooltip","ratio","id","bgcolor","levelColor","tooltipName","options","cols","chart","c3","domNode","legendConfig","legend","hidden","labels","offset","round","offsetHeight","total","legendElement","align","position","paginateHorizontalLeftElement","legendItemsElement","paginateVerticalElement","paginateHorizontalRightElement","paginateData","renderLegendComponent","renderPaginationComponent","resize","labelShortened","textMaxLength","legendItem","chartPartId","legendItemColorSample","style","backgroundColor","prepend","tooltipElement","focus","show","pointer","revert","remove","opacity","isHidden","splice","toggle","arrowUp","arrowDown","paginate","direction","diff","floor","clearSelectedText","selection","empty","window","getSelection","removeAllRanges","d3","startDate","endDate","timeDiff","Date","months","ms","date","getMonth","getFullYear","getDate","lib","timer","bindResizeListener","clearTimeout","delay","visuals","setTimeout","defineC3","types","metric","c3Types","getDefaultOptions","ENFORCED_OPTIONS","bindto","pattern","colorMapping","height","showTitle","titleElement","getComputedStyle","notesElement","DEFAULT_OPTIONS","size","width","offsetWidth","clearOnRender","removeLegend","axis","rotated","tick","format","dateFormat","culling","stacked","groups","categories","bind","c3options","c3CustomDataMapping","contents","c3TooltipContents","valueFormatted","c3CustomTooltipFiltering","generate","c3PaginatingLegend","scope","fn","onresize","attachEvent","parseResponse","response","indexBy","parserArgs","query","selectedParser","metadata","analysis_type","event_collection","filters","group_by","timeframe","timezone","result","steps","display_name","getDefaultTitle","visualization","chart_type","getDefaultType","updateColumn","updateRow","analysis","valueAtDeepKey","obj","is","flatten","ob","toReturn","flatObject","initialize","parsers","parseMetric","res","parseInterval","record","parseGroupedMetric","parseGroupedInterval","group","j","parseDoubleGroupedMetric","rowLabel","parseDoubleGroupedInterval","parseFunnel","parseList","parseExtraction","datasetExtraction","names","Object","keys","iNames","deleteColumn","funnel","extraction","q","sortColumns","sortRows","comp","head","clone","analysesUtilMethods","op","insertColumn","body","insertRow","filterColumns","filterRows","selectedColumn","ri","deleteRow","Dataviz","defaultOptions","showDeprecationWarnings","showLoadingSpinner","container","containerElement","labelMapping","library","sortGroups","sortIntervals","results","order","padding","point","expand","enabled","r","transition","_prepared","_rendered","prepare","libraries","default","register","actions","method","find","nodeName","visual","attributes","console","log","chartOptions","element","domReady","num","setLabels","mapLabels","loader","isArray","timeframes","map","resultItem","foundDifferent","timeframeItem","resultTimeframe","error","getLabel","firstResultPassed","ds2","returnValue","renderAsPromise","Promise","resolve","reject","customCallback","buildDomWrapper","bool","convertChartTypes","chartType","parseRawData","parseRequest","chart100percentWide","areachart","barchart","columnchart","linechart","piechart","testDom","readyState","DOMContentLoaded","removeEventListener","env","global","extendKeenGlobalObject","KeenDataviz","KeenDataset","Keen","keenGlobals","webpackKeenGlobals"],"mappings":"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D;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;ACvLtC;AACA;;AAEA;AACA;AACA;;AAEA,uBAAuB;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0CAA0C,sBAAsB,EAAE;AAClE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;;ACzLD;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC9DA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,CAAC;AACD;AACA;;;;;;;;;;;;;;QCvBgBoQ,c,GAAAA,c;AAAT,SAASA,cAAT,CAAwBC,GAAxB,EAA6BC,EAA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","file":"keen-dataviz.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"d3\"), require(\"c3\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"d3\", \"c3\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"d3\"), require(\"c3\")) : factory(root[\"d3\"], root[\"c3\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function(__WEBPACK_EXTERNAL_MODULE__9__, __WEBPACK_EXTERNAL_MODULE__22__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 39);\n","export function each(o, cb, s) {\n  var n;\n  if (!o) {\n    return 0;\n  }\n  s = !s ? o : s;\n  if (o instanceof Array) {\n    // Indexed arrays, needed for Safari\n    for (n = 0; n < o.length; n++) {\n      if (cb.call(s, o[n], n, o) === false) {\n        return 0;\n      }\n    }\n  } else {\n    // Hashtables\n    for (n in o) {\n      if (o.hasOwnProperty(n)) {\n        if (cb.call(s, o[n], n, o) === false){\n          return 0;\n        }\n      }\n    }\n  }\n  return 1;\n}\n","const matchHtmlRegExp = /[\"'&<>]/;\n\n/**\n * Escape special characters in the given string of html.\n *\n * @param  {string} string The string to escape for inserting into HTML\n * @return {string}\n * @public\n */\n\nexport function escapeHtml(string) {\n  var str = '' + string;\n  var match = matchHtmlRegExp.exec(str);\n\n  if (!match) {\n    return str;\n  }\n\n  var escape;\n  var html = '';\n  var index = 0;\n  var lastIndex = 0;\n\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34: // \"\n        escape = '&quot;';\n        break;\n      case 38: // &\n        escape = '&amp;';\n        break;\n      case 39: // '\n        escape = '&#39;';\n        break;\n      case 60: // <\n        escape = '&lt;';\n        break;\n      case 62: // >\n        escape = '&gt;';\n        break;\n      default:\n        continue;\n    }\n\n    if (lastIndex !== index) {\n      html += str.substring(lastIndex, index);\n    }\n\n    lastIndex = index + 1;\n    html += escape;\n  }\n\n  return lastIndex !== index\n    ? html + str.substring(lastIndex, index)\n    : html;\n}\n","export function extend(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    for (var prop in arguments[i]){\n      target[prop] = arguments[i][prop];\n    }\n  }\n  return target;\n}\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","export default function(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      return constructor.resolve(callback()).then(function() {\n        return constructor.reject(reason);\n      });\n    }\n  );\n}\n","export function testObject(input) {\n  if (input !== null && typeof input.getTime === 'function' && !isNaN(input.getTime())) {\n    return true;\n  }\n  return false;\n}\n\nexport function testString(input) {\n  const ISO_8601 = /^\\d{4}-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(\\.\\d+)?(([+-]\\d\\d:\\d\\d)|Z)?$/i;\n  return ISO_8601.test(input);\n}\n\nexport default function (input) {\n  if (typeof input === 'object') {\n    return testObject(input);\n  } else if (typeof input === 'string') {\n    return testString(input);\n  }\n  return false;\n}\n","export default function (len) {\n  const list = [];\n  for (let i = 0; i < len; i++) {\n    list.push(null);\n  }\n  return list;\n}\n","import createNullList from '../utils/create-null-list';\nimport { each } from '../../utils/each';\n\nexport function appendColumn(str, input) {\n  const self = this;\n  const args = Array.prototype.slice.call(arguments, 2);\n  const label = (str !== undefined) ? str : null;\n\n  if (typeof input === 'function') {\n    self.matrix[0].push(label);\n    each(self.matrix, function(row, i) {\n      let cell;\n      if (i > 0) {\n        cell = input.call(self, row, i);\n        if (typeof cell === 'undefined') {\n          cell = null;\n        }\n        self.matrix[i].push(cell);\n      }\n    });\n  }\n\n  else if (!input || input instanceof Array) {\n    input = input || [];\n\n    if (input.length <= self.matrix.length - 1) {\n      input = input.concat(createNullList(self.matrix.length - 1 - input.length));\n    }\n    else {\n      // If this new column is longer than existing columns,\n      // we need to update the rest to match ...\n      each(input, function(value, i){\n        if (self.matrix.length -1 < input.length) {\n          appendRow.call(self, String(self.matrix.length));\n        }\n      });\n    }\n\n    self.matrix[0].push(label);\n    each(input, function(value, i){\n      self.matrix[i+1][self.matrix[0].length-1] = value;\n    });\n\n  }\n\n  return self;\n}\n\nexport function appendRow(str, input) {\n  const self = this;\n  const args = Array.prototype.slice.call(arguments, 2);\n  const label = (str !== undefined) ? str : null;\n  const newRow = [];\n\n  newRow.push(label);\n\n  if (typeof input === 'function') {\n    each(self.matrix[0], function(label, i){\n      let col;\n      let cell;\n      if (i > 0) {\n        col = self.selectColumn(i);\n        cell = input.call(self, col, i);\n        if (typeof cell === 'undefined') {\n          cell = null;\n        }\n        newRow.push(cell);\n      }\n    });\n    self.matrix.push(newRow);\n  }\n\n  else if (!input || input instanceof Array) {\n    input = input || [];\n\n    if (input.length <= self.matrix[0].length - 1) {\n      input = input.concat( createNullList( self.matrix[0].length - 1 - input.length ) );\n    }\n    else {\n      each(input, function(value, i){\n        if (self.matrix[0].length -1 < input.length) {\n          appendColumn.call(self, String( self.matrix[0].length));\n        }\n      });\n    }\n\n    self.matrix.push(newRow.concat(input));\n  }\n\n  return self;\n}\n","import { each } from './each';\n\nexport function extendDeep(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    each(arguments[i], function(prop, key){\n      if (( typeof target[key] !== 'undefined' && typeof prop !== 'undefined' ) &&\n          ( typeof target[key] === 'object'    && typeof prop === 'object' ) &&\n          ( target[key] !== null               && prop !== null )) {\n            extendDeep(target[key], prop);\n      }\n      else {\n        target[key] = prop;\n      }\n    });\n  }\n  return target;\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__9__;","/**\n * Strip html tags from string\n *\n * @param  {string} string The string to strip\n * @return {string}\n * @public\n */\n\nexport function stripHtmlTags(inputString) {\n  return inputString.replace(/(<([^>]+)>)/ig, '');\n}\n","import { each } from '../../utils/each';\nimport { extend } from '../../utils/extend';\n\nfunction average(arr, start, end){\n  var set = arr.slice(start||0, (end ? end+1 : arr.length)),\n      sum = 0,\n      avg = null;\n\n  // Add numeric values\n  each(set, function(val, i){\n    if (typeof val === 'number' && !isNaN(parseFloat(val))) {\n      sum += parseFloat(val);\n    }\n  });\n  return sum / set.length;\n}\n\nfunction maximum(arr, start, end){\n  var set = arr.slice(start||0, (end ? end+1 : arr.length)),\n      nums = [];\n\n  // Pull numeric values\n  each(set, function(val, i){\n    if (typeof val === 'number' && !isNaN(parseFloat(val))) {\n      nums.push(parseFloat(val));\n    }\n  });\n  return Math.max.apply(Math, nums);\n}\n\nfunction minimum(arr, start, end){\n  var set = arr.slice(start||0, (end ? end+1 : arr.length)),\n      nums = [];\n\n  // Pull numeric values\n  each(set, function(val, i){\n    if (typeof val === 'number' && !isNaN(parseFloat(val))) {\n      nums.push(parseFloat(val));\n    }\n  });\n  return Math.min.apply(Math, nums);\n}\n\nfunction sum(arr, start, end){\n  // Copy set with given range\n  var set = arr.slice(start||0, (end ? end+1 : arr.length)),\n      sum = 0;\n\n  // Add numeric values\n  each(set, function(val, i){\n    if (typeof val === 'number' && !isNaN(parseFloat(val))) {\n      sum += parseFloat(val);\n    }\n  });\n  return sum;\n}\n\nconst getColumnAverage = function (arr) {\n  return average(arr, 1);\n};\nconst getRowAverage = getColumnAverage;\n\nconst getColumnSum = function (arr) {\n  return sum(arr, 1);\n};\nconst getRowSum = getColumnSum;\n\nconst getColumnMaximum = function (arr) {\n  return maximum(arr, 1);\n};\nconst getRowMaximum = getColumnMaximum;\n\nconst getColumnMinimum = function (arr) {\n  return minimum(arr, 1);\n};\nconst getRowMinimum = getColumnMinimum;\n\nconst getColumnLabel = function (arr) {\n  return arr[0];\n};\nconst getRowIndex = getColumnLabel;\n\nexport default {\n  average,\n  maximum,\n  minimum,\n  sum,\n  getColumnAverage,\n  getRowAverage,\n  getColumnSum,\n  getRowSum,\n  getColumnMaximum,\n  getRowMaximum,\n  getColumnMinimum,\n  getRowMinimum,\n  getColumnLabel,\n  getRowIndex,\n};\n","// Modifiers\nimport * as append from './modifiers/append';\nimport * as del from './modifiers/delete';\nimport * as filter from './modifiers/filter';\nimport * as insert from './modifiers/insert';\nimport * as select from './modifiers/select';\nimport * as sort from './modifiers/sort';\nimport * as update from './modifiers/update';\n\n// Utils\nimport analyses from './utils/analyses';\nimport { extend } from '../utils/extend';\nimport parsers from './utils/parsers';\n\nexport const Dataset = function (config = {}) {\n  if (this instanceof Dataset === false) {\n    return new Dataset(config);\n  }\n\n  this.matrix = [\n    ['Index']\n  ];\n  this.meta = {\n    type: undefined\n  };\n  this.config = config;\n}\n\nDataset.prototype.data = function (arr) {\n  if (!arguments.length) return this.matrix;\n  this.matrix = (arr instanceof Array ? arr : null);\n  return this;\n};\n\nDataset.prototype.set = function (coords, value) {\n  if (arguments.length < 2 || coords.length < 2) {\n    throw Error('Incorrect arguments provided for #set method');\n  }\n\n  var colIndex = 'number' === typeof coords[0] ? coords[0] : this.matrix[0].indexOf(coords[0]),\n      rowIndex = 'number' === typeof coords[1] ? coords[1] : select.selectColumn.call(this, 0).indexOf(coords[1]);\n\n  var colResult = select.selectColumn.call(this, coords[0]),\n      rowResult = select.selectRow.call(this, coords[1]);\n\n  // Column doesn't exist, create and reset colIndex\n  if (colResult.length < 1) {\n    append.appendColumn.call(this, String(coords[0]));\n    colIndex = this.matrix[0].length - 1;\n  }\n\n  // Row doesn't exist, create and reset rowIndex\n  if (rowResult.length < 1) {\n    append.appendRow.call(this, String(coords[1]));\n    rowIndex = this.matrix.length - 1;\n  }\n\n  // Set provided value\n  this.matrix[ rowIndex ][ colIndex ] = value;\n  return this;\n};\n\nDataset.prototype.type = function(str){\n  if (!arguments.length) return this.meta['type'];\n  this.meta['type'] = (str ? String(str) : undefined);\n  return this;\n};\n\nextend(Dataset.prototype, append);\nextend(Dataset.prototype, del);\nextend(Dataset.prototype, filter);\nextend(Dataset.prototype, insert);\nextend(Dataset.prototype, select);\nextend(Dataset.prototype, sort);\nextend(Dataset.prototype, update);\nextend(Dataset.prototype, analyses);\nDataset.parser = parsers(Dataset);\n\nexport default Dataset;\n","import promiseFinally from './finally';\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  this._state = 0;\n  this._handled = false;\n  this._value = undefined;\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype['finally'] = promiseFinally;\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!arr || typeof arr.length === 'undefined')\n      throw new TypeError('Promise.all accepts an array');\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(values) {\n  return new Promise(function(resolve, reject) {\n    for (var i = 0, len = values.length; i < len; i++) {\n      values[i].then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  (typeof setImmediate === 'function' &&\n    function(fn) {\n      setImmediate(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\nexport default Promise;\n","export default {\n  render: function(){\n    let html = '';\n    const artifacts = this.view._artifacts.spinner = {};\n\n    // Build DOM element\n    html += '<div class=\"' + this.config.theme + '\">';\n    html +=   '<div class=\"keen-spinner-container keen-dataviz-box\">';\n    html +=     '<div class=\"keen-spinner-indicator\"></div>';\n    html +=   '</div>';\n    html += '</div>';\n    this.el().innerHTML = html;\n  },\n  update: function(){\n    // no special update handling\n    this.render();\n  },\n  destroy: function(){\n    if (this.view._artifacts.spinner) {\n      if (this.view._artifacts.spinner.interval) {\n        clearInterval(this.view._artifacts.spinner.interval);\n      }\n      this.view._artifacts.spinner.radius = 0;\n      try {\n        delete this.view._artifacts.spinner;\n      }\n      catch (e) {\n        this.view._artifacts.spinner = undefined;\n      }\n    }\n    this.el().innerHTML = '';\n  }\n};\n","import { each } from '../../utils/each';\n\nconst defaults = {\n  /*\n  DEPRECATED - use CSS styles\n\n  height: undefined,\n  width: undefined,\n  stickyHeader: false,\n  stickyFooter: false\n  */\n};\n\nlet currentPage;\nfunction _generateTableRows(datavizInstance, dataset) {\n  let html = '';\n  const defaultConfig = {\n    page: 1,\n    limit: 0,\n    arrows: true\n  };\n  let customConfig = {};\n  if (datavizInstance.config.table && datavizInstance.config.table.pagination) {\n    customConfig = datavizInstance.config.table.pagination;\n  }\n  const config = {\n    ...defaultConfig,\n    ...customConfig\n  };\n\n  if (!currentPage){\n    currentPage = config.page;\n  }\n\n  let datasetPaginated;\n  let pages = 0;\n  if (config.limit === 0) {\n    datasetPaginated = dataset.slice(1); // remove header\n  } else {\n    const start = config.limit * (currentPage - 1) + 1;\n    const end = start + config.limit;\n    datasetPaginated = dataset.slice(start, end);\n    pages = Math.ceil((dataset.length - 1) / config.limit);\n  }\n\n  for (let row of datasetPaginated) {\n    html +=   '<tr class=\"table-data-row\">';\n    for (let rowCol of row) {\n      html +=   `<td>${rowCol}</td>`;\n    }\n    html +=   '</tr>';\n  }\n\n  if (pages > 1){\n    html += `<tr class=\"table-pagination\"><td colspan=\"999\">`;\n    let pageNumber = 1;\n    const prevPage = (currentPage === 1) ? 1 : (currentPage - 1);\n    const nextPage = (currentPage === pages) ? pages : (currentPage + 1);\n    if (config.arrows){\n      html += `<a class=\"arrow btn\" data-page=\"${prevPage}\"><</a>`;\n    }\n    while (pageNumber <= pages){\n      html += `<a class=\"btn ${\n        pageNumber === currentPage ? 'active' : ''\n      }\" data-page=\"${pageNumber}\">${pageNumber}</a>`;\n      pageNumber++;\n    }\n    if (config.arrows){\n      html += `<a class=\"arrow btn\" data-page=\"${nextPage}\">></a>`;\n    }\n    html += '</td></tr>';\n  }\n\n  return html;\n}\n\nfunction _generateTableHeader(datavizInstance, dataset) {\n  let html = '';\n  let fieldNumber = -1;\n  let columnNames =\n    (datavizInstance.config.table && datavizInstance.config.table.columns)\n    || dataset[0];\n  for (let colName of columnNames) {\n    fieldNumber +=1;\n    html +=  `<th fieldNumber=\"${fieldNumber}\">${colName}</th>`;\n  }\n  return html;\n}\n\n\n  const render = function() {\n    const dataset = this.dataset.matrix;\n\n    const el = this.el();\n    const theme = this.config.theme;\n    const datavizInstance = this;\n\n    let html = '';\n\n    const isEmpty = dataset.length === 1 && dataset[0].length === 0;\n    if (isEmpty) {\n      this.message('No data to display');\n      return;\n    }\n\n    // Open wrapper\n    html += `<div class=\"${theme}-table\">`;\n\n    // Static, scrollable table\n    html +=   `<table class=\"${theme}-table-dataset\">`;\n    html +=     '<thead>';\n    html +=       '<tr>';\n    html +=       _generateTableHeader(datavizInstance, dataset);\n    html +=       '</tr>';\n    html +=     '</thead>';\n    // Table data\n    html +=     '<tbody>';\n    html +=     _generateTableRows(datavizInstance, dataset);\n    html +=     '</tbody>';\n    html +=   '</table>';\n/* */\n    // Close wrapper\n    html += '</div>';\n\n    // Inject HTML string\n    el.querySelector(`.${theme}-rendering`).innerHTML = html;\n\n    el\n      .querySelectorAll(`.${theme}-rendering th`)\n      .forEach((item) => {\n        item.addEventListener('click', (event) => {\n          let sortOrder = event.target.getAttribute('order') || 'asc';\n          let fieldNumber =  event.target.getAttribute('fieldNumber');\n          let checker = function (a, b) {\n            let sortOrderNumber = (sortOrder === 'asc') ? 1 : -1;\n\n            if (typeof a[fieldNumber] === 'string') {\n              let nameA = a[fieldNumber].toUpperCase(); // ignore upper and lowercase\n              let nameB = b[fieldNumber].toUpperCase(); // ignore upper and lowercase\n              if (nameA < nameB) {\n                return -1 * sortOrderNumber;\n              }\n              if (nameA > nameB) {\n                return 1* sortOrderNumber;\n              }\n\n              // names must be equal\n              return 0;\n            }\n            return (a[fieldNumber] - b[fieldNumber]) * sortOrderNumber;\n          };\n\n          if (sortOrder === 'asc') {\n            sortOrder = 'desc';\n          } else {\n            sortOrder = 'asc'\n          }\n          event.target.setAttribute('order', sortOrder);\n\n          const first = this.dataset.matrix.shift();\n          this.dataset.matrix.sort(checker);\n          this.dataset.matrix.unshift(first);\n\n          el.querySelector(`.${theme}-rendering tbody`).innerHTML =\n             _generateTableRows(datavizInstance, dataset);\n          attachBtnEventListeners();\n        });\n      });\n\n\n    const attachBtnEventListeners = () => {\n      el.querySelectorAll('.btn').forEach(btn => {\n        btn.addEventListener('click', (event) => {\n          currentPage = parseInt(event.target.getAttribute('data-page'));\n          el.querySelector(`.${theme}-rendering tbody`).innerHTML =\n             _generateTableRows(datavizInstance, dataset);\n             attachBtnEventListeners();\n          }, true);\n      });\n    };\n\n    attachBtnEventListeners(datavizInstance, el, theme);\n\n    if (this.config.onrendered) {\n      this.config.onrendered();\n    }\n  };\n\n\n\nconst update = function(){\n    // no special update handling\n    this.render();\n  };\n\nconst destroy=  function(){};\n\nexport default { render, update, destroy };\n","export function prettyNumber(input) {\n  // If it has 3 or fewer sig figs already, just return the number.\n  var input = Number(input),\n      sciNo = input.toPrecision(3),\n      prefix = '',\n      suffixes = ['', 'k', 'M', 'B', 'T'];\n\n  if (Number(sciNo) == input && String(input).length <= 4) {\n    return String(input);\n  }\n\n  if (Math.abs(input) >= 1000000000000000) {\n    return sciNo;\n  }\n\n  if (input >= 1 || input <= -1) {\n    if (input < 0){\n      //Pull off the negative side and stash that.\n      input = -input;\n      prefix = '-';\n    }\n    return prefix + recurse(input, 0);\n  }\n  else {\n    return input.toPrecision(3);\n  }\n\n  function recurse(input, iteration) {\n    var input = String(input);\n    var split = input.split('.');\n    // If there's a dot\n    if (split.length > 1) {\n      // Keep the left hand side only\n      input = split[0];\n      var rhs = split[1];\n      // If the left-hand side is too short, pad until it has 3 digits\n      if (input.length == 2 && rhs.length > 0) {\n        // Pad with right-hand side if possible\n        if (rhs.length > 0) {\n          input = input + '.' + rhs.charAt(0);\n        }\n        // Pad with zeroes if you must\n        else {\n          input += '0';\n        }\n      }\n      else if (input.length == 1 && rhs.length > 0) {\n        input = input + '.' + rhs.charAt(0);\n        // Pad with right-hand side if possible\n        if (rhs.length > 1) {\n          input += rhs.charAt(1);\n        }\n        // Pad with zeroes if you must\n        else {\n          input += '0';\n        }\n      }\n    }\n    var numNumerals = input.length;\n    // if it has a period, then numNumerals is 1 smaller than the string length:\n    if (input.split('.').length > 1) {\n      numNumerals--;\n    }\n    if (numNumerals <= 3) {\n      return String(input) + suffixes[iteration];\n    }\n    else {\n      return recurse(Number(input) / 1000, iteration + 1);\n    }\n  }\n}\n","import { prettyNumber } from '../../utils/pretty-number';\nimport { escapeHtml } from '../../utils/escape-html';\n\nexport default {\n  render: function(){\n    const color = this.config.colors[0];\n    const theme = this.config.theme;\n    const title = this.config.title;\n    const opts = this.config;\n    let value = '-';\n    let html = '';\n    let prefix = '';\n    let suffix = '';\n    let formattedNum;\n    let valueEl;\n\n    if (typeof this.data()[1][1] === 'number') {\n      value = this.data()[1][1];\n    }\n\n    formattedNum = value;\n    if ( (typeof opts['prettyNumber'] === 'undefined' || opts['prettyNumber'] === true)\n      && !isNaN(parseInt(value)) ) {\n        formattedNum = prettyNumber(value);\n    }\n\n    if (opts['prefix']) {\n      prefix = '<span class=\"' + theme + '-metric-prefix\">' + opts['prefix'] + '</span>';\n    }\n    if (opts['suffix']) {\n      suffix = '<span class=\"' + theme + '-metric-suffix\">' + opts['suffix'] + '</span>';\n    }\n\n    html += '<div class=\"' + theme + '\">';\n    html +=   '<div class=\"' + theme + '-metric keen-dataviz-box\" title=\"' + escapeHtml(value) + '\">';\n    html +=     '<span><div class=\"' + theme + '-metric-value\">' + prefix + escapeHtml(formattedNum) + suffix + '</div>';\n    if (title) {\n      html +=   '<div class=\"' + theme + '-metric-title\">' + escapeHtml(title) + '</div>';\n    }\n    html +=   '</span></div>';\n    html += '</div>';\n\n    this.el().innerHTML = html;\n\n    if (this.config.onrendered) {\n      this.config.onrendered();\n    }\n  },\n  update: function(){\n    // no special update handling\n    this.render();\n  },\n  destroy: function(){\n    // no special clean-up\n  }\n};\n","import { escapeHtml } from '../../utils/escape-html';\n\nexport default {\n  render: function(text){\n    const outer = document.createElement('div');\n    const inner = document.createElement('div');\n    const msg = document.createElement('span');\n\n    const titleContainer = document.createElement('div');\n    const notesContainer = document.createElement('div');\n\n    outer.className = this.config.theme + ' keen-dataviz-box';\n    inner.className = this.config.theme + '-message';\n\n    // Create title and notes for message\n    titleContainer.className = this.config.theme + '-title';\n    titleContainer.innerHTML = escapeHtml(this.config.title || '');\n    notesContainer.className = this.config.theme + '-notes';\n    notesContainer.innerHTML = escapeHtml(this.config.notes || '');\n\n    msg.innerHTML = escapeHtml(text) || '';\n    inner.appendChild(msg);\n    outer.appendChild(titleContainer);\n    outer.appendChild(inner);\n    outer.appendChild(notesContainer);\n\n    this.el().innerHTML = '';\n    this.el().appendChild(outer);\n\n  },\n  update: function(){\n    // no special update handling\n    this.render();\n  },\n  destroy: function(){\n    // no special clean-up\n  }\n};\n","import { escapeHtml } from '../../../utils/escape-html';\n\nexport default function (d, defaultTitleFormat, defaultValueFormat, color) {\n  let text;\n  let title;\n  // Set config options or defaults\n  const nameFormat = this.config.tooltip_format_name || function (name) { return name; };\n  const titleFormat = this.config.tooltip_format_title || defaultTitleFormat;\n  const valueFormat = this.config.tooltip_format_value || defaultValueFormat;\n\n  // Reverse list to match legend\n  for (let i = 0; i < d.length; i++) {\n    if (! (d[i] && (d[i].value || d[i].value === 0))) { continue; }\n    if (!text) {\n      title = titleFormat ? titleFormat(d[i].x) : d[i].x;\n      text = \"<table class='\" + this.CLASS.tooltip + \"'>\" + (title || title === 0 ? \"<tr><th colspan='2'>\" + escapeHtml(title) + \"</th></tr>\" : \"\");\n    }\n    let name = nameFormat(d[i].name);\n    let value = valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index);\n    let bgcolor = this.levelColor ? this.levelColor(d[i].value) : color(d[i].id);\n    if (value) {\n      text += \"<tr class='\" + this.CLASS.tooltipName + \"-\" + d[i].id + \"'>\";\n      text +=   \"<td class='name'><span style='background-color:\" + bgcolor + \"'></span>\" + escapeHtml(name) + \"</td>\";\n      text +=   \"<td class='value'>\" + escapeHtml(value) + \"</td>\";\n      text += \"</tr>\";\n    }\n  }\n  return text + \"</table>\";\n}\n","import * as d3 from 'd3';\n\nimport isDateString from '../../../utils/assert-date-string';\n\nexport default function (options) {\n  const cols = options.data.columns;\n  const datavizInstance = this;\n  const chart = this.view._artifacts.c3;\n  const columns = [];\n  const domNode = this.el().querySelector('.' + datavizInstance.config.theme + '-rendering');\n  const legendConfig = datavizInstance.config.legend;\n\n  const pagination = this.view._artifacts.pagination = {\n    ...{\n      hidden: [],\n      labels: [],\n      offset: 0,\n      limit: Math.round((domNode.offsetHeight - 78) / 20),\n      total: 0\n    },\n    ...legendConfig.pagination\n  };\n\n  for (let i = 0; i < cols.length; i++) {\n    if (cols[i][0] !== 'x' && !isDateString(cols[i][1])) {\n      columns.push(cols[i][0]);\n    }\n  }\n\n  const legendElement = this.el().querySelector('.keen-c3-legend');\n\n  let align = 'vertical';\n  if (legendConfig.position === 'top' || legendConfig.position === 'bottom') {\n    align = 'horizontal';\n  }\n\n  const paginateHorizontalLeftElement = document.createElement('div');\n  paginateHorizontalLeftElement.setAttribute('class', 'keen-c3-legend-pagination-icons keen-c3-legend-horizontal-pagination-left');\n  if (align === 'horizontal') {\n    legendElement.append(paginateHorizontalLeftElement);\n  }\n\n  const legendItemsElement = document.createElement('div');\n  legendItemsElement.setAttribute('class', `keen-c3-legend-items keen-c3-legend-${align}-items`);\n  legendElement.append(legendItemsElement);\n\n  const paginateVerticalElement = document.createElement('div');\n  paginateVerticalElement.setAttribute('class', 'keen-c3-legend-pagination keen-c3-legend-pagination-icons');\n  if (align === 'vertical') {\n    legendElement.append(paginateVerticalElement);\n  }\n\n  const paginateHorizontalRightElement = document.createElement('div');\n  paginateHorizontalRightElement.setAttribute('class', 'keen-c3-legend-pagination-icons keen-c3-legend-horizontal-pagination-right');\n  if (align === 'horizontal') {\n    legendElement.append(paginateHorizontalRightElement);\n  }\n\n  paginateData();\n\n  function paginateData(){\n    pagination.labels = columns.slice(pagination.offset, pagination.offset + pagination.limit);\n    pagination.total = columns.length;\n    renderLegendComponent.call(datavizInstance, pagination.labels);\n    if (pagination.total > pagination.limit) {\n      renderPaginationComponent.call(datavizInstance);\n    }\n    chart.resize();\n  }\n\n  function renderLegendComponent(){\n    legendItemsElement.innerHTML = '';\n\n    pagination.labels.forEach(label => {\n      const labelShortened = legendConfig.label.textMaxLength ? label.slice(0, legendConfig.label.textMaxLength - 1) : label;\n      const legendItem = document.createElement(\"div\");\n      legendItem.innerHTML = `<span class='legend-item-text'>${labelShortened}</span>`;\n      legendItem.chartPartId = label;\n      legendItem.setAttribute('class', 'legend-item');\n      legendItemsElement.append(legendItem);\n\n      const legendItemColorSample = document.createElement(\"span\");\n      legendItemColorSample.setAttribute('class', 'legend-item-color-sample');\n      legendItemColorSample.style.backgroundColor = chart.color(legendItem.chartPartId);\n      legendItem.prepend(legendItemColorSample);\n\n      const tooltipElement = document.createElement(\"div\");\n      legendItem.addEventListener('mouseover', (event) => {\n        chart.focus(legendItem.chartPartId);\n        if (legendConfig.tooltip.show && legendItem.chartPartId.length > legendConfig.label.textMaxLength) {\n          tooltipElement.setAttribute('class', `keen-c3-legend-label-overlay keen-c3-legend-position-${legendConfig.position}`);\n          tooltipElement.innerHTML =\n            `${\n              options.legend.tooltip.pointer ? `<div class='overlay-pointer'></div>` : ``\n            }${legendItem.chartPartId}`;\n          legendItem.append(tooltipElement);\n        }\n      });\n      legendItem.addEventListener('mouseout', (event) => {\n        chart.revert();\n        tooltipElement.remove();\n      });\n      legendItem.addEventListener('click', (event) => {\n        let opacity = 1;\n        const isHidden = pagination.hidden.indexOf(legendItem.chartPartId);\n        if (isHidden < 0) {\n          pagination.hidden.push(legendItem.chartPartId);\n          opacity = .35;\n        }\n        else {\n          pagination.hidden.splice(isHidden, 1);\n          opacity = 1;\n        }\n        legendItem.style.opacity = opacity;\n        chart.toggle(legendItem.chartPartId);\n      });\n  });\n\n  }\n\n  function renderPaginationComponent(){\n    paginateVerticalElement.innerHTML = '';\n    paginateHorizontalLeftElement.innerHTML = '';\n    paginateHorizontalRightElement.innerHTML = '';\n\n    const arrowUp = document.createElement('i');\n    const arrowDown = document.createElement('i');\n\n    const paginate = (direction) => {\n      if (direction === 'forward') {\n        const diff = pagination.offset + pagination.limit;\n        if (diff < pagination.total) {\n          pagination.offset = diff;\n          return;\n        }\n        pagination.offset = 0;\n        return;\n      }\n\n      const diff = pagination.offset - pagination.limit;\n      if (diff >= 0) {\n        pagination.offset = diff;\n        return;\n      }\n\n      pagination.offset = Math.floor(pagination.total/pagination.limit) * pagination.limit;\n    };\n\n    arrowDown.addEventListener('click', () => {\n      paginate('forward');\n      paginateData();\n      clearSelectedText();\n    });\n\n    arrowUp.addEventListener('click', () => {\n      paginate('backward');\n      paginateData();\n      clearSelectedText();\n    });\n\n    if (legendConfig.position === 'left' || legendConfig.position === 'right') {\n      arrowUp.setAttribute('class', 'up');\n      arrowDown.setAttribute('class', 'down');\n      paginateVerticalElement.append(arrowDown);\n      paginateVerticalElement.append(arrowUp);\n    } else {\n      // bottom top\n      arrowUp.setAttribute('class', 'left');\n      arrowDown.setAttribute('class', 'right');\n      paginateHorizontalLeftElement.append(arrowUp);\n      paginateHorizontalRightElement.append(arrowDown);\n    }\n\n  }\n\n  function clearSelectedText() {\n    let selection;\n    if (document.selection && document.selection.empty) {\n      selection = document.selection;\n      selection.empty();\n    }\n    else if (window.getSelection) {\n      selection = window.getSelection();\n      selection.removeAllRanges();\n    }\n  }\n}\n","export default function (startDate, endDate) {\n  const timeDiff = Math.abs(new Date(startDate).getTime() - new Date(endDate).getTime());\n  const months = [\n    'Jan',\n    'Feb',\n    'Mar',\n    'Apr',\n    'May',\n    'June',\n    'July',\n    'Aug',\n    'Sept',\n    'Oct',\n    'Nov',\n    'Dec'\n  ];\n\n  // Yearly (31536000000) + Monthly\n  if (timeDiff >= 2419200000) {\n    return function(ms){\n      const date = new Date(ms);\n      return months[date.getMonth()] + ' ' + date.getFullYear();\n    };\n  }\n  // Daily\n  else if (timeDiff >= 86400000) {\n    return function(ms){\n      const date = new Date(ms);\n      return months[date.getMonth()] + ' ' + date.getDate();\n    };\n  }\n  // Hourly\n  else if (timeDiff >= 3600000) {\n    return '%I:%M %p';\n  }\n  // Minutely\n  else {\n    return '%I:%M:%S %p';\n  }\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__22__;","import d3 from 'd3';\nimport c3 from 'c3';\n\nimport { each } from '../utils/each';\nimport { extend } from '../utils/extend';\nimport { extendDeep } from '../utils/extend-deep';\nimport isDateString from '../utils/assert-date-string';\nimport c3DefaultDateFormat from './c3/extensions/default-date-format';\nimport c3PaginatingLegend from './c3/extensions/paginating-legend';\nimport c3TooltipContents from './c3/extensions/tooltip-contents';\n\nimport message from './default/message';\nimport metric from './default/metric';\nimport table from './default/table';\nimport spinner from './default/spinner';\n\nexport default function(lib) {\n  let timer;\n  bindResizeListener(function(){\n    if (timer) {\n      clearTimeout(timer);\n    }\n    const delay = (lib.visuals.length > 12) ? 1000 : 250;\n    timer = setTimeout(function(){\n      each(lib.visuals, function(chart){\n        if (chart.view._artifacts.c3) {\n          chart.view._artifacts.c3.resize();\n        }\n      });\n    }, delay);\n  });\n\n  return defineC3();\n};\n\nfunction defineC3(){\n  const types = {\n    message,\n    metric,\n    table,\n    spinner,\n  };\n\n  const c3Types = [\n    // Standard types\n    'area',\n    'area-spline',\n    'area-step',\n    'bar',\n    'donut',\n    'gauge',\n    'line',\n    'pie',\n    'step',\n    'spline',\n\n    // Horizontal variant types\n    'horizontal-area',\n    'horizontal-area-spline',\n    'horizontal-area-step',\n    'horizontal-bar',\n    'horizontal-line',\n    'horizontal-step',\n    'horizontal-spline'\n  ];\n\n  function getDefaultOptions(){\n    const ENFORCED_OPTIONS = {\n      bindto: this.el().querySelector('.' + this.config.theme + '-rendering .c3-chart'),\n      color: {\n        pattern: this.config.colors\n      },\n      data: {\n        colors: { ...this.config.colorMapping },\n        columns: [],\n        type: this.config.type.replace('horizontal-', '')\n      },\n    };\n\n    let height = this.el().offsetHeight;\n    if (this.config.showTitle) {\n      const titleElement = this.el().querySelector('.keen-dataviz-title');\n      if (titleElement) {\n        height -= titleElement.offsetHeight;\n      } else {\n        height -= parseInt(\n          window\n            .getComputedStyle(this.el(), null)\n            ['font-size'].replace('px','')\n          );\n      }\n    }\n\n    if (this.config.notes) {\n      const notesElement = this.el().querySelector('.keen-dataviz-notes');\n      if (notesElement) {\n        height -= notesElement.offsetHeight;\n      } else {\n        height -= parseInt(\n          window\n            .getComputedStyle(this.el(), null)\n            ['font-size'].replace('px','')\n          );\n      }\n    }\n\n    if (this.config.legend && this.config.legend.show &&\n      (\n        this.config.legend.position === 'top' ||\n        this.config.legend.position === 'bottom'\n      )\n    ) {\n      const legendElement = this.el().querySelector('.keen-c3-legend');\n      if (legendElement) {\n        height -= legendElement.offsetHeight;\n      } else {\n        height -= parseInt(\n          window\n            .getComputedStyle(this.el(), null)\n            ['font-size'].replace('px','')\n          );\n      }\n    }\n\n    const DEFAULT_OPTIONS = {\n      size: {\n        width: this.el().querySelector('.c3-chart').offsetWidth,\n        height:\n          height > 0 ?\n            height\n            : undefined,\n      }\n    };\n\n    return extendDeep({}, DEFAULT_OPTIONS, this.config, ENFORCED_OPTIONS);\n  }\n\n  each(c3Types, function(type, index) {\n    types[type] = {\n      render: function(){\n        const options = getDefaultOptions.call(this);\n\n        if (!!this.config.clearOnRender && options.data.columns.length > 0) {\n          options.data.columns.splice(1);\n        }\n\n        if (this.data()[0].length === 1 || this.data().length === 1) {\n          this.message('No data to display');\n          return;\n        }\n\n        let removeLegend = false;\n\n        if (type === 'gauge') {\n          // Accommodate a neat bug:\n          options.legend.show = false;\n          options.data.columns = [[\n            this.config.title || this.data()[1][0],\n            this.data()[1][1]\n          ]];\n          removeLegend = true;\n        }\n        else if (type === 'pie' || type === 'donut') {\n          options.data.columns = this.data().slice(1);\n        }\n        else {\n\n          // Apply formatting for horizontal variant types\n          if (type.indexOf('horizontal-') > -1) {\n            options.axis.rotated = type.indexOf('horizontal-') > -1;\n          }\n\n          if (isDateString(this.data()[1][0])) {\n            // TIMESERIES\n            options.axis.x = options.axis.x || {};\n            options.axis.x.type = 'timeseries';\n            options.axis.x.tick = options.axis.x.tick || {\n              format: this.config.dateFormat || c3DefaultDateFormat(this.data()[1][0], this.data()[2] ? this.data()[2][0] : this.data()[1][0]),\n              culling: { max: 5 }\n            };\n\n            options.data.columns[0] = [];\n            each(this.dataset.selectColumn(0), function(cell, i){\n              if (i > 0) {\n                cell = new Date(cell);\n              }\n              options.data.columns[0][i] = cell;\n            });\n            options.data.columns[0][0] = 'x';\n            options.data.x = 'x';\n            if (this.config.stacked && this.data()[0].length > 2) {\n              options.data.groups = [ this.dataset.selectRow(0).slice(1) ];\n            }\n          }\n          else {\n            // CATEGORIES\n            options.axis.x = options.axis.x || {};\n            options.axis.x.type = 'category';\n            options.axis.x.categories = this.dataset.selectColumn(0).slice(1);\n            if (this.config.stacked && this.data()[0].length > 2) {\n              options.data.groups = [ this.dataset.selectRow(0).slice(1) ];\n            }\n          }\n\n          if (this.data()[0].length === 2) {\n            options.legend.show = false;\n            removeLegend = true;\n          }\n\n          each(this.data()[0], function(cell, i){\n            if (i > 0) {\n              options.data.columns.push(this.dataset.selectColumn(i));\n            }\n          }.bind(this));\n        }\n\n        if (removeLegend){\n          const legendElement = this.el().querySelector('.keen-c3-legend');\n          if (legendElement) {\n            legendElement.remove();\n            options.size.width = this.el().querySelector('.c3-chart').offsetWidth;\n          }\n          options.legend.show = false;\n        }\n\n        if (options.legend.show === true) {\n            const c3options = { ...options };\n                // Apply custom color handling\n            c3options.data.color = c3CustomDataMapping.bind(this);\n\n            // Apply custom tooltip\n            c3options.tooltip = {\n              contents: c3TooltipContents,\n              format: {\n                title: this.config.tooltip.format.title,\n                value: (value, ratio, id, index) => {\n                  let valueFormatted = c3CustomTooltipFiltering.call(this, value, ratio, id, index);\n                  if (this.config.tooltip && this.config.tooltip.format && this.config.tooltip.format.value)\n                  {\n                    valueFormatted = this.config.tooltip.format.value.call(this, valueFormatted, ratio, id, index);\n                  }\n                  return valueFormatted;\n                }\n              }\n            };\n\n            c3options.legend.show = false; // hide default c3 legend\n\n            // Render artifacts\n            this.view._artifacts['c3'] = c3.generate(c3options);\n            c3PaginatingLegend.call(this, options);\n        }\n        else {\n          this.view._artifacts['c3'] = c3.generate(options);\n        }\n\n      },\n      update: function(){\n        // no special update handling\n        this.render();\n      },\n      destroy: function(){\n        if (this.view._artifacts['c3']) {\n          this.view._artifacts['c3'].destroy();\n          this.view._artifacts['c3'] = null;\n        }\n      }\n    };\n  });\n\n  return types;\n}\n\nfunction c3CustomDataMapping(color, d) {\n  const type = this.config.type;\n  if (this.view._artifacts.pagination\n    && type !== 'gauge'\n      /*&& this.type() !== 'pie'\n        && this.type() !== 'donut'*/) {\n          const scope = this.view._artifacts.pagination.labels;\n          if ((d.id && scope.indexOf(d.id) > -1)\n            || (d && !d.id && scope.indexOf(d) > -1)) {\n              return color;\n          }\n          else {\n            if (type === 'donut' || type === 'pie') {\n              return 'rgba(0,0,0,.1)';\n            }\n            else {\n              return 'rgba(0,0,0,.07)';\n            }\n          }\n  }\n  else {\n    return color;\n  }\n}\n\nfunction c3CustomTooltipFiltering(value, ratio, id, index) {\n  const type = this.config.type;\n\n  if (this.view._artifacts.pagination\n    && type !== 'gauge'\n      /*&& this.type() !== 'pie'\n        && this.type() !== 'donut'*/) {\n          const scope = this.view._artifacts.pagination.labels;\n          if (scope.indexOf(id) > -1) {\n            return value;\n          }\n  }\n  else {\n    return value;\n  }\n}\n\nfunction bindResizeListener(fn){\n  if ('undefined' === typeof window) return;\n  window.onresize = window.resize = function(){};\n  if (window.addEventListener) {\n    window.addEventListener('resize', fn, true);\n  }\n  else if (window.attachEvent) {\n    window.attachEvent('onresize', fn);\n  }\n}\n","import Dataset from './dataset';\nimport { extend } from './utils/extend';\nimport { stripHtmlTags } from './utils/strip-html-tags';\n\nexport default function (data) {\n  if (!arguments.length) return this.dataset.data();\n  if (data instanceof Dataset) {\n    this.dataset = data;\n    return this;\n  }\n  else {\n    return parseResponse.call(this, data);\n  }\n};\n\nfunction parseResponse(response) {\n  var dataset,\n      indexBy,\n      meta,\n      parser,\n      parserArgs = [],\n      query,\n      selectedParser,\n      title,\n      type;\n\n  indexBy = this.config.indexBy;\n  meta = response.metadata || {};\n  query = (typeof response.query !== 'undefined') ? response.query : {};\n\n  // Ensure all required params are present\n  query = extend({\n    analysis_type: null,\n    event_collection: null,\n    filters: [],\n    group_by: null,\n    interval: null,\n    timeframe: null,\n    timezone: null\n  }, query);\n\n  if (query.analysis_type === 'funnel') {\n    parser = 'funnel';\n  }\n  else if (query.analysis_type === 'extraction'){\n    parser = 'extraction';\n  }\n  else if (query.analysis_type === 'select_unique') {\n    if (!query.group_by && !query.interval) {\n      parser = 'list';\n    }\n    // else { Not supported }\n  }\n  else if (query.analysis_type) {\n    if (!query.group_by && !query.interval) {\n      parser = 'metric';\n    }\n    else if (query.group_by && !query.interval) {\n      if (query.group_by instanceof Array && query.group_by.length > 1) {\n        parser = 'double-grouped-metric';\n        parserArgs.push(query.group_by);\n      }\n      else {\n        parser = 'grouped-metric';\n      }\n    }\n    else if (query.interval && !query.group_by) {\n      parser = 'interval';\n      parserArgs.push(indexBy);\n    }\n    else if (query.group_by && query.interval) {\n      if (query.group_by instanceof Array && query.group_by.length > 1) {\n        parser = 'double-grouped-interval';\n        parserArgs.push(query.group_by);\n        parserArgs.push(indexBy);\n      }\n      else {\n        parser = 'grouped-interval';\n        parserArgs.push(indexBy);\n      }\n    }\n  }\n\n  if (!parser) {\n\n    // Metric\n    // -------------------------------\n    if (typeof response.result === 'number'){\n      parser = 'metric';\n    }\n\n    // Everything else\n    // -------------------------------\n    if (response.result instanceof Array && response.result.length > 0){\n\n      // Interval w/ single value\n      // -------------------------------\n      if (response.result[0].timeframe && (typeof response.result[0].value == 'number' || response.result[0].value == null)) {\n        parser = 'interval';\n        parserArgs.push(indexBy)\n      }\n\n      // Static GroupBy\n      // -------------------------------\n      if (typeof response.result[0].result == 'number'){\n        parser = 'grouped-metric';\n      }\n\n      // Grouped Interval\n      // -------------------------------\n      if (response.result[0].value instanceof Array){\n        parser = 'grouped-interval';\n        parserArgs.push(indexBy)\n      }\n\n      // Funnel\n      // -------------------------------\n      if (typeof response.result[0] === 'number'\n        && typeof response.steps !== 'undefined'){\n          parser = 'funnel';\n          // Move steps into query object\n          query.steps = response.steps;\n      }\n\n      // Select Unique\n      // -------------------------------\n      if ((typeof response.result[0] === 'string' || typeof response.result[0] == 'number') && typeof response.steps === 'undefined'){\n        parser = 'list';\n      }\n\n      // Extraction\n      // -------------------------------\n      if (!parser) {\n        parser = 'extraction';\n      }\n    }\n\n    if (!parser) {\n      parser = 'extraction';\n    }\n  }\n\n  // Set title from saved query body, or create a default title\n  if (!this.config.title) {\n    if (meta.display_name) {\n      title = meta.display_name;\n    }\n    else {\n      title = getDefaultTitle(query);\n    }\n    this.config.title = title;\n  }\n\n  // Set type from saved query body, or use a default type\n  if (!this.config.type) {\n    if (meta.visualization && meta.visualization.chart_type) {\n      type = meta.visualization.chart_type;\n    }\n    else {\n      type = getDefaultType(parser);\n    }\n    this.config.type = type;\n  }\n\n  // Define the appropriate parser\n  selectedParser = Dataset.parser.apply(this, [parser].concat(parserArgs));\n\n  // Parse the response with augmented query body\n  dataset = selectedParser(extend(response, { 'query': query }));\n\n  // Set true dates for 'interval' data\n  if (parser.indexOf('interval') > -1) {\n    dataset.updateColumn(0, function(value, i){\n      return new Date(value);\n    });\n  }\n\n  dataset.updateRow(0, function(value, i){\n    return stripHtmlTags(value);\n  });\n\n  this.dataset = dataset;\n\n  return this;\n}\n\nfunction getDefaultTitle(query) {\n  var analysis = query.analysis_type ? query.analysis_type.replace('_', ' ') : '',\n      title;\n\n  title = analysis.replace( /\\b./g, function(a){\n    return a.toUpperCase();\n  });\n\n  if (query.event_collection) {\n    title += ' - ' + query.event_collection;\n  }\n  return title;\n}\n\nfunction getDefaultType(parser) {\n  let type;\n  switch (parser) {\n    case 'metric':\n      type = 'metric';\n      break;\n    case 'interval':\n      type = 'area';\n      break;\n    case 'grouped-metric':\n    case 'double-grouped-metric':\n      type = 'bar';\n      break;\n    case 'grouped-interval':\n    case 'double-grouped-interval':\n      type = 'line';\n      break;\n    case 'funnel':\n      type = 'horizontal-bar';\n      break;\n    case 'list':\n    case 'extraction':\n    default:\n      type = 'table';\n  }\n  return type;\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","import Promise from './index';\nimport promiseFinally from './finally';\n\nvar globalNS = (function() {\n  // the only reliable means to get the global object is\n  // `Function('return this')()`\n  // However, this causes CSP violations in Chrome apps.\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n  throw new Error('unable to locate global object');\n})();\n\nif (!globalNS.Promise) {\n  globalNS.Promise = Promise;\n} else if (!globalNS.Promise.prototype['finally']) {\n  globalNS.Promise.prototype['finally'] = promiseFinally;\n}\n","export function valueAtDeepKey(obj, is, value) {\n  if (typeof is == 'string')\n    return valueAtDeepKey(obj, is.split('.'), value);\n  else if (is.length==1 && value!==undefined && obj !== null &&\n    typeof obj[is[0]] !== 'undefined')\n    return obj[is[0]] = value;\n  else if (is.length==0)\n    return obj;\n  else if (typeof is === 'undefined' || typeof obj === 'undefined'\n    || is === null || obj === null\n    || typeof obj[is[0]] === 'undefined')\n    return null;\n  else\n    return valueAtDeepKey(obj[is[0]], is.slice(1), value);\n}\n","// Pure awesomeness by Will Rayner (penguinboy)\n// https://gist.github.com/penguinboy/762197\n\nexport function flatten(ob){\n  var toReturn = {};\n  for (var i in ob) {\n    if (!ob.hasOwnProperty(i)) continue;\n    if ((typeof ob[i]) == 'object' && ob[i] !== null) {\n      var flatObject = flatten(ob[i]);\n      for (var x in flatObject) {\n        if (!flatObject.hasOwnProperty(x)) continue;\n        toReturn[i + '.' + x] = flatObject[x];\n      }\n    } else {\n      toReturn[i] = ob[i];\n    }\n  }\n  return toReturn;\n};\n","let Dataset; /* injected */\n\nimport { each } from '../../utils/each';\nimport { flatten } from '../utils/flatten';\nimport { valueAtDeepKey } from '../utils/object';\n\nexport default function initialize(lib){\n  Dataset = lib;\n  return function(name){\n    var options = Array.prototype.slice.call(arguments, 1);\n\n    if (!parsers[name]) {\n      throw 'Requested parser does not exist';\n    }\n    else {\n      return parsers[name].apply(this, options);\n    }\n  };\n}\n\nfunction parseMetric(){\n  return function(res){\n    return new Dataset()\n      .set(['Value', 'Result'], res.result)\n      .type('metric');\n  }\n}\n\n//var myParser = Dataset.parser('interval', 'timeframe.end');\nfunction parseInterval(){\n  var options = Array.prototype.slice.call(arguments);\n  return function(res){\n    var dataset = new Dataset()\n      .type('interval');\n    each(res.result, function(record, i){\n      var index = options[0] && options[0] === 'timeframe.end' ? record.timeframe.end : record.timeframe.start;\n      dataset.set(['Result', index], record.value);\n    });\n    return dataset;\n  }\n}\n\nfunction parseGroupedMetric(){\n  return function(res){\n    var dataset = new Dataset()\n      .type('grouped-metric');\n    each(res.result, function(record, i){\n      var label;\n      each(record, function(value, key){\n        if (key !== 'result') {\n          label = key;\n        }\n      });\n      dataset.set(['Result', String(record[label])], record.result);\n    });\n    return dataset;\n  }\n}\n\n//var myParser = Dataset.parser('grouped-interval', 'timeframe.end');\nfunction parseGroupedInterval(){\n  var options = Array.prototype.slice.call(arguments);\n  return function(res){\n    var dataset = new Dataset()\n      .type('grouped-interval');\n    each(res.result, function(record, i){\n      var index = options[0] && options[0] === 'timeframe.end' ? record.timeframe.end : record.timeframe.start;\n      if (record.value.length) {\n        each(record.value, function(group, j){\n          var label;\n          each(group, function(value, key){\n            if (key !== 'result') {\n              label = key;\n            }\n          });\n          dataset.set([ String(group[label]), index ], group.result);\n        });\n      }\n      else {\n        dataset.appendRow(index);\n      }\n    });\n    return dataset;\n  }\n}\n\n//var myParser = Dataset.parser('double-grouped-metric', ['first', 'second']);\nfunction parseDoubleGroupedMetric(){\n  var options = Array.prototype.slice.call(arguments);\n  if (!options[0]) throw 'Requested parser requires a sequential list (array) of properties to target as a second argument';\n  return function(res){\n    var dataset = new Dataset()\n      .type('double-grouped-metric');\n    each(res.result, function(record, i){\n      var rowLabel = record[options[0][0]] + ' ' + record[options[0][1]];\n      dataset.set([ 'Result', rowLabel ], record.result);\n    });\n    return dataset;\n  }\n}\n\n//var myParser = Dataset.parser('double-grouped-interval', ['first', 'second'], 'timeframe.end');\nfunction parseDoubleGroupedInterval(){\n  var options = Array.prototype.slice.call(arguments);\n  if (!options[0]) throw 'Requested parser requires a sequential list (array) of properties to target as a second argument';\n  return function(res){\n    var dataset = new Dataset()\n      .type('double-grouped-interval');\n    each(res.result, function(record, i){\n      var index = options[1] && options[1] === 'timeframe.end' ? record.timeframe.end : record.timeframe.start;\n      each(record['value'], function(value, j){\n        var label = value[options[0][0]] + ' ' + value[options[0][1]];\n        dataset.set([ label, index ], value.result);\n      });\n    });\n    return dataset;\n  }\n}\n\nfunction parseFunnel(){\n  return function(res){\n    var result, steps, dataset;\n    if (typeof res.steps !== 'undefined'\n        && typeof res.result !== 'undefined'\n          && res.result instanceof Array) {\n            // Ad-hoc funnel response\n            result = res.result;\n            steps = res.steps;\n    }\n    else if (typeof res.result.steps !== 'undefined'\n        && typeof res.result.result !== 'undefined'\n          && res.result.result instanceof Array) {\n            // Saved funnel response\n            result = res.result.result;\n            steps = res.result.steps;\n    }\n    dataset = new Dataset().type('funnel');\n    dataset.appendColumn('Step Value');\n    each(result, function(value, i){\n      if (typeof steps !== 'undefined' && steps[i]) {\n        dataset.appendRow(String(steps[i].event_collection), [value]);\n      }\n    });\n    return dataset;\n  }\n}\n\nfunction parseList(){\n  return function(res){\n    var dataset = new Dataset()\n      .type('list');\n    each(res.result, function(value, i){\n      dataset.set( [ 'Result', String(i+1) ], value );\n    });\n    return dataset;\n  }\n}\n\nfunction parseExtraction(){\n  let config = this.config;\n  return function(res){\n    const datasetExtraction = new Dataset()\n      .type('extraction');\n    // create header\n    for (let i=0; i<1; i++){\n      let record = res.result[i];\n      each(flatten(record), function(value, key){\n        datasetExtraction.set([ key, String(i+1) ], value);\n      });\n    }\n\n    // get keys of the Object\n    let names = Object.keys(flatten(res.result[0]));\n\n    if (Dataset) {\n      if (config.table\n        && config.table.columns) {\n        names = config.table.columns;\n      }\n    }\n\n    for (let i=0; i<res.result.length; i++){\n      let record = [i+1];\n      for (let iNames=0; iNames<names.length; iNames++){\n        record.push(valueAtDeepKey(res.result[i], names[iNames]));\n      }\n      datasetExtraction.matrix[String(i+1)] = record;\n    }\n\n    datasetExtraction.deleteColumn(0);\n    return datasetExtraction;\n  }\n}\n\n// Parser definitions\nconst parsers = {\n  metric: parseMetric,\n  interval: parseInterval,\n  'grouped-metric': parseGroupedMetric,\n  'grouped-interval': parseGroupedInterval,\n  'double-grouped-metric': parseDoubleGroupedMetric,\n  'double-grouped-interval': parseDoubleGroupedInterval,\n  funnel: parseFunnel,\n  list: parseList,\n  extraction: parseExtraction,\n};\n","import { each } from '../../utils/each';\nimport createNullList from '../utils/create-null-list';\nimport { appendRow, appendColumn } from './append';\n\nexport function updateColumn(q, input) {\n  var self = this,\n      index = (typeof q === 'number') ? q : this.matrix[0].indexOf(q);\n\n  if (index > -1) {\n\n    if (typeof input === 'function') {\n\n      each(self.data(), function(row, i){\n        var cell;\n        if (i > 0) {\n          cell = input.call(self, row[index], i, row);\n          if (typeof cell !== 'undefined') {\n            self.matrix[i][index] = cell;\n          }\n        }\n      });\n\n    } else if (!input || input instanceof Array) {\n      input = input || [];\n\n      if (input.length <= self.data().length - 1) {\n        input = input.concat( createNullList(self.data().length - 1 - input.length) );\n      }\n      else {\n        // If this new column is longer than existing columns,\n        // we need to update the rest to match ...\n        each(input, function(value, i){\n          if (self.matrix.length -1 < input.length) {\n            appendRow.call(self, String( self.matrix.length ));\n          }\n        });\n      }\n\n      each(input, function(value, i){\n        self.matrix[i+1][index] = value;\n      });\n\n    }\n\n  }\n  return self;\n}\n\nexport function updateRow(q, input){\n  var self = this,\n      index = (typeof q === 'number') ? q : this.selectColumn(0).indexOf(q);\n\n  if (index > -1) {\n\n    if (typeof input === 'function') {\n\n      each(self.data()[index], function(value, i){\n        var col = self.selectColumn(i),\n        cell = input.call(self, value, i, col);\n        if (typeof cell !== 'undefined') {\n          self.matrix[index][i] = cell;\n        }\n      });\n\n    } else if (!input || input instanceof Array) {\n      input = input || [];\n\n      if (input.length <= self.matrix[0].length - 1) {\n        input = input.concat( createNullList( self.matrix[0].length - 1 - input.length ) );\n      }\n      else {\n        each(input, function(value, i){\n          if (self.matrix[0].length -1 < input.length) {\n            appendColumn.call(self, String( self.matrix[0].length ));\n          }\n        });\n      }\n\n      each(input, function(value, i){\n        self.matrix[index][i+1] = value;\n      });\n    }\n\n  }\n  return self;\n}\n","import { each } from '../../utils/each';\nimport analysesUtilMethods from '../utils/analyses';\n\nexport function sortColumns(str, comp) {\n  var self = this,\n      head = this.matrix[0].slice(1), // minus index\n      cols = [],\n      clone = [],\n      fn = comp || analysesUtilMethods.getColumnLabel;\n\n  // Isolate each column (except the index)\n  each(head, function(cell, i) {\n    cols.push(self.selectColumn(i+1).slice(0));\n  });\n  cols.sort(function(a,b){\n    // If fn(a) > fn(b)\n    var op = fn.call(self, a) > fn.call(self, b);\n    if (op) {\n      return (str === 'asc' ? 1 : -1);\n    } else if (!op) {\n      return (str === 'asc' ? -1 : 1);\n    } else {\n      return 0;\n    }\n  });\n  each(cols, function(col, i) {\n    self\n      .deleteColumn(i+1)\n      .insertColumn(i+1, col[0], col.slice(1));\n  });\n  return self;\n}\n\nexport function sortRows(str, comp) {\n  var self = this,\n      head = this.matrix.slice(0,1),\n      body = this.matrix.slice(1),\n      fn = comp || analysesUtilMethods.getRowIndex;\n  body.sort(function(a, b){\n    // If fn(a) > fn(b)\n    var op = fn.call(self, a) > fn.call(self, b);\n    if (op) {\n      return (str === 'asc' ? 1 : -1);\n    } else if (!op) {\n      return (str === 'asc' ? -1 : 1);\n    } else {\n      return 0;\n    }\n  });\n  self.data(head.concat(body));\n  return self;\n}\n","import { each } from '../../utils/each';\n\nexport function selectColumn(q) {\n  const result = [];\n  const index = (typeof q === 'number') ? q : this.matrix[0].indexOf(q);\n\n  if (index > -1 && typeof this.matrix[0][index] !== 'undefined') {\n    each(this.matrix, function(row, i) {\n      result.push(row[index]);\n    });\n  }\n  return result;\n}\n\nexport function selectRow(q) {\n  let result = [];\n  const index = (typeof q === 'number') ? q : this.selectColumn(0).indexOf(q);\n\n  if (index > -1 && typeof this.matrix[index] !== 'undefined') {\n    result = this.matrix[index];\n  }\n  return result;\n}\n","import { each } from '../../utils/each';\nimport createNullList from '../utils/create-null-list';\nimport { appendRow, appendColumn } from './append';\n\nexport function insertColumn(index, str, input) {\n  const self = this;\n  const label = (str !== undefined) ? str : null;\n\n  if (typeof input === 'function') {\n\n    self.matrix[0].splice(index, 0, label);\n    each(self.matrix, function(row, i) {\n      var cell;\n      if (i > 0) {\n        cell = input.call(self, row, i);\n        if (typeof cell === 'undefined') {\n          cell = null;\n        }\n        self.matrix[i].splice(index, 0, cell);\n      }\n    });\n\n  }\n\n  else if (!input || input instanceof Array) {\n    input = input || [];\n\n    if (input.length <= self.matrix.length - 1) {\n      input = input.concat( createNullList(self.matrix.length - 1 - input.length) );\n    }\n    else {\n      // If this new column is longer than existing columns,\n      // we need to update the rest to match ...\n      each(input, function(value, i){\n        if (self.matrix.length -1 < input.length) {\n          appendRow.call(self, String( self.matrix.length ));\n        }\n      });\n    }\n\n    self.matrix[0].splice(index, 0, label);\n    each(input, function(value, i){\n      self.matrix[i+1].splice(index, 0, value);\n    });\n\n  }\n  return self;\n}\n\nexport function insertRow(index, str, input) {\n  const self = this;\n  const newRow = [];\n  const label = (str !== undefined) ? str : null;\n  newRow.push(label);\n\n  if (typeof input === 'function') {\n    each(self.matrix[0], function(label, i) {\n      let col;\n      let cell;\n      if (i > 0) {\n        col = self.selectColumn(i);\n        cell = input.call(self, col, i);\n        if (typeof cell === 'undefined') {\n          cell = null;\n        }\n        newRow.push(cell);\n      }\n    });\n    self.matrix.splice(index, 0, newRow);\n  }\n\n  else if (!input || input instanceof Array) {\n    input = input || [];\n\n    if (input.length <= self.matrix[0].length - 1) {\n      input = input.concat( createNullList( self.matrix[0].length - 1 - input.length ) );\n    }\n    else {\n      each(input, function(value, i){\n        if (self.matrix[0].length -1 < input.length) {\n          appendColumn.call(self, String( self.matrix[0].length ));\n        }\n      });\n    }\n\n    self.matrix.splice(index, 0, newRow.concat(input) );\n  }\n\n  return self;\n}\n","import { each } from '../../utils/each';\n\nexport function filterColumns(fn) {\n  const self = this;\n  const clone = [];\n\n  each(self.matrix, function(row, i) {\n    clone.push([]);\n  });\n\n  each(self.matrix[0], function(col, i){\n    var selectedColumn = self.selectColumn(i);\n    if (i == 0 || fn.call(self, selectedColumn, i)) {\n      each(selectedColumn, function(cell, ri){\n        clone[ri].push(cell);\n      });\n    }\n  });\n\n  self.data(clone);\n  return self;\n}\n\nexport function filterRows(fn) {\n  const self = this;\n  const clone = [];\n\n  each(self.matrix, function(row, i){\n    if (i == 0 || fn.call(self, row, i)) {\n      clone.push(row);\n    }\n  });\n\n  self.data(clone);\n  return self;\n}\n","import { each } from '../../utils/each';\n\nexport function deleteColumn(q) {\n  const self = this;\n  const index = (typeof q === 'number') ? q : this.matrix[0].indexOf(q);\n\n  if (index > -1) {\n    each(self.matrix, function(row, i){\n      self.matrix[i].splice(index, 1);\n    });\n  }\n  return self;\n}\n\nexport function deleteRow(q) {\n  var index = (typeof q === 'number') ? q : this.selectColumn(0).indexOf(q);\n\n  if (index > -1) {\n    this.matrix.splice(index, 1);\n  }\n  return this;\n}\n","import 'promise-polyfill/src/polyfill';\n\nimport data from './data';\nimport { Dataset } from './dataset';\n// Utils\nimport { each } from './utils/each';\nimport isDateString from './utils/assert-date-string';\nimport { stripHtmlTags } from './utils/strip-html-tags';\nimport { escapeHtml } from './utils/escape-html';\nimport libraries from './libraries';\nimport { extendDeep } from './utils/extend-deep';\n\n// Constructor\nexport const Dataviz = function (options = {}) {\n  if (this instanceof Dataviz === false) {\n    return new Dataviz(options);\n  }\n\n  const datavizInstance = this;\n\n  const defaultOptions = {\n    showDeprecationWarnings: true,\n    showLoadingSpinner: false,\n\n    container: undefined, // querySelector of container, for example '#someDiv'\n    containerElement: undefined, // HTML parent element for the chart\n\n    // width: undefined, *deprecated* - use CSS\n    // height: undefined, *deprecated* - use CSS\n\n    title: undefined,\n    showTitle: true,\n\n    notes: undefined,\n    theme: 'keen-dataviz',\n\n    colors: [\n      '#00bbde', '#fe6672', '#eeb058', '#8a8ad6', '#ff855c', '#00cfbb',\n      '#5a9eed', '#73d483', '#c879bb', '#0099b6', '#d74d58', '#cb9141',\n      '#6b6bb6', '#d86945', '#00aa99', '#4281c9', '#57b566', '#ac5c9e',\n      '#27cceb', '#ff818b', '#f6bf71', '#9b9be1', '#ff9b79', '#26dfcd',\n      '#73aff4', '#87e096', '#d88bcb',\n    ],\n\n    colorMapping: {},\n\n    indexBy: 'timeframe.start',\n    labels: [],\n    labelMapping: {},\n    library: 'default',\n    sortGroups: undefined,\n    sortIntervals: undefined,\n\n    results: undefined, // raw data\n\n    // C3 chartOptions\n    type: undefined,\n    stacked: false,\n    dateFormat: undefined,\n    legend: {\n      show: true,\n      position: 'right',\n      label: {\n        textMaxLength: 12\n      },\n      pagination: {\n        offset: 0, // start from\n        limit: 5 // items per page\n      },\n      tooltip: {\n        show: true,\n        pointer: true\n      }\n    },\n\n    axis: {},\n    color: {},\n    data: {\n      order: null\n    },\n    size: {\n      // control it with CSS of .c3-chart\n    },\n    padding: {},\n    point: {\n      focus: {\n        expand: {\n          enabled: false\n        }\n      },\n      r: 2,\n      show: true\n    },\n    tooltip: {\n      format: {\n        // https://c3js.org/samples/tooltip_format.html\n      }\n    },\n    transition: {\n      // duration: 0\n    }\n  };\n\n  this.config = { ...extendDeep(defaultOptions, options) };\n\n  // get DOM node by query\n  if (this.config.container) {\n    this.el(this.config.container);\n  }\n\n  if (options.legend !== undefined && !options.legend) {\n    this.config.legend = {\n      ...options,\n      show: false\n    };\n  }\n\n  this.dataset = new Dataset(this.config);\n  this.view = {\n    _prepared: false,\n    _rendered: false,\n    _artifacts: { /* state bin */ }\n  };\n\n  Dataviz.visuals.push(this);\n\n  if (this.config.showLoadingSpinner) {\n    this.prepare();\n  }\n\n  if (!!this.config.results) {\n    this.render(this.config.results);\n  }\n};\n\nDataviz.libraries = { default: {} };\nif (typeof window !== 'undefined') {\n  Dataviz.libraries.default = libraries(Dataviz);\n}\nDataviz.visuals = [];\n\nDataviz.register = function (name, actions) {\n  Dataviz.libraries[name] = Dataviz.libraries[name] || {};\n  each(actions, function(method, key){\n    Dataviz.libraries[name][key] = method;\n  });\n};\n\nDataviz.find = function(target){\n  if (!arguments.length) return Dataviz.visuals;\n  const el = target.nodeName ? target : document.querySelector(target);\n  let match = null;\n  each(Dataviz.visuals, function(visual){\n    if (el == visual.config.container){\n      match = visual;\n      return false;\n    }\n  });\n  return match;\n};\n\n\n  // Prototype\n  // ------------\n\nDataviz.prototype.attributes = function(obj){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.attributes() is deprecated. Use: new KeenDataviz({ _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config;\n  const view = this.config;\n  each(obj, function(prop, key){\n    // Handle deprecated property names\n    if (key === 'chartType') {\n      key = 'type';\n    }\n    view[key] = prop;\n  });\n  return this;\n};\n\nDataviz.prototype.call = function(fn){\n    fn.call(this);\n    return this;\n};\n\nDataviz.prototype.chartOptions = function(obj){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.chartOptions() is deprecated. Use: new KeenDataviz({ _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config;\n  this.config = extendDeep(this.config, obj);\n  return this;\n};\n\nDataviz.prototype.colors = function(arr){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.colors() is deprecated. Use: new KeenDataviz({ colors: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.colors;\n  this.config.colors = (arr instanceof Array ? arr : []);\n  return this;\n};\n\nDataviz.prototype.colorMapping = function(obj){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.colorMapping() is deprecated. Use: new KeenDataviz({ colorMapping: _your_value_here_ })');\n  }\n  const datavizInstance = this;\n  if (!arguments.length) return this.config.colorMapping;\n  if (obj === null) {\n    this.config.colorMapping = {};\n  }\n  else if (typeof obj === 'object') {\n    each(obj, function(value, key){\n      datavizInstance.config.colorMapping[key] = (value ? value : null);\n    });\n  }\n  return this;\n};\n\nDataviz.prototype.data = data;\n\nDataviz.prototype.dateFormat = function(val){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.dateFormat() is deprecated. Use: new KeenDataviz({ dateFormat: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.dateFormat;\n  if (typeof val === 'string' || typeof val === 'function') {\n    this.config.dateFormat = val;\n  }\n  else {\n    this.config.dateFormat = undefined;\n  }\n  return this;\n};\n\nDataviz.prototype.destroy = function(){\n  const library = this.library();\n  const type = this.config.type;\n  const element = this.el();\n\n    // Call destroy method if present\n  if (Dataviz.libraries[library]\n      && Dataviz.libraries[library][type]){\n        Dataviz.libraries[library][type].destroy.call(this);\n  }\n\n    // Clear rendered artifacts, state bin\n  if (element) {\n    element.innerHTML = '';\n  }\n  this.view._prepared = false;\n  this.view._rendered = false;\n  this.view._artifacts = {};\n  return this;\n};\n\nDataviz.prototype.el = function(target){\n  const datavizInstance = this;\n  if (!arguments.length) return this.config.containerElement;\n  domReady(function(){\n    if (target && target !== null) {\n      if (target.nodeName) {\n        datavizInstance.config.containerElement = target;\n      }\n      else if (document.querySelector) {\n        datavizInstance.config.containerElement = document.querySelector(target);\n      }\n    }\n    else {\n      datavizInstance.config.containerElement = undefined;\n    }\n  });\n  return this;\n};\n\nDataviz.prototype.height = function(num){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.height() is deprecated - use CSS classes');\n  }\n  return this;\n};\n\n// IMPORTANT: Must be run before data parsing\nDataviz.prototype.indexBy = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.indexBy() is deprecated. Use: new KeenDataviz({ indexBy: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.indexBy;\n  this.config.indexBy = (str ? String(str) : 'timeframe.start');\n  return this;\n};\n\nDataviz.prototype.labels = function(arr){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.labels() is deprecated. Use: new KeenDataviz({ labels: _your_value_here_ })');\n  }\n\n  if (!arguments.length) return this.config.labels;\n  this.config.labels = (arr instanceof Array ? arr : []);\n\n  setLabels(this);\n\n  return this;\n};\n\nfunction setLabels(datavizInstance){\n  // Write labels\n  if (datavizInstance.data()[0].length === 2 && !isDateString(datavizInstance.data()[1][0])) {\n    datavizInstance.dataset.updateColumn(0, function(value, index){\n      if (datavizInstance.config.labels[index-1]) {\n        return stripHtmlTags(String(datavizInstance.config.labels[index-1]));\n      }\n      return stripHtmlTags(value);\n    }.bind(datavizInstance));\n  }\n  else {\n    datavizInstance.dataset.updateRow(0, function(value, index){\n      if (index > 0 && datavizInstance.config.labels[index-1]) {\n        return stripHtmlTags(String(datavizInstance.config.labels[index-1]));\n      }\n      return stripHtmlTags(value);\n    }.bind(datavizInstance));\n  }\n}\n\nDataviz.prototype.labelMapping = function(obj){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.labelMapping() is deprecated. Use: new KeenDataviz({ labelMapping: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.labelMapping;\n  if (obj === null) {\n    this.config.labelMapping = {};\n  }\n  else if (typeof obj === 'object') {\n    each(obj, function(value, key){\n      this.config.labelMapping[key] = (value ? value : null);\n    }.bind(this));\n  }\n\n  mapLabels(this);\n\n  return this;\n};\n\nfunction mapLabels(datavizInstance){\n  // Write labels\n  if (datavizInstance.data()[0].length === 2 && !isDateString(datavizInstance.data()[1][0])) {\n    datavizInstance.dataset.updateColumn(0, function(value){\n      if (datavizInstance.config.labelMapping[value]) {\n        return stripHtmlTags(String(datavizInstance.config.labelMapping[value]));\n      }\n      return stripHtmlTags(value);\n    }.bind(datavizInstance));\n  }\n  else {\n    datavizInstance.dataset.updateRow(0, function(value){\n      if (datavizInstance.config.labelMapping[value]) {\n        return stripHtmlTags(String(datavizInstance.config.labelMapping[value]));\n      }\n      return stripHtmlTags(value);\n    }.bind(datavizInstance));\n  }\n}\n\nDataviz.prototype.library = function(str){\n    if (!arguments.length) return this.config['library'];\n    this.config['library'] = (str ? String(str) : null);\n    return this;\n};\n\nDataviz.prototype.message = function(){\n    if (this.view._rendered) {\n      this.destroy();\n    }\n    if (this.el()) {\n      this.el().innerHTML = '';\n      const message = Dataviz.libraries.default.message;\n      if (message.render) {\n        message.render.apply(this, arguments);\n      }\n    }\n    return this;\n};\n\nDataviz.prototype.notes = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.notes() is deprecated. Use: new KeenDataviz({ notes: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.notes;\n  this.config.notes = (str ? String(str) : null);\n  return this;\n};\n\nDataviz.prototype.prepare = function(){\n    const datavizInstance = this;\n\n    if (!this.el()) {\n      throw `${this.config.container} not found. A DOM parent element is required to mount the chart.`;\n      return;\n    }\n\n    domReady(function(){\n      if (datavizInstance.view._rendered) {\n        datavizInstance.destroy();\n      }\n      if (datavizInstance.el()) {\n        datavizInstance.el().innerHTML = '';\n        const loader = Dataviz.libraries.default.spinner;\n        if (loader.render) {\n          loader.render.call(datavizInstance);\n        }\n        datavizInstance.view._prepared = true;\n      }\n    });\n\n    return this;\n};\n\nDataviz.prototype.render = function(results = undefined){\n  const datavizInstance = this;\n  if (!!results) {\n    if (Array.isArray(results)) {\n      const timeframes = results.map(resultItem => resultItem.query.timeframe);\n      timeframes.forEach(resultTimeframe => {\n        let foundDifferent = timeframes.find(timeframeItem => timeframeItem !== resultTimeframe);\n        if (foundDifferent){\n          const msg = 'Timeframes of the queries should be the same';\n          console.error(msg);\n          throw msg;\n        }\n      });\n      // first result is important to prepare X on the chart\n      return datavizInstance\n        .data(results[0])\n        .call(() => {\n          const getLabel = (input) => {\n            return `${input.query.event_collection} ${input.query.analysis_type}`;\n          }\n          let label = getLabel(results[0]);\n          if (datavizInstance.config.labelMapping[label]) {\n            label = datavizInstance.config.labelMapping[label];\n          }\n          datavizInstance.config.labelMapping = {\n            'Result': label,\n            ...datavizInstance.config.labelMapping\n          };\n          // this.dataset.appendColumn(label, ds2.selectColumn(1).slice(1));\n          let firstResultPassed = false;\n          for (let result of results) {\n            if (!firstResultPassed) {\n              firstResultPassed = true;\n              continue;\n            }\n            label = getLabel(result);;\n            let ds2 = Dataset.parser('interval')(result);\n            datavizInstance.dataset.appendColumn(label, ds2.selectColumn(1).slice(1));\n          }\n        })\n        .render();\n    }\n    return datavizInstance.data(results).render();\n  }\n  if (!!this.config.labelMapping && Object.keys(this.config.labelMapping).length > 0){\n    mapLabels(datavizInstance);\n  }\n  if (!!this.config.labels && Object.keys(this.config.labels).length > 0){\n    setLabels(datavizInstance);\n  }\n  if (!!this.config.sortGroups) {\n    sortGroups(datavizInstance);\n  }\n  if (!!this.config.sortIntervals) {\n    sortIntervals(datavizInstance);\n  }\n\n  const loader = Dataviz.libraries.default.spinner;\n  const library = this.config.library;\n  const type = this.config.type;\n  const containerElement = this.el();\n\n  if (!containerElement || containerElement === undefined) {\n    const msg = `${this.config.container} not found. A DOM parent element is required to mount the chart.`;\n    console.error(msg);\n    throw msg;\n    return;\n  }\n\n  let returnValue = datavizInstance;\n\n  if (datavizInstance.config.renderAsPromise) {\n    returnValue = new Promise((resolve, reject) => {\n      const customCallback = this.config.onrendered;\n      datavizInstance.config.onrendered = () => {\n        if (customCallback) {\n          customCallback();\n        }\n        resolve(datavizInstance);\n      }\n    });\n  }\n\n  domReady(function(){\n    if (datavizInstance.view._prepared && loader.destroy) {\n      loader.destroy.apply(datavizInstance, arguments);\n    }\n    containerElement.innerHTML = '';\n\n    if (Dataviz.libraries[library] === 'undefined'){\n      // Error: Unregistered library\n      const msg = `Incorrect library`;\n      datavizInstance.message(msg);\n      throw msg;\n      return;\n    }\n    else {\n      if (typeof Dataviz.libraries[library][type] === 'undefined') {\n        const msg = `Incorrect chart type`;\n        datavizInstance.message(msg);\n        throw msg;\n        return;\n      }\n      else {\n        buildDomWrapper(containerElement,\n          datavizInstance.config\n        );\n        Dataviz.libraries[library][type].render.call(datavizInstance);\n        datavizInstance.view._rendered = true;\n      }\n    }\n  });\n\n  return returnValue;\n};\n\nDataviz.prototype.sortGroups = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.sortGroups() is deprecated. Use: new KeenDataviz({ sortGroups: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.sortGroups;\n  this.config.sortGroups = (str ? String(str) : null);\n\n  sortGroups(this, str);\n\n  return this;\n};\n\nfunction sortGroups(datavizInstance){\n  // Sort groups\n  if (datavizInstance.config.sortGroups && datavizInstance.data().length > 1) {\n    if (isDateString(datavizInstance.data()[1][0])) {\n      datavizInstance.dataset.sortColumns(datavizInstance.config.sortGroups, datavizInstance.dataset.getColumnSum);\n    }\n    else {\n      datavizInstance.dataset.sortRows(datavizInstance.config.sortGroups, datavizInstance.dataset.getRowSum);\n    }\n  }\n}\n\nDataviz.prototype.sortIntervals = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.sortIntervals() is deprecated. Use: new KeenDataviz({ sortIntervals: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.sortIntervals;\n  this.config.sortIntervals = (str ? String(str) : null);\n\n  sortIntervals(this);\n\n  return this;\n};\n\nfunction sortIntervals(datavizInstance){\n  if (datavizInstance.config.sortIntervals) {\n    datavizInstance.dataset.sortRows(datavizInstance.config.sortIntervals);\n  }\n}\n\nDataviz.prototype.stacked = function(bool){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.stacked() is deprecated. Use: new KeenDataviz({ stacked: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.stacked;\n  this.config.stacked = bool ? true : false;\n  return this;\n};\n\nDataviz.prototype.theme = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.theme() is deprecated. Use: new KeenDataviz({ theme: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.theme;\n  this.config.theme = (str ? String(str) : null);\n  return this;\n};\n\nDataviz.prototype.title = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.title() is deprecated. Use: new KeenDataviz({ title: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.title;\n  this.config.title = (str ? String(str) : null);\n  return this;\n};\n\nDataviz.prototype.type = function(str){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.type() is deprecated. Use: new KeenDataviz({ type: _your_value_here_ })');\n  }\n  if (!arguments.length) return this.config.type;\n  this.config.type = (str ? convertChartTypes(str) : null);\n  return this;\n};\n\nDataviz.prototype.update = function(){\n  const library = this.config.library;\n  const type = this.config.type;\n  const element = this.el();\n  if (library && type && element && Dataviz.libraries[library][type].update) {\n    Dataviz.libraries[library][type].update.apply(this, arguments);\n  }\n  return this;\n};\n\nDataviz.prototype.width = function(num){\n  if (this.config.showDeprecationWarnings) {\n    console.log('.width() is deprecated - use CSS classes');\n  }\n  return this;\n};\n\n  // Deprecations\n  Dataviz.prototype.chartType = Dataviz.prototype.type;\n  Dataviz.prototype.error = Dataviz.prototype.message;\n  Dataviz.prototype.parseRawData = Dataviz.prototype.data;\n  Dataviz.prototype.parseRequest = function(){\n    // this.emit('error', 'This method is no longer supported. Use .data() instead: https://github.com/keen/keen-dataviz.js#data');\n    return this;\n  };\n  Dataviz.prototype.initialize = function(){\n    // this.emit('error', 'This method is no longer supported, and can be omitted as it has no impact');\n    return this;\n  };\n\n  // Private\n  // ------------\n\nfunction buildDomWrapper(el, options) {\n  let html = '';\n  let chart100percentWide = '';\n  if (options.legend.position === 'top' || options.legend.position === 'bottom') {\n    chart100percentWide = 'c3-chart-100-percent';\n  }\n\n  let container = `<div class=\"c3-chart ${chart100percentWide}\"></div>`;\n  let align = 'horizontal';\n  if (options.legend.position === 'left' || options.legend.position === 'right') {\n    align = 'vertical';\n  }\n  if (options.legend && options.legend.show) {\n    if (options.legend.position === 'top' || options.legend.position === 'left') {\n      container = `<div class=\"keen-c3-legend keen-c3-legend-${align} keen-c3-legend-${options.legend.position}\"></div>${container}`;\n    } else {\n      container = `${container}<div class=\"keen-c3-legend keen-c3-legend-${align} keen-c3-legend-${options.legend.position}\"></div>`;\n    }\n  }\n  html += `<div class=\"${options.theme}\">`;\n  if (options.title && options.showTitle) {\n    html += `<div class=\"keen-dataviz-title ${options.theme}-title\">${options.title}</div>`;\n  }\n  html += `<div class=\"${options.theme}-rendering ${options.theme}-rendering-${align}\">${container}</div>`;\n  if (options.notes) {\n    html += `<div class=\"keen-dataviz-notes ${options.theme}-notes\">${options.notes}</div>`;\n  }\n  html += `</div>`;\n  el.innerHTML = html;\n}\n\nfunction convertChartTypes(str) {\n  const map = {\n    areachart: 'area',\n    barchart: 'horizontal-bar',\n    columnchart: 'bar',\n    linechart: 'line',\n    piechart: 'pie',\n  };\n  return map[str] || str;\n}\n\nfunction testDom(fn) {\n  if (/in/.test(document.readyState)) {\n    setTimeout(function(){\n      testDom(fn);\n    }, 9);\n  } else {\n    fn();\n  }\n}\n\nfunction domReady(fn) {\n  if (typeof document !== 'undefined' || typeof window === 'undefined') {\n    fn();\n    return;\n  }\n  // Firefox 3.5 shim\n  if (document.readyState == null && document.addEventListener) {\n    document.addEventListener('DOMContentLoaded', function DOMContentLoaded() {\n      document.removeEventListener('DOMContentLoaded', DOMContentLoaded, false);\n      document.readyState = 'complete';\n    }, false);\n    document.readyState = 'loading';\n  }\n  testDom(fn);\n}\n\nexport { Dataset } from './dataset';\n\nexport default Dataviz;\n","import { Dataviz, Dataset } from './index';\n\nconst env = typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : typeof window !== 'undefined' ? window : {};\n\nexport const extendKeenGlobalObject = function(env) {\n  env.KeenDataviz = Dataviz;\n  env.KeenDataset = Dataset;\n\n  // just for backward compatibility\n  env.Keen = env.Keen || {};\n  env.Keen.Dataset = Dataset;\n  env.Keen.Dataviz = Dataviz;\n};\n\nif (typeof KEEN_GLOBAL_OBJECT !== 'undefined'\n  && KEEN_GLOBAL_OBJECT) {\n  extendKeenGlobalObject(env);\n}\n\nexport let keenGlobals = undefined;\nif (typeof webpackKeenGlobals !== 'undefined') {\n  keenGlobals = webpackKeenGlobals;\n}\n\nexport { Dataviz, Dataset } from './index';\nexport default Dataviz;\n"],"sourceRoot":""}